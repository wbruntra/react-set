/*! For license information please see main.0aeea0f9.js.LICENSE.txt */
(()=>{var e={4922:(e,t)=>{"use strict";function n(e){var t=void 0;return"undefined"!==typeof Reflect&&"function"===typeof Reflect.ownKeys?t=Reflect.ownKeys(e.prototype):(t=Object.getOwnPropertyNames(e.prototype),"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e.prototype)))),t.forEach((function(t){if("constructor"!==t){var n=Object.getOwnPropertyDescriptor(e.prototype,t);"function"===typeof n.value&&Object.defineProperty(e.prototype,t,r(e,t,n))}})),e}function r(e,t,n){var r=n.value;if("function"!==typeof r)throw new Error("@autobind decorator can only be applied to methods not: "+typeof r);var i=!1;return{configurable:!0,get:function(){if(i||this===e.prototype||this.hasOwnProperty(t))return r;var n=r.bind(this);return i=!0,Object.defineProperty(this,t,{value:n,configurable:!0,writable:!0}),i=!1,n}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return 1===t.length?n.apply(void 0,t):r.apply(void 0,t)},e.exports=t.default},4569:(e,t,n)=>{e.exports=n(8036)},3381:(e,t,n)=>{"use strict";var r=n(3589),i=n(7297),o=n(9301),s=n(9774),a=n(1804),c=n(9145),u=n(5411),l=n(6789),h=n(4531),d=n(6569),f=n(6261);e.exports=function(e){return new Promise((function(t,n){var p,m=e.data,g=e.headers,v=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(m)&&r.isStandardBrowserEnv()&&delete g["Content-Type"];var w=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",_=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(b+":"+_)}var E=a(e.baseURL,e.url);function T(){if(w){var r="getAllResponseHeaders"in w?c(w.getAllResponseHeaders()):null,o={data:v&&"text"!==v&&"json"!==v?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:r,config:e,request:w};i((function(e){t(e),y()}),(function(e){n(e),y()}),o),w=null}}if(w.open(e.method.toUpperCase(),s(E,e.params,e.paramsSerializer),!0),w.timeout=e.timeout,"onloadend"in w?w.onloadend=T:w.onreadystatechange=function(){w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(T)},w.onabort=function(){w&&(n(new h("Request aborted",h.ECONNABORTED,e,w)),w=null)},w.onerror=function(){n(new h("Network Error",h.ERR_NETWORK,e,w,w)),w=null},w.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new h(t,r.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,e,w)),w=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||u(E))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;S&&(g[e.xsrfHeaderName]=S)}"setRequestHeader"in w&&r.forEach(g,(function(e,t){"undefined"===typeof m&&"content-type"===t.toLowerCase()?delete g[t]:w.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(w.withCredentials=!!e.withCredentials),v&&"json"!==v&&(w.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&w.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&w.upload&&w.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){w&&(n(!e||e&&e.type?new d:e),w.abort(),w=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),m||(m=null);var I=f(E);I&&-1===["http","https","file"].indexOf(I)?n(new h("Unsupported protocol "+I+":",h.ERR_BAD_REQUEST,e)):w.send(m)}))}},8036:(e,t,n)=>{"use strict";var r=n(3589),i=n(4049),o=n(3773),s=n(777);var a=function e(t){var n=new o(t),a=i(o.prototype.request,n);return r.extend(a,o.prototype,n),r.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(1709));a.Axios=o,a.CanceledError=n(6569),a.CancelToken=n(6857),a.isCancel=n(5517),a.VERSION=n(7600).version,a.toFormData=n(1397),a.AxiosError=n(4531),a.Cancel=a.CanceledError,a.all=function(e){return Promise.all(e)},a.spread=n(8089),a.isAxiosError=n(9580),e.exports=a,e.exports.default=a},6857:(e,t,n)=>{"use strict";var r=n(6569);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},6569:(e,t,n)=>{"use strict";var r=n(4531);function i(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(i,r,{__CANCEL__:!0}),e.exports=i},5517:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:(e,t,n)=>{"use strict";var r=n(3589),i=n(9774),o=n(7470),s=n(2733),a=n(777),c=n(1804),u=n(7835),l=u.validators;function h(e){this.defaults=e,this.interceptors={request:new o,response:new o}}h.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!i){var h=[s,void 0];for(Array.prototype.unshift.apply(h,r),h=h.concat(c),o=Promise.resolve(t);h.length;)o=o.then(h.shift(),h.shift());return o}for(var d=t;r.length;){var f=r.shift(),p=r.shift();try{d=f(d)}catch(m){p(m);break}}try{o=s(d)}catch(m){return Promise.reject(m)}for(;c.length;)o=o.then(c.shift(),c.shift());return o},h.prototype.getUri=function(e){e=a(this.defaults,e);var t=c(e.baseURL,e.url);return i(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){h.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(a(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}h.prototype[e]=t(),h.prototype[e+"Form"]=t(!0)})),e.exports=h},4531:(e,t,n)=>{"use strict";var r=n(3589);function i(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var o=i.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){s[e]={value:e}})),Object.defineProperties(i,s),Object.defineProperty(o,"isAxiosError",{value:!0}),i.from=function(e,t,n,s,a,c){var u=Object.create(o);return r.toFlatObject(e,u,(function(e){return e!==Error.prototype})),i.call(u,e.message,t,n,s,a),u.name=e.name,c&&Object.assign(u,c),u},e.exports=i},7470:(e,t,n)=>{"use strict";var r=n(3589);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},1804:(e,t,n)=>{"use strict";var r=n(4044),i=n(9549);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},2733:(e,t,n)=>{"use strict";var r=n(3589),i=n(2693),o=n(5517),s=n(1709),a=n(6569);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},777:(e,t,n)=>{"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||o,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},7297:(e,t,n)=>{"use strict";var r=n(4531);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},2693:(e,t,n)=>{"use strict";var r=n(3589),i=n(1709);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},1709:(e,t,n)=>{"use strict";var r=n(3589),i=n(4341),o=n(4531),s=n(6789),a=n(1397),c={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:s,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){if(i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,o=r.isObject(e),s=t&&t["Content-Type"];if((n=r.isFileList(e))||o&&"multipart/form-data"===s){var c=this.env&&this.env.FormData;return a(n?{"files[]":e}:e,c&&new c)}return o||"application/json"===s?(u(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s){if("SyntaxError"===a.name)throw o.from(a,o.ERR_BAD_RESPONSE,this,null,this.response);throw a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(c)})),e.exports=l},6789:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:e=>{e.exports={version:"0.27.2"}},4049:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:(e,t,n)=>{"use strict";var r=n(3589);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(i(t)+"="+i(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},9549:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:(e,t,n)=>{"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},9580:(e,t,n)=>{"use strict";var r=n(3589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},5411:(e,t,n)=>{"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:(e,t,n)=>{"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},3035:e=>{e.exports=null},9145:(e,t,n)=>{"use strict";var r=n(3589),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(s[t]&&i.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},6261:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8089:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},1397:(e,t,n)=>{"use strict";var r=n(3589);e.exports=function(e,t){t=t||new FormData;var n=[];function i(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(o,s){if(r.isPlainObject(o)||r.isArray(o)){if(-1!==n.indexOf(o))throw Error("Circular reference detected in "+s);n.push(o),r.forEach(o,(function(n,o){if(!r.isUndefined(n)){var a,c=s?s+"."+o:o;if(n&&!s&&"object"===typeof n)if(r.endsWith(o,"{}"))n=JSON.stringify(n);else if(r.endsWith(o,"[]")&&(a=r.toArray(n)))return void a.forEach((function(e){!r.isUndefined(e)&&t.append(c,i(e))}));e(n,c)}})),n.pop()}else t.append(s,i(o))}(e),t}},7835:(e,t,n)=>{"use strict";var r=n(7600).version,i=n(4531),o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var s={};o.transitional=function(e,t,n){function o(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new i(o(r," has been removed"+(t?" in "+t:"")),i.ERR_DEPRECATED);return t&&!s[r]&&(s[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),o=r.length;o-- >0;){var s=r[o],a=t[s];if(a){var c=e[s],u=void 0===c||a(c,s,e);if(!0!==u)throw new i("option "+s+" must be "+u,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+s,i.ERR_BAD_OPTION)}},validators:o}},3589:(e,t,n)=>{"use strict";var r,i=n(4049),o=Object.prototype.toString,s=(r=Object.create(null),function(e){var t=o.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return s(t)===e}}function c(e){return Array.isArray(e)}function u(e){return"undefined"===typeof e}var l=a("ArrayBuffer");function h(e){return null!==e&&"object"===typeof e}function d(e){if("object"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var f=a("Date"),p=a("File"),m=a("Blob"),g=a("FileList");function v(e){return"[object Function]"===o.call(e)}var y=a("URLSearchParams");function w(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),c(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var b,_=(b="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return b&&e instanceof b});e.exports={isArray:c,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||o.call(e)===t||v(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:h,isPlainObject:d,isUndefined:u,isDate:f,isFile:p,isBlob:m,isFunction:v,isStream:function(e){return h(e)&&v(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:w,merge:function e(){var t={};function n(n,r){d(t[r])&&d(n)?t[r]=e(t[r],n):d(n)?t[r]=e({},n):c(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)w(arguments[r],n);return t},extend:function(e,t,n){return w(t,(function(t,r){e[r]=n&&"function"===typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,i,o,s={};t=t||{};do{for(i=(r=Object.getOwnPropertyNames(e)).length;i-- >0;)s[o=r[i]]||(t[o]=e[o],s[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:a,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(u(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:_,isFileList:g}},1694:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&e.push(s)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var a in n)r.call(n,a)&&n[a]&&e.push(a);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},2110:(e,t,n)=>{"use strict";var r=n(7441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var u=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=l(n);h&&(s=s.concat(h(n)));for(var a=c(t),m=c(n),g=0;g<s.length;++g){var v=s[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=d(n,v);try{u(t,v,y)}catch(w){}}}}return t}},1172:(e,t)=>{"use strict";function n(e){return"object"!==typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}Object.defineProperty(t,"__esModule",{value:!0});var r="object"===typeof process&&!0;function i(e,t){if(!e){if(r)throw new Error("Invariant failed");throw new Error(t())}}t.invariant=i;var o=Object.prototype.hasOwnProperty,s=Array.prototype.splice,a=Object.prototype.toString;function c(e){return a.call(e).slice(8,-1)}var u=Object.assign||function(e,t){return l(t).forEach((function(n){o.call(t,n)&&(e[n]=t[n])})),e},l="function"===typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function h(e){return Array.isArray(e)?u(e.constructor(e.length),e):"Map"===c(e)?new Map(e):"Set"===c(e)?new Set(e):e&&"object"===typeof e?u(Object.create(Object.getPrototypeOf(e)),e):e}var d=function(){function e(){this.commands=u({},f),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var n=this,r="function"===typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(r)||i(!Array.isArray(r),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),i("object"===typeof r&&null!==r,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(n.commands).join(", ")+"."}));var s=e;return l(r).forEach((function(t){if(o.call(n.commands,t)){var i=e===s;s=n.commands[t](r[t],s,r,e),i&&n.isEquals(s,e)&&(s=e)}else{var a="Map"===c(e)?n.update(e.get(t),r[t]):n.update(e[t],r[t]),u="Map"===c(s)?s.get(t):s[t];n.isEquals(a,u)&&("undefined"!==typeof a||o.call(e,t))||(s===e&&(s=h(e)),"Map"===c(s)?s.set(t,a):s[t]=a)}})),s},e}();t.Context=d;var f={$push:function(e,t,n){return m(t,n,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,n){return m(t,n,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,r,o){return function(e,t){i(Array.isArray(e),(function(){return"Expected $splice target to be an array; got "+n(e)})),v(t.$splice)}(t,r),e.forEach((function(e){v(e),t===o&&e.length&&(t=h(o)),s.apply(t,e)})),t},$set:function(e,t,n){return function(e){i(1===Object.keys(e).length,(function(){return"Cannot have more than one key in an object with $set"}))}(n),e},$toggle:function(e,t){g(e,"$toggle");var n=e.length?h(t):t;return e.forEach((function(e){n[e]=!t[e]})),n},$unset:function(e,t,n,r){return g(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===r&&(t=h(r)),delete t[e])})),t},$add:function(e,t,n,r){return y(t,"$add"),g(e,"$add"),"Map"===c(t)?e.forEach((function(e){var n=e[0],i=e[1];t===r&&t.get(n)!==i&&(t=h(r)),t.set(n,i)})):e.forEach((function(e){t!==r||t.has(e)||(t=h(r)),t.add(e)})),t},$remove:function(e,t,n,r){return y(t,"$remove"),g(e,"$remove"),e.forEach((function(e){t===r&&t.has(e)&&(t=h(r)),t.delete(e)})),t},$merge:function(e,t,r,o){var s,a;return s=t,i((a=e)&&"object"===typeof a,(function(){return"update(): $merge expects a spec of type 'object'; got "+n(a)})),i(s&&"object"===typeof s,(function(){return"update(): $merge expects a target of type 'object'; got "+n(s)})),l(e).forEach((function(n){e[n]!==t[n]&&(t===o&&(t=h(o)),t[n]=e[n])})),t},$apply:function(e,t){var r;return i("function"===typeof(r=e),(function(){return"update(): expected spec of $apply to be a function; got "+n(r)+"."})),e(t)}},p=new d;function m(e,t,r){i(Array.isArray(e),(function(){return"update(): expected target of "+n(r)+" to be an array; got "+n(e)+"."})),g(t[r],r)}function g(e,t){i(Array.isArray(e),(function(){return"update(): expected spec of "+n(t)+" to be an array; got "+n(e)+". Did you forget to wrap your parameter in an array?"}))}function v(e){i(Array.isArray(e),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(e)+". Did you forget to wrap your parameters in an array?"}))}function y(e,t){var r=c(e);i("Map"===r||"Set"===r,(function(){return"update(): "+n(t)+" expects a target of type Set or Map; got "+n(r)}))}t.isEquals=p.update.isEquals,t.extend=p.extend,t.default=p.update,t.default.default=e.exports=u(t.default,t)},1571:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},763:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=16,u=32,l=64,h=128,d=256,f=1/0,p=9007199254740991,m=NaN,g=4294967295,v=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",u],["partialRight",l],["rearg",d]],y="[object Arguments]",w="[object Array]",b="[object Boolean]",_="[object Date]",E="[object Error]",T="[object Function]",S="[object GeneratorFunction]",I="[object Map]",k="[object Number]",x="[object Object]",C="[object Promise]",N="[object RegExp]",A="[object Set]",O="[object String]",P="[object Symbol]",D="[object WeakMap]",R="[object ArrayBuffer]",M="[object DataView]",L="[object Float32Array]",j="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",V="[object Int32Array]",B="[object Uint8Array]",z="[object Uint8ClampedArray]",q="[object Uint16Array]",W="[object Uint32Array]",K=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,J=RegExp(Q.source),Y=RegExp($.source),X=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),se=/^\s+/,ae=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,we=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ee=/($^)/,Te=/['\n\r\u2028\u2029\\]/g,Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ie="\\u2700-\\u27bf",ke="a-z\\xdf-\\xf6\\xf8-\\xff",xe="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Ne="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="['\u2019]",Oe="[\\ud800-\\udfff]",Pe="["+Ne+"]",De="["+Se+"]",Re="\\d+",Me="[\\u2700-\\u27bf]",Le="["+ke+"]",je="[^\\ud800-\\udfff"+Ne+Re+Ie+ke+xe+"]",Fe="\\ud83c[\\udffb-\\udfff]",Ue="[^\\ud800-\\udfff]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",Be="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+xe+"]",qe="(?:"+Le+"|"+je+")",We="(?:"+ze+"|"+je+")",Ke="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",He="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ge="(?:"+De+"|"+Fe+")"+"?",Qe="[\\ufe0e\\ufe0f]?",$e=Qe+Ge+("(?:\\u200d(?:"+[Ue,Ve,Be].join("|")+")"+Qe+Ge+")*"),Je="(?:"+[Me,Ve,Be].join("|")+")"+$e,Ye="(?:"+[Ue+De+"?",De,Ve,Be,Oe].join("|")+")",Xe=RegExp(Ae,"g"),Ze=RegExp(De,"g"),et=RegExp(Fe+"(?="+Fe+")|"+Ye+$e,"g"),tt=RegExp([ze+"?"+Le+"+"+Ke+"(?="+[Pe,ze,"$"].join("|")+")",We+"+"+He+"(?="+[Pe,ze+qe,"$"].join("|")+")",ze+"?"+qe+"+"+Ke,ze+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Je].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+Se+Ce+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,st={};st[L]=st[j]=st[F]=st[U]=st[V]=st[B]=st[z]=st[q]=st[W]=!0,st[y]=st[w]=st[R]=st[b]=st[M]=st[_]=st[E]=st[T]=st[I]=st[k]=st[x]=st[N]=st[A]=st[O]=st[D]=!1;var at={};at[y]=at[w]=at[R]=at[M]=at[b]=at[_]=at[L]=at[j]=at[F]=at[U]=at[V]=at[I]=at[k]=at[x]=at[N]=at[A]=at[O]=at[P]=at[B]=at[z]=at[q]=at[W]=!0,at[E]=at[T]=at[D]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,lt=parseInt,ht="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,dt="object"==typeof self&&self&&self.Object===Object&&self,ft=ht||dt||Function("return this")(),pt=t&&!t.nodeType&&t,mt=pt&&e&&!e.nodeType&&e,gt=mt&&mt.exports===pt,vt=gt&&ht.process,yt=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(t){}}(),wt=yt&&yt.isArrayBuffer,bt=yt&&yt.isDate,_t=yt&&yt.isMap,Et=yt&&yt.isRegExp,Tt=yt&&yt.isSet,St=yt&&yt.isTypedArray;function It(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function kt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function xt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Nt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function At(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function Ot(e,t){return!!(null==e?0:e.length)&&Bt(e,t,0)>-1}function Pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Rt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Mt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Lt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function jt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Kt("length");function Ut(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Vt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Bt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Vt(e,qt,n)}function zt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function qt(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?Qt(e,t)/n:m}function Kt(e){return function(t){return null==t?i:t[e]}}function Ht(e){return function(t){return null==e?i:e[t]}}function Gt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Qt(e,t){for(var n,r=-1,o=e.length;++r<o;){var s=t(e[r]);s!==i&&(n=n===i?s:n+s)}return n}function $t(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,mn(e)+1).replace(se,""):e}function Yt(e){return function(t){return e(t)}}function Xt(e,t){return Dt(t,(function(t){return e[t]}))}function Zt(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&Bt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&Bt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=Ht({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ct[e]}function an(e){return nt.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function ln(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return an(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ft(e)}function pn(e){return an(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function mn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var gn=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function e(t){var n=(t=null==t?ft:vn.defaults(ft.Object(),t,vn.pick(ft,it))).Array,r=t.Date,ae=t.Error,Se=t.Function,Ie=t.Math,ke=t.Object,xe=t.RegExp,Ce=t.String,Ne=t.TypeError,Ae=n.prototype,Oe=Se.prototype,Pe=ke.prototype,De=t["__core-js_shared__"],Re=Oe.toString,Me=Pe.hasOwnProperty,Le=0,je=function(){var e=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Pe.toString,Ue=Re.call(ke),Ve=ft._,Be=xe("^"+Re.call(Me).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=gt?t.Buffer:i,qe=t.Symbol,We=t.Uint8Array,Ke=ze?ze.allocUnsafe:i,He=un(ke.getPrototypeOf,ke),Ge=ke.create,Qe=Pe.propertyIsEnumerable,$e=Ae.splice,Je=qe?qe.isConcatSpreadable:i,Ye=qe?qe.iterator:i,et=qe?qe.toStringTag:i,nt=function(){try{var e=fo(ke,"defineProperty");return e({},"",{}),e}catch(t){}}(),ct=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,ht=r&&r.now!==ft.Date.now&&r.now,dt=t.setTimeout!==ft.setTimeout&&t.setTimeout,pt=Ie.ceil,mt=Ie.floor,vt=ke.getOwnPropertySymbols,yt=ze?ze.isBuffer:i,Ft=t.isFinite,Ht=Ae.join,yn=un(ke.keys,ke),wn=Ie.max,bn=Ie.min,_n=r.now,En=t.parseInt,Tn=Ie.random,Sn=Ae.reverse,In=fo(t,"DataView"),kn=fo(t,"Map"),xn=fo(t,"Promise"),Cn=fo(t,"Set"),Nn=fo(t,"WeakMap"),An=fo(ke,"create"),On=Nn&&new Nn,Pn={},Dn=Vo(In),Rn=Vo(kn),Mn=Vo(xn),Ln=Vo(Cn),jn=Vo(Nn),Fn=qe?qe.prototype:i,Un=Fn?Fn.valueOf:i,Vn=Fn?Fn.toString:i;function Bn(e){if(ra(e)&&!Hs(e)&&!(e instanceof Kn)){if(e instanceof Wn)return e;if(Me.call(e,"__wrapped__"))return Bo(e)}return new Wn(e)}var zn=function(){function e(){}return function(t){if(!na(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function qn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Kn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Qn;++t<n;)this.add(e[t])}function Jn(e){var t=this.__data__=new Gn(e);this.size=t.size}function Yn(e,t){var n=Hs(e),r=!n&&Ks(e),i=!n&&!r&&Js(e),o=!n&&!r&&!i&&ha(e),s=n||r||i||o,a=s?$t(e.length,Ce):[],c=a.length;for(var u in e)!t&&!Me.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||bo(u,c))||a.push(u);return a}function Xn(e){var t=e.length;return t?e[$r(0,t-1)]:i}function Zn(e,t){return jo(Ai(e),cr(t,0,e.length))}function er(e){return jo(Ai(e))}function tr(e,t,n){(n!==i&&!zs(e[t],n)||n===i&&!(t in e))&&sr(e,t,n)}function nr(e,t,n){var r=e[t];Me.call(e,t)&&zs(r,n)&&(n!==i||t in e)||sr(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(zs(e[n][0],t))return n;return-1}function ir(e,t,n,r){return fr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&Oi(t,Da(t),e)}function sr(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ar(e,t){for(var r=-1,o=t.length,s=n(o),a=null==e;++r<o;)s[r]=a?i:Ca(e,t[r]);return s}function cr(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function ur(e,t,n,r,o,s){var a,c=1&t,u=2&t,l=4&t;if(n&&(a=o?n(e,r,o,s):n(e)),a!==i)return a;if(!na(e))return e;var h=Hs(e);if(h){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Me.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return Ai(e,a)}else{var d=go(e),f=d==T||d==S;if(Js(e))return Si(e,c);if(d==x||d==y||f&&!o){if(a=u||f?{}:yo(e),!c)return u?function(e,t){return Oi(e,mo(e),t)}(e,function(e,t){return e&&Oi(t,Ra(t),e)}(a,e)):function(e,t){return Oi(e,po(e),t)}(e,or(a,e))}else{if(!at[d])return o?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case R:return Ii(e);case b:case _:return new r(+e);case M:return function(e,t){var n=t?Ii(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case L:case j:case F:case U:case V:case B:case z:case q:case W:return ki(e,n);case I:return new r;case k:case O:return new r(e);case N:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case A:return new r;case P:return i=e,Un?ke(Un.call(i)):{}}var i}(e,d,c)}}s||(s=new Jn);var p=s.get(e);if(p)return p;s.set(e,a),ca(e)?e.forEach((function(r){a.add(ur(r,t,n,r,e,s))})):ia(e)&&e.forEach((function(r,i){a.set(i,ur(r,t,n,i,e,s))}));var m=h?i:(l?u?oo:io:u?Ra:Da)(e);return xt(m||e,(function(r,i){m&&(r=e[i=r]),nr(a,i,ur(r,t,n,i,e,s))})),a}function lr(e,t,n){var r=n.length;if(null==e)return!r;for(e=ke(e);r--;){var o=n[r],s=t[o],a=e[o];if(a===i&&!(o in e)||!s(a))return!1}return!0}function hr(e,t,n){if("function"!=typeof e)throw new Ne(o);return Do((function(){e.apply(i,n)}),t)}function dr(e,t,n,r){var i=-1,o=Ot,s=!0,a=e.length,c=[],u=t.length;if(!a)return c;n&&(t=Dt(t,Yt(n))),r?(o=Pt,s=!1):t.length>=200&&(o=Zt,s=!1,t=new $n(t));e:for(;++i<a;){var l=e[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,s&&h===h){for(var d=u;d--;)if(t[d]===h)continue e;c.push(l)}else o(t,h,r)||c.push(l)}return c}Bn.templateSettings={escape:X,evaluate:Z,interpolate:ee,variable:"",imports:{_:Bn}},Bn.prototype=qn.prototype,Bn.prototype.constructor=Bn,Wn.prototype=zn(qn.prototype),Wn.prototype.constructor=Wn,Kn.prototype=zn(qn.prototype),Kn.prototype.constructor=Kn,Hn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(An){var n=t[e];return n===s?i:n}return Me.call(t,e)?t[e]:i},Hn.prototype.has=function(e){var t=this.__data__;return An?t[e]!==i:Me.call(t,e)},Hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=An&&t===i?s:t,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():$e.call(t,n,1),--this.size,!0)},Gn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},Gn.prototype.has=function(e){return rr(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(kn||Gn),string:new Hn}},Qn.prototype.delete=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},Qn.prototype.get=function(e){return lo(this,e).get(e)},Qn.prototype.has=function(e){return lo(this,e).has(e)},Qn.prototype.set=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},$n.prototype.add=$n.prototype.push=function(e){return this.__data__.set(e,s),this},$n.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Jn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Jn.prototype.get=function(e){return this.__data__.get(e)},Jn.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!kn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Qn(r)}return n.set(e,t),this.size=n.size,this};var fr=Ri(_r),pr=Ri(Er,!0);function mr(e,t){var n=!0;return fr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,t,n){for(var r=-1,o=e.length;++r<o;){var s=e[r],a=t(s);if(null!=a&&(c===i?a===a&&!la(a):n(a,c)))var c=a,u=s}return u}function vr(e,t){var n=[];return fr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=wo),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?yr(a,t-1,n,r,i):Rt(i,a):r||(i[i.length]=a)}return i}var wr=Mi(),br=Mi(!0);function _r(e,t){return e&&wr(e,t,Da)}function Er(e,t){return e&&br(e,t,Da)}function Tr(e,t){return At(t,(function(t){return Zs(e[t])}))}function Sr(e,t){for(var n=0,r=(t=bi(t,e)).length;null!=e&&n<r;)e=e[Uo(t[n++])];return n&&n==r?e:i}function Ir(e,t,n){var r=t(e);return Hs(e)?r:Rt(r,n(e))}function kr(e){return null==e?e===i?"[object Undefined]":"[object Null]":et&&et in ke(e)?function(e){var t=Me.call(e,et),n=e[et];try{e[et]=i;var r=!0}catch(s){}var o=Fe.call(e);r&&(t?e[et]=n:delete e[et]);return o}(e):function(e){return Fe.call(e)}(e)}function xr(e,t){return e>t}function Cr(e,t){return null!=e&&Me.call(e,t)}function Nr(e,t){return null!=e&&t in ke(e)}function Ar(e,t,r){for(var o=r?Pt:Ot,s=e[0].length,a=e.length,c=a,u=n(a),l=1/0,h=[];c--;){var d=e[c];c&&t&&(d=Dt(d,Yt(t))),l=bn(d.length,l),u[c]=!r&&(t||s>=120&&d.length>=120)?new $n(c&&d):i}d=e[0];var f=-1,p=u[0];e:for(;++f<s&&h.length<l;){var m=d[f],g=t?t(m):m;if(m=r||0!==m?m:0,!(p?Zt(p,g):o(h,g,r))){for(c=a;--c;){var v=u[c];if(!(v?Zt(v,g):o(e[c],g,r)))continue e}p&&p.push(g),h.push(m)}}return h}function Or(e,t,n){var r=null==(e=No(e,t=bi(t,e)))?e:e[Uo(Xo(t))];return null==r?i:It(r,e,n)}function Pr(e){return ra(e)&&kr(e)==y}function Dr(e,t,n,r,o){return e===t||(null==e||null==t||!ra(e)&&!ra(t)?e!==e&&t!==t:function(e,t,n,r,o,s){var a=Hs(e),c=Hs(t),u=a?w:go(e),l=c?w:go(t),h=(u=u==y?x:u)==x,d=(l=l==y?x:l)==x,f=u==l;if(f&&Js(e)){if(!Js(t))return!1;a=!0,h=!1}if(f&&!h)return s||(s=new Jn),a||ha(e)?no(e,t,n,r,o,s):function(e,t,n,r,i,o,s){switch(n){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!o(new We(e),new We(t)));case b:case _:case k:return zs(+e,+t);case E:return e.name==t.name&&e.message==t.message;case N:case O:return e==t+"";case I:var a=cn;case A:var c=1&r;if(a||(a=hn),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;r|=2,s.set(e,t);var l=no(a(e),a(t),r,i,o,s);return s.delete(e),l;case P:if(Un)return Un.call(e)==Un.call(t)}return!1}(e,t,u,n,r,o,s);if(!(1&n)){var p=h&&Me.call(e,"__wrapped__"),m=d&&Me.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,v=m?t.value():t;return s||(s=new Jn),o(g,v,n,r,s)}}if(!f)return!1;return s||(s=new Jn),function(e,t,n,r,o,s){var a=1&n,c=io(e),u=c.length,l=io(t).length;if(u!=l&&!a)return!1;var h=u;for(;h--;){var d=c[h];if(!(a?d in t:Me.call(t,d)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var m=!0;s.set(e,t),s.set(t,e);var g=a;for(;++h<u;){var v=e[d=c[h]],y=t[d];if(r)var w=a?r(y,v,d,t,e,s):r(v,y,d,e,t,s);if(!(w===i?v===y||o(v,y,n,r,s):w)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var b=e.constructor,_=t.constructor;b==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(m=!1)}return s.delete(e),s.delete(t),m}(e,t,n,r,o,s)}(e,t,n,r,Dr,o))}function Rr(e,t,n,r){var o=n.length,s=o,a=!r;if(null==e)return!s;for(e=ke(e);o--;){var c=n[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var u=(c=n[o])[0],l=e[u],h=c[1];if(a&&c[2]){if(l===i&&!(u in e))return!1}else{var d=new Jn;if(r)var f=r(l,h,u,e,t,d);if(!(f===i?Dr(h,l,3,r,d):f))return!1}}return!0}function Mr(e){return!(!na(e)||(t=e,je&&je in t))&&(Zs(e)?Be:ye).test(Vo(e));var t}function Lr(e){return"function"==typeof e?e:null==e?oc:"object"==typeof e?Hs(e)?zr(e[0],e[1]):Br(e):pc(e)}function jr(e){if(!Io(e))return yn(e);var t=[];for(var n in ke(e))Me.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!na(e))return function(e){var t=[];if(null!=e)for(var n in ke(e))t.push(n);return t}(e);var t=Io(e),n=[];for(var r in e)("constructor"!=r||!t&&Me.call(e,r))&&n.push(r);return n}function Ur(e,t){return e<t}function Vr(e,t){var r=-1,i=Qs(e)?n(e.length):[];return fr(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function Br(e){var t=ho(e);return 1==t.length&&t[0][2]?xo(t[0][0],t[0][1]):function(n){return n===e||Rr(n,e,t)}}function zr(e,t){return Eo(e)&&ko(t)?xo(Uo(e),t):function(n){var r=Ca(n,e);return r===i&&r===t?Na(n,e):Dr(t,r,3)}}function qr(e,t,n,r,o){e!==t&&wr(t,(function(s,a){if(o||(o=new Jn),na(s))!function(e,t,n,r,o,s,a){var c=Oo(e,n),u=Oo(t,n),l=a.get(u);if(l)return void tr(e,n,l);var h=s?s(c,u,n+"",e,t,a):i,d=h===i;if(d){var f=Hs(u),p=!f&&Js(u),m=!f&&!p&&ha(u);h=u,f||p||m?Hs(c)?h=c:$s(c)?h=Ai(c):p?(d=!1,h=Si(u,!0)):m?(d=!1,h=ki(u,!0)):h=[]:sa(u)||Ks(u)?(h=c,Ks(c)?h=wa(c):na(c)&&!Zs(c)||(h=yo(u))):d=!1}d&&(a.set(u,h),o(h,u,r,s,a),a.delete(u));tr(e,n,h)}(e,t,a,n,qr,r,o);else{var c=r?r(Oo(e,a),s,a+"",e,t,o):i;c===i&&(c=s),tr(e,a,c)}}),Ra)}function Wr(e,t){var n=e.length;if(n)return bo(t+=t<0?n:0,n)?e[t]:i}function Kr(e,t,n){t=t.length?Dt(t,(function(e){return Hs(e)?function(t){return Sr(t,1===e.length?e[0]:e)}:e})):[oc];var r=-1;t=Dt(t,Yt(uo()));var i=Vr(e,(function(e,n,i){var o=Dt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;for(;++r<s;){var c=xi(i[r],o[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Hr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=Sr(e,s);n(a,s)&&ei(o,bi(s,e),a)}return o}function Gr(e,t,n,r){var i=r?zt:Bt,o=-1,s=t.length,a=e;for(e===t&&(t=Ai(t)),n&&(a=Dt(e,Yt(n)));++o<s;)for(var c=0,u=t[o],l=n?n(u):u;(c=i(a,l,c,r))>-1;)a!==e&&$e.call(a,c,1),$e.call(e,c,1);return e}function Qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;bo(i)?$e.call(e,i,1):di(e,i)}}return e}function $r(e,t){return e+mt(Tn()*(t-e+1))}function Jr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=mt(t/2))&&(e+=e)}while(t);return n}function Yr(e,t){return Ro(Co(e,t,oc),e+"")}function Xr(e){return Xn(za(e))}function Zr(e,t){var n=za(e);return jo(n,cr(t,0,n.length))}function ei(e,t,n,r){if(!na(e))return e;for(var o=-1,s=(t=bi(t,e)).length,a=s-1,c=e;null!=c&&++o<s;){var u=Uo(t[o]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var h=c[u];(l=r?r(h,u,c):i)===i&&(l=na(h)?h:bo(t[o+1])?[]:{})}nr(c,u,l),c=c[u]}return e}var ti=On?function(e,t){return On.set(e,t),e}:oc,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:nc(t),writable:!0})}:oc;function ri(e){return jo(za(e))}function ii(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var s=n(o);++i<o;)s[i]=e[i+t];return s}function oi(e,t){var n;return fr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function si(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!la(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return ai(e,t,oc,n)}function ai(e,t,n,r){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!==t,c=null===t,u=la(t),l=t===i;o<s;){var h=mt((o+s)/2),d=n(e[h]),f=d!==i,p=null===d,m=d===d,g=la(d);if(a)var v=r||m;else v=l?m&&(r||f):c?m&&f&&(r||!p):u?m&&f&&!p&&(r||!g):!p&&!g&&(r?d<=t:d<t);v?o=h+1:s=h}return bn(s,4294967294)}function ci(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!zs(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function ui(e){return"number"==typeof e?e:la(e)?m:+e}function li(e){if("string"==typeof e)return e;if(Hs(e))return Dt(e,li)+"";if(la(e))return Vn?Vn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function hi(e,t,n){var r=-1,i=Ot,o=e.length,s=!0,a=[],c=a;if(n)s=!1,i=Pt;else if(o>=200){var u=t?null:Ji(e);if(u)return hn(u);s=!1,i=Zt,c=new $n}else c=t?[]:a;e:for(;++r<o;){var l=e[r],h=t?t(l):l;if(l=n||0!==l?l:0,s&&h===h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),a.push(l)}else i(c,h,n)||(c!==a&&c.push(h),a.push(l))}return a}function di(e,t){return null==(e=No(e,t=bi(t,e)))||delete e[Uo(Xo(t))]}function fi(e,t,n,r){return ei(e,t,n(Sr(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function mi(e,t){var n=e;return n instanceof Kn&&(n=n.value()),Mt(t,(function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))}),n)}function gi(e,t,r){var i=e.length;if(i<2)return i?hi(e[0]):[];for(var o=-1,s=n(i);++o<i;)for(var a=e[o],c=-1;++c<i;)c!=o&&(s[o]=dr(s[o]||a,e[c],t,r));return hi(yr(s,1),t,r)}function vi(e,t,n){for(var r=-1,o=e.length,s=t.length,a={};++r<o;){var c=r<s?t[r]:i;n(a,e[r],c)}return a}function yi(e){return $s(e)?e:[]}function wi(e){return"function"==typeof e?e:oc}function bi(e,t){return Hs(e)?e:Eo(e,t)?[e]:Fo(ba(e))}var _i=Yr;function Ei(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var Ti=ct||function(e){return ft.clearTimeout(e)};function Si(e,t){if(t)return e.slice();var n=e.length,r=Ke?Ke(n):new e.constructor(n);return e.copy(r),r}function Ii(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function ki(e,t){var n=t?Ii(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function xi(e,t){if(e!==t){var n=e!==i,r=null===e,o=e===e,s=la(e),a=t!==i,c=null===t,u=t===t,l=la(t);if(!c&&!l&&!s&&e>t||s&&a&&u&&!c&&!l||r&&a&&u||!n&&u||!o)return 1;if(!r&&!s&&!l&&e<t||l&&n&&o&&!r&&!s||c&&n&&o||!a&&o||!u)return-1}return 0}function Ci(e,t,r,i){for(var o=-1,s=e.length,a=r.length,c=-1,u=t.length,l=wn(s-a,0),h=n(u+l),d=!i;++c<u;)h[c]=t[c];for(;++o<a;)(d||o<s)&&(h[r[o]]=e[o]);for(;l--;)h[c++]=e[o++];return h}function Ni(e,t,r,i){for(var o=-1,s=e.length,a=-1,c=r.length,u=-1,l=t.length,h=wn(s-c,0),d=n(h+l),f=!i;++o<h;)d[o]=e[o];for(var p=o;++u<l;)d[p+u]=t[u];for(;++a<c;)(f||o<s)&&(d[p+r[a]]=e[o++]);return d}function Ai(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Oi(e,t,n,r){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var c=t[s],u=r?r(n[c],e[c],c,n,e):i;u===i&&(u=e[c]),o?sr(n,c,u):nr(n,c,u)}return n}function Pi(e,t){return function(n,r){var i=Hs(n)?kt:ir,o=t?t():{};return i(n,e,uo(r,2),o)}}function Di(e){return Yr((function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=e.length>3&&"function"==typeof s?(o--,s):i,a&&_o(n[0],n[1],a)&&(s=o<3?i:s,o=1),t=ke(t);++r<o;){var c=n[r];c&&e(t,c,r,s)}return t}))}function Ri(e,t){return function(n,r){if(null==n)return n;if(!Qs(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=ke(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Mi(e){return function(t,n,r){for(var i=-1,o=ke(t),s=r(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===n(o[c],c,o))break}return t}}function Li(e){return function(t){var n=an(t=ba(t))?pn(t):i,r=n?n[0]:t.charAt(0),o=n?Ei(n,1).join(""):t.slice(1);return r[e]()+o}}function ji(e){return function(t){return Mt(Za(Ka(t).replace(Xe,"")),e,"")}}function Fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=zn(e.prototype),r=e.apply(n,t);return na(r)?r:n}}function Ui(e){return function(t,n,r){var o=ke(t);if(!Qs(t)){var s=uo(n,3);t=Da(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[s?t[a]:a]:i}}function Vi(e){return ro((function(t){var n=t.length,r=n,s=Wn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Ne(o);if(s&&!c&&"wrapper"==ao(a))var c=new Wn([],!0)}for(r=c?r:n;++r<n;){var u=ao(a=t[r]),l="wrapper"==u?so(a):i;c=l&&To(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[ao(l[0])].apply(c,l[3]):1==a.length&&To(a)?c[u]():c.thru(a)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&Hs(r))return c.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Bi(e,t,r,o,s,a,c,u,l,d){var f=t&h,p=1&t,m=2&t,g=24&t,v=512&t,y=m?i:Fi(e);return function i(){for(var h=arguments.length,w=n(h),b=h;b--;)w[b]=arguments[b];if(g)var _=co(i),E=nn(w,_);if(o&&(w=Ci(w,o,s,g)),a&&(w=Ni(w,a,c,g)),h-=E,g&&h<d){var T=ln(w,_);return Qi(e,t,Bi,i.placeholder,r,w,T,u,l,d-h)}var S=p?r:this,I=m?S[e]:e;return h=w.length,u?w=Ao(w,u):v&&h>1&&w.reverse(),f&&l<h&&(w.length=l),this&&this!==ft&&this instanceof i&&(I=y||Fi(I)),I.apply(S,w)}}function zi(e,t){return function(n,r){return function(e,t,n,r){return _r(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function qi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=li(n),r=li(r)):(n=ui(n),r=ui(r)),o=e(n,r)}return o}}function Wi(e){return ro((function(t){return t=Dt(t,Yt(uo())),Yr((function(n){var r=this;return e(t,(function(e){return It(e,r,n)}))}))}))}function Ki(e,t){var n=(t=t===i?" ":li(t)).length;if(n<2)return n?Jr(t,e):t;var r=Jr(t,pt(e/fn(t)));return an(t)?Ei(pn(r),0,e).join(""):r.slice(0,e)}function Hi(e){return function(t,r,o){return o&&"number"!=typeof o&&_o(t,r,o)&&(r=o=i),t=ma(t),r===i?(r=t,t=0):r=ma(r),function(e,t,r,i){for(var o=-1,s=wn(pt((t-e)/(r||1)),0),a=n(s);s--;)a[i?s:++o]=e,e+=r;return a}(t,r,o=o===i?t<r?1:-1:ma(o),e)}}function Gi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ya(t),n=ya(n)),e(t,n)}}function Qi(e,t,n,r,o,s,a,c,h,d){var f=8&t;t|=f?u:l,4&(t&=~(f?l:u))||(t&=-4);var p=[e,t,o,f?s:i,f?a:i,f?i:s,f?i:a,c,h,d],m=n.apply(i,p);return To(e)&&Po(m,p),m.placeholder=r,Mo(m,e,t)}function $i(e){var t=Ie[e];return function(e,n){if(e=ya(e),(n=null==n?0:bn(ga(n),292))&&Ft(e)){var r=(ba(e)+"e").split("e");return+((r=(ba(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ji=Cn&&1/hn(new Cn([,-0]))[1]==f?function(e){return new Cn(e)}:lc;function Yi(e){return function(t){var n=go(t);return n==I?cn(t):n==A?dn(t):function(e,t){return Dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xi(e,t,r,s,f,p,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new Ne(o);var y=s?s.length:0;if(y||(t&=-97,s=f=i),m=m===i?m:wn(ga(m),0),g=g===i?g:ga(g),y-=f?f.length:0,t&l){var w=s,b=f;s=f=i}var _=v?i:so(e),E=[e,t,r,s,f,w,b,p,m,g];if(_&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=r==h&&8==n||r==h&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?Ci(u,c,t[4]):c,e[4]=u?ln(e[3],a):t[4]}(c=t[5])&&(u=e[5],e[5]=u?Ni(u,c,t[6]):c,e[6]=u?ln(e[5],a):t[6]);(c=t[7])&&(e[7]=c);r&h&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(E,_),e=E[0],t=E[1],r=E[2],s=E[3],f=E[4],!(g=E[9]=E[9]===i?v?0:e.length:wn(E[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)T=8==t||t==c?function(e,t,r){var o=Fi(e);return function s(){for(var a=arguments.length,c=n(a),u=a,l=co(s);u--;)c[u]=arguments[u];var h=a<3&&c[0]!==l&&c[a-1]!==l?[]:ln(c,l);return(a-=h.length)<r?Qi(e,t,Bi,s.placeholder,i,c,h,i,i,r-a):It(this&&this!==ft&&this instanceof s?o:e,this,c)}}(e,t,g):t!=u&&33!=t||f.length?Bi.apply(i,E):function(e,t,r,i){var o=1&t,s=Fi(e);return function t(){for(var a=-1,c=arguments.length,u=-1,l=i.length,h=n(l+c),d=this&&this!==ft&&this instanceof t?s:e;++u<l;)h[u]=i[u];for(;c--;)h[u++]=arguments[++a];return It(d,o?r:this,h)}}(e,t,r,s);else var T=function(e,t,n){var r=1&t,i=Fi(e);return function t(){return(this&&this!==ft&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Mo((_?ti:Po)(T,E),e,t)}function Zi(e,t,n,r){return e===i||zs(e,Pe[n])&&!Me.call(r,n)?t:e}function eo(e,t,n,r,o,s){return na(e)&&na(t)&&(s.set(t,e),qr(e,t,i,eo,s),s.delete(t)),e}function to(e){return sa(e)?i:e}function no(e,t,n,r,o,s){var a=1&n,c=e.length,u=t.length;if(c!=u&&!(a&&u>c))return!1;var l=s.get(e),h=s.get(t);if(l&&h)return l==t&&h==e;var d=-1,f=!0,p=2&n?new $n:i;for(s.set(e,t),s.set(t,e);++d<c;){var m=e[d],g=t[d];if(r)var v=a?r(g,m,d,t,e,s):r(m,g,d,e,t,s);if(v!==i){if(v)continue;f=!1;break}if(p){if(!jt(t,(function(e,t){if(!Zt(p,t)&&(m===e||o(m,e,n,r,s)))return p.push(t)}))){f=!1;break}}else if(m!==g&&!o(m,g,n,r,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function ro(e){return Ro(Co(e,i,Go),e+"")}function io(e){return Ir(e,Da,po)}function oo(e){return Ir(e,Ra,mo)}var so=On?function(e){return On.get(e)}:lc;function ao(e){for(var t=e.name+"",n=Pn[t],r=Me.call(Pn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function co(e){return(Me.call(Bn,"placeholder")?Bn:e).placeholder}function uo(){var e=Bn.iteratee||sc;return e=e===sc?Lr:e,arguments.length?e(arguments[0],arguments[1]):e}function lo(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ho(e){for(var t=Da(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ko(i)]}return t}function fo(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Mr(n)?n:i}var po=vt?function(e){return null==e?[]:(e=ke(e),At(vt(e),(function(t){return Qe.call(e,t)})))}:vc,mo=vt?function(e){for(var t=[];e;)Rt(t,po(e)),e=He(e);return t}:vc,go=kr;function vo(e,t,n){for(var r=-1,i=(t=bi(t,e)).length,o=!1;++r<i;){var s=Uo(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ta(i)&&bo(s,i)&&(Hs(e)||Ks(e))}function yo(e){return"function"!=typeof e.constructor||Io(e)?{}:zn(He(e))}function wo(e){return Hs(e)||Ks(e)||!!(Je&&e&&e[Je])}function bo(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function _o(e,t,n){if(!na(n))return!1;var r=typeof t;return!!("number"==r?Qs(n)&&bo(t,n.length):"string"==r&&t in n)&&zs(n[t],e)}function Eo(e,t){if(Hs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!la(e))||(ne.test(e)||!te.test(e)||null!=t&&e in ke(t))}function To(e){var t=ao(e),n=Bn[t];if("function"!=typeof n||!(t in Kn.prototype))return!1;if(e===n)return!0;var r=so(n);return!!r&&e===r[0]}(In&&go(new In(new ArrayBuffer(1)))!=M||kn&&go(new kn)!=I||xn&&go(xn.resolve())!=C||Cn&&go(new Cn)!=A||Nn&&go(new Nn)!=D)&&(go=function(e){var t=kr(e),n=t==x?e.constructor:i,r=n?Vo(n):"";if(r)switch(r){case Dn:return M;case Rn:return I;case Mn:return C;case Ln:return A;case jn:return D}return t});var So=De?Zs:yc;function Io(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe)}function ko(e){return e===e&&!na(e)}function xo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in ke(n)))}}function Co(e,t,r){return t=wn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=wn(i.length-t,0),a=n(s);++o<s;)a[o]=i[t+o];o=-1;for(var c=n(t+1);++o<t;)c[o]=i[o];return c[t]=r(a),It(e,this,c)}}function No(e,t){return t.length<2?e:Sr(e,ii(t,0,-1))}function Ao(e,t){for(var n=e.length,r=bn(t.length,n),o=Ai(e);r--;){var s=t[r];e[r]=bo(s,n)?o[s]:i}return e}function Oo(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Po=Lo(ti),Do=dt||function(e,t){return ft.setTimeout(e,t)},Ro=Lo(ni);function Mo(e,t,n){var r=t+"";return Ro(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return xt(v,(function(n){var r="_."+n[0];t&n[1]&&!Ot(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(le):[]}(r),n)))}function Lo(e){var t=0,n=0;return function(){var r=_n(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function jo(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var s=$r(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Fo=function(e){var t=Ls(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}));function Uo(e){if("string"==typeof e||la(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Vo(e){if(null!=e){try{return Re.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Bo(e){if(e instanceof Kn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Ai(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zo=Yr((function(e,t){return $s(e)?dr(e,yr(t,1,$s,!0)):[]})),qo=Yr((function(e,t){var n=Xo(t);return $s(n)&&(n=i),$s(e)?dr(e,yr(t,1,$s,!0),uo(n,2)):[]})),Wo=Yr((function(e,t){var n=Xo(t);return $s(n)&&(n=i),$s(e)?dr(e,yr(t,1,$s,!0),i,n):[]}));function Ko(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=wn(r+i,0)),Vt(e,uo(t,3),i)}function Ho(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ga(n),o=n<0?wn(r+o,0):bn(o,r-1)),Vt(e,uo(t,3),o,!0)}function Go(e){return(null==e?0:e.length)?yr(e,1):[]}function Qo(e){return e&&e.length?e[0]:i}var $o=Yr((function(e){var t=Dt(e,yi);return t.length&&t[0]===e[0]?Ar(t):[]})),Jo=Yr((function(e){var t=Xo(e),n=Dt(e,yi);return t===Xo(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Ar(n,uo(t,2)):[]})),Yo=Yr((function(e){var t=Xo(e),n=Dt(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Ar(n,i,t):[]}));function Xo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Zo=Yr(es);function es(e,t){return e&&e.length&&t&&t.length?Gr(e,t):e}var ts=ro((function(e,t){var n=null==e?0:e.length,r=ar(e,t);return Qr(e,Dt(t,(function(e){return bo(e,n)?+e:e})).sort(xi)),r}));function ns(e){return null==e?e:Sn.call(e)}var rs=Yr((function(e){return hi(yr(e,1,$s,!0))})),is=Yr((function(e){var t=Xo(e);return $s(t)&&(t=i),hi(yr(e,1,$s,!0),uo(t,2))})),os=Yr((function(e){var t=Xo(e);return t="function"==typeof t?t:i,hi(yr(e,1,$s,!0),i,t)}));function ss(e){if(!e||!e.length)return[];var t=0;return e=At(e,(function(e){if($s(e))return t=wn(e.length,t),!0})),$t(t,(function(t){return Dt(e,Kt(t))}))}function as(e,t){if(!e||!e.length)return[];var n=ss(e);return null==t?n:Dt(n,(function(e){return It(t,i,e)}))}var cs=Yr((function(e,t){return $s(e)?dr(e,t):[]})),us=Yr((function(e){return gi(At(e,$s))})),ls=Yr((function(e){var t=Xo(e);return $s(t)&&(t=i),gi(At(e,$s),uo(t,2))})),hs=Yr((function(e){var t=Xo(e);return t="function"==typeof t?t:i,gi(At(e,$s),i,t)})),ds=Yr(ss);var fs=Yr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,as(e,n)}));function ps(e){var t=Bn(e);return t.__chain__=!0,t}function ms(e,t){return t(e)}var gs=ro((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return ar(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Kn&&bo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ms,args:[o],thisArg:i}),new Wn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var vs=Pi((function(e,t,n){Me.call(e,n)?++e[n]:sr(e,n,1)}));var ys=Ui(Ko),ws=Ui(Ho);function bs(e,t){return(Hs(e)?xt:fr)(e,uo(t,3))}function _s(e,t){return(Hs(e)?Ct:pr)(e,uo(t,3))}var Es=Pi((function(e,t,n){Me.call(e,n)?e[n].push(t):sr(e,n,[t])}));var Ts=Yr((function(e,t,r){var i=-1,o="function"==typeof t,s=Qs(e)?n(e.length):[];return fr(e,(function(e){s[++i]=o?It(t,e,r):Or(e,t,r)})),s})),Ss=Pi((function(e,t,n){sr(e,n,t)}));function Is(e,t){return(Hs(e)?Dt:Vr)(e,uo(t,3))}var ks=Pi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var xs=Yr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&_o(e,t[0],t[1])?t=[]:n>2&&_o(t[0],t[1],t[2])&&(t=[t[0]]),Kr(e,yr(t,1),[])})),Cs=ht||function(){return ft.Date.now()};function Ns(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Xi(e,h,i,i,i,i,t)}function As(e,t){var n;if("function"!=typeof t)throw new Ne(o);return e=ga(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Os=Yr((function(e,t,n){var r=1;if(n.length){var i=ln(n,co(Os));r|=u}return Xi(e,r,t,n,i)})),Ps=Yr((function(e,t,n){var r=3;if(n.length){var i=ln(n,co(Ps));r|=u}return Xi(t,r,e,n,i)}));function Ds(e,t,n){var r,s,a,c,u,l,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Ne(o);function m(t){var n=r,o=s;return r=s=i,h=t,c=e.apply(o,n)}function g(e){return h=e,u=Do(y,t),d?m(e):c}function v(e){var n=e-l;return l===i||n>=t||n<0||f&&e-h>=a}function y(){var e=Cs();if(v(e))return w(e);u=Do(y,function(e){var n=t-(e-l);return f?bn(n,a-(e-h)):n}(e))}function w(e){return u=i,p&&r?m(e):(r=s=i,c)}function b(){var e=Cs(),n=v(e);if(r=arguments,s=this,l=e,n){if(u===i)return g(l);if(f)return Ti(u),u=Do(y,t),m(l)}return u===i&&(u=Do(y,t)),c}return t=ya(t)||0,na(n)&&(d=!!n.leading,a=(f="maxWait"in n)?wn(ya(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),b.cancel=function(){u!==i&&Ti(u),h=0,r=l=s=u=i},b.flush=function(){return u===i?c:w(Cs())},b}var Rs=Yr((function(e,t){return hr(e,1,t)})),Ms=Yr((function(e,t,n){return hr(e,ya(t)||0,n)}));function Ls(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ne(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ls.Cache||Qn),n}function js(e){if("function"!=typeof e)throw new Ne(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ls.Cache=Qn;var Fs=_i((function(e,t){var n=(t=1==t.length&&Hs(t[0])?Dt(t[0],Yt(uo())):Dt(yr(t,1),Yt(uo()))).length;return Yr((function(r){for(var i=-1,o=bn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return It(e,this,r)}))})),Us=Yr((function(e,t){var n=ln(t,co(Us));return Xi(e,u,i,t,n)})),Vs=Yr((function(e,t){var n=ln(t,co(Vs));return Xi(e,l,i,t,n)})),Bs=ro((function(e,t){return Xi(e,d,i,i,i,t)}));function zs(e,t){return e===t||e!==e&&t!==t}var qs=Gi(xr),Ws=Gi((function(e,t){return e>=t})),Ks=Pr(function(){return arguments}())?Pr:function(e){return ra(e)&&Me.call(e,"callee")&&!Qe.call(e,"callee")},Hs=n.isArray,Gs=wt?Yt(wt):function(e){return ra(e)&&kr(e)==R};function Qs(e){return null!=e&&ta(e.length)&&!Zs(e)}function $s(e){return ra(e)&&Qs(e)}var Js=yt||yc,Ys=bt?Yt(bt):function(e){return ra(e)&&kr(e)==_};function Xs(e){if(!ra(e))return!1;var t=kr(e);return t==E||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!sa(e)}function Zs(e){if(!na(e))return!1;var t=kr(e);return t==T||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ea(e){return"number"==typeof e&&e==ga(e)}function ta(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function na(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ra(e){return null!=e&&"object"==typeof e}var ia=_t?Yt(_t):function(e){return ra(e)&&go(e)==I};function oa(e){return"number"==typeof e||ra(e)&&kr(e)==k}function sa(e){if(!ra(e)||kr(e)!=x)return!1;var t=He(e);if(null===t)return!0;var n=Me.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==Ue}var aa=Et?Yt(Et):function(e){return ra(e)&&kr(e)==N};var ca=Tt?Yt(Tt):function(e){return ra(e)&&go(e)==A};function ua(e){return"string"==typeof e||!Hs(e)&&ra(e)&&kr(e)==O}function la(e){return"symbol"==typeof e||ra(e)&&kr(e)==P}var ha=St?Yt(St):function(e){return ra(e)&&ta(e.length)&&!!st[kr(e)]};var da=Gi(Ur),fa=Gi((function(e,t){return e<=t}));function pa(e){if(!e)return[];if(Qs(e))return ua(e)?pn(e):Ai(e);if(Ye&&e[Ye])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ye]());var t=go(e);return(t==I?cn:t==A?hn:za)(e)}function ma(e){return e?(e=ya(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ga(e){var t=ma(e),n=t%1;return t===t?n?t-n:t:0}function va(e){return e?cr(ga(e),0,g):0}function ya(e){if("number"==typeof e)return e;if(la(e))return m;if(na(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=na(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=ve.test(e);return n||we.test(e)?lt(e.slice(2),n?2:8):ge.test(e)?m:+e}function wa(e){return Oi(e,Ra(e))}function ba(e){return null==e?"":li(e)}var _a=Di((function(e,t){if(Io(t)||Qs(t))Oi(t,Da(t),e);else for(var n in t)Me.call(t,n)&&nr(e,n,t[n])})),Ea=Di((function(e,t){Oi(t,Ra(t),e)})),Ta=Di((function(e,t,n,r){Oi(t,Ra(t),e,r)})),Sa=Di((function(e,t,n,r){Oi(t,Da(t),e,r)})),Ia=ro(ar);var ka=Yr((function(e,t){e=ke(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&_o(t[0],t[1],o)&&(r=1);++n<r;)for(var s=t[n],a=Ra(s),c=-1,u=a.length;++c<u;){var l=a[c],h=e[l];(h===i||zs(h,Pe[l])&&!Me.call(e,l))&&(e[l]=s[l])}return e})),xa=Yr((function(e){return e.push(i,eo),It(La,i,e)}));function Ca(e,t,n){var r=null==e?i:Sr(e,t);return r===i?n:r}function Na(e,t){return null!=e&&vo(e,t,Nr)}var Aa=zi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),nc(oc)),Oa=zi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Me.call(e,t)?e[t].push(n):e[t]=[n]}),uo),Pa=Yr(Or);function Da(e){return Qs(e)?Yn(e):jr(e)}function Ra(e){return Qs(e)?Yn(e,!0):Fr(e)}var Ma=Di((function(e,t,n){qr(e,t,n)})),La=Di((function(e,t,n,r){qr(e,t,n,r)})),ja=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=Dt(t,(function(t){return t=bi(t,e),r||(r=t.length>1),t})),Oi(e,oo(e),n),r&&(n=ur(n,7,to));for(var i=t.length;i--;)di(n,t[i]);return n}));var Fa=ro((function(e,t){return null==e?{}:function(e,t){return Hr(e,t,(function(t,n){return Na(e,n)}))}(e,t)}));function Ua(e,t){if(null==e)return{};var n=Dt(oo(e),(function(e){return[e]}));return t=uo(t),Hr(e,n,(function(e,n){return t(e,n[0])}))}var Va=Yi(Da),Ba=Yi(Ra);function za(e){return null==e?[]:Xt(e,Da(e))}var qa=ji((function(e,t,n){return t=t.toLowerCase(),e+(n?Wa(t):t)}));function Wa(e){return Xa(ba(e).toLowerCase())}function Ka(e){return(e=ba(e))&&e.replace(_e,rn).replace(Ze,"")}var Ha=ji((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ga=ji((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Qa=Li("toLowerCase");var $a=ji((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ja=ji((function(e,t,n){return e+(n?" ":"")+Xa(t)}));var Ya=ji((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xa=Li("toUpperCase");function Za(e,t,n){return e=ba(e),(t=n?i:t)===i?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var ec=Yr((function(e,t){try{return It(e,i,t)}catch(n){return Xs(n)?n:new ae(n)}})),tc=ro((function(e,t){return xt(t,(function(t){t=Uo(t),sr(e,t,Os(e[t],e))})),e}));function nc(e){return function(){return e}}var rc=Vi(),ic=Vi(!0);function oc(e){return e}function sc(e){return Lr("function"==typeof e?e:ur(e,1))}var ac=Yr((function(e,t){return function(n){return Or(n,e,t)}})),cc=Yr((function(e,t){return function(n){return Or(e,n,t)}}));function uc(e,t,n){var r=Da(t),i=Tr(t,r);null!=n||na(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Tr(t,Da(t)));var o=!(na(n)&&"chain"in n)||!!n.chain,s=Zs(e);return xt(i,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ai(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Rt([this.value()],arguments))})})),e}function lc(){}var hc=Wi(Dt),dc=Wi(Nt),fc=Wi(jt);function pc(e){return Eo(e)?Kt(Uo(e)):function(e){return function(t){return Sr(t,e)}}(e)}var mc=Hi(),gc=Hi(!0);function vc(){return[]}function yc(){return!1}var wc=qi((function(e,t){return e+t}),0),bc=$i("ceil"),_c=qi((function(e,t){return e/t}),1),Ec=$i("floor");var Tc=qi((function(e,t){return e*t}),1),Sc=$i("round"),Ic=qi((function(e,t){return e-t}),0);return Bn.after=function(e,t){if("function"!=typeof t)throw new Ne(o);return e=ga(e),function(){if(--e<1)return t.apply(this,arguments)}},Bn.ary=Ns,Bn.assign=_a,Bn.assignIn=Ea,Bn.assignInWith=Ta,Bn.assignWith=Sa,Bn.at=Ia,Bn.before=As,Bn.bind=Os,Bn.bindAll=tc,Bn.bindKey=Ps,Bn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Hs(e)?e:[e]},Bn.chain=ps,Bn.chunk=function(e,t,r){t=(r?_o(e,t,r):t===i)?1:wn(ga(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,c=n(pt(o/t));s<o;)c[a++]=ii(e,s,s+=t);return c},Bn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Bn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Rt(Hs(r)?Ai(r):[r],yr(t,1))},Bn.cond=function(e){var t=null==e?0:e.length,n=uo();return e=t?Dt(e,(function(e){if("function"!=typeof e[1])throw new Ne(o);return[n(e[0]),e[1]]})):[],Yr((function(n){for(var r=-1;++r<t;){var i=e[r];if(It(i[0],this,n))return It(i[1],this,n)}}))},Bn.conforms=function(e){return function(e){var t=Da(e);return function(n){return lr(n,e,t)}}(ur(e,1))},Bn.constant=nc,Bn.countBy=vs,Bn.create=function(e,t){var n=zn(e);return null==t?n:or(n,t)},Bn.curry=function e(t,n,r){var o=Xi(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Bn.curryRight=function e(t,n,r){var o=Xi(t,c,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Bn.debounce=Ds,Bn.defaults=ka,Bn.defaultsDeep=xa,Bn.defer=Rs,Bn.delay=Ms,Bn.difference=zo,Bn.differenceBy=qo,Bn.differenceWith=Wo,Bn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:ga(t))<0?0:t,r):[]},Bn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:ga(t)))<0?0:t):[]},Bn.dropRightWhile=function(e,t){return e&&e.length?pi(e,uo(t,3),!0,!0):[]},Bn.dropWhile=function(e,t){return e&&e.length?pi(e,uo(t,3),!0):[]},Bn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&_o(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=ga(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ga(r))<0&&(r+=o),r=n>r?0:va(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Bn.filter=function(e,t){return(Hs(e)?At:vr)(e,uo(t,3))},Bn.flatMap=function(e,t){return yr(Is(e,t),1)},Bn.flatMapDeep=function(e,t){return yr(Is(e,t),f)},Bn.flatMapDepth=function(e,t,n){return n=n===i?1:ga(n),yr(Is(e,t),n)},Bn.flatten=Go,Bn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,f):[]},Bn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:ga(t)):[]},Bn.flip=function(e){return Xi(e,512)},Bn.flow=rc,Bn.flowRight=ic,Bn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Bn.functions=function(e){return null==e?[]:Tr(e,Da(e))},Bn.functionsIn=function(e){return null==e?[]:Tr(e,Ra(e))},Bn.groupBy=Es,Bn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Bn.intersection=$o,Bn.intersectionBy=Jo,Bn.intersectionWith=Yo,Bn.invert=Aa,Bn.invertBy=Oa,Bn.invokeMap=Ts,Bn.iteratee=sc,Bn.keyBy=Ss,Bn.keys=Da,Bn.keysIn=Ra,Bn.map=Is,Bn.mapKeys=function(e,t){var n={};return t=uo(t,3),_r(e,(function(e,r,i){sr(n,t(e,r,i),e)})),n},Bn.mapValues=function(e,t){var n={};return t=uo(t,3),_r(e,(function(e,r,i){sr(n,r,t(e,r,i))})),n},Bn.matches=function(e){return Br(ur(e,1))},Bn.matchesProperty=function(e,t){return zr(e,ur(t,1))},Bn.memoize=Ls,Bn.merge=Ma,Bn.mergeWith=La,Bn.method=ac,Bn.methodOf=cc,Bn.mixin=uc,Bn.negate=js,Bn.nthArg=function(e){return e=ga(e),Yr((function(t){return Wr(t,e)}))},Bn.omit=ja,Bn.omitBy=function(e,t){return Ua(e,js(uo(t)))},Bn.once=function(e){return As(2,e)},Bn.orderBy=function(e,t,n,r){return null==e?[]:(Hs(t)||(t=null==t?[]:[t]),Hs(n=r?i:n)||(n=null==n?[]:[n]),Kr(e,t,n))},Bn.over=hc,Bn.overArgs=Fs,Bn.overEvery=dc,Bn.overSome=fc,Bn.partial=Us,Bn.partialRight=Vs,Bn.partition=ks,Bn.pick=Fa,Bn.pickBy=Ua,Bn.property=pc,Bn.propertyOf=function(e){return function(t){return null==e?i:Sr(e,t)}},Bn.pull=Zo,Bn.pullAll=es,Bn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,uo(n,2)):e},Bn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,i,n):e},Bn.pullAt=ts,Bn.range=mc,Bn.rangeRight=gc,Bn.rearg=Bs,Bn.reject=function(e,t){return(Hs(e)?At:vr)(e,js(uo(t,3)))},Bn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=uo(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Qr(e,i),n},Bn.rest=function(e,t){if("function"!=typeof e)throw new Ne(o);return Yr(e,t=t===i?t:ga(t))},Bn.reverse=ns,Bn.sampleSize=function(e,t,n){return t=(n?_o(e,t,n):t===i)?1:ga(t),(Hs(e)?Zn:Zr)(e,t)},Bn.set=function(e,t,n){return null==e?e:ei(e,t,n)},Bn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},Bn.shuffle=function(e){return(Hs(e)?er:ri)(e)},Bn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&_o(e,t,n)?(t=0,n=r):(t=null==t?0:ga(t),n=n===i?r:ga(n)),ii(e,t,n)):[]},Bn.sortBy=xs,Bn.sortedUniq=function(e){return e&&e.length?ci(e):[]},Bn.sortedUniqBy=function(e,t){return e&&e.length?ci(e,uo(t,2)):[]},Bn.split=function(e,t,n){return n&&"number"!=typeof n&&_o(e,t,n)&&(t=n=i),(n=n===i?g:n>>>0)?(e=ba(e))&&("string"==typeof t||null!=t&&!aa(t))&&!(t=li(t))&&an(e)?Ei(pn(e),0,n):e.split(t,n):[]},Bn.spread=function(e,t){if("function"!=typeof e)throw new Ne(o);return t=null==t?0:wn(ga(t),0),Yr((function(n){var r=n[t],i=Ei(n,0,t);return r&&Rt(i,r),It(e,this,i)}))},Bn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Bn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:ga(t))<0?0:t):[]},Bn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:ga(t)))<0?0:t,r):[]},Bn.takeRightWhile=function(e,t){return e&&e.length?pi(e,uo(t,3),!1,!0):[]},Bn.takeWhile=function(e,t){return e&&e.length?pi(e,uo(t,3)):[]},Bn.tap=function(e,t){return t(e),e},Bn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ne(o);return na(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ds(e,t,{leading:r,maxWait:t,trailing:i})},Bn.thru=ms,Bn.toArray=pa,Bn.toPairs=Va,Bn.toPairsIn=Ba,Bn.toPath=function(e){return Hs(e)?Dt(e,Uo):la(e)?[e]:Ai(Fo(ba(e)))},Bn.toPlainObject=wa,Bn.transform=function(e,t,n){var r=Hs(e),i=r||Js(e)||ha(e);if(t=uo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:na(e)&&Zs(o)?zn(He(e)):{}}return(i?xt:_r)(e,(function(e,r,i){return t(n,e,r,i)})),n},Bn.unary=function(e){return Ns(e,1)},Bn.union=rs,Bn.unionBy=is,Bn.unionWith=os,Bn.uniq=function(e){return e&&e.length?hi(e):[]},Bn.uniqBy=function(e,t){return e&&e.length?hi(e,uo(t,2)):[]},Bn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?hi(e,i,t):[]},Bn.unset=function(e,t){return null==e||di(e,t)},Bn.unzip=ss,Bn.unzipWith=as,Bn.update=function(e,t,n){return null==e?e:fi(e,t,wi(n))},Bn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:fi(e,t,wi(n),r)},Bn.values=za,Bn.valuesIn=function(e){return null==e?[]:Xt(e,Ra(e))},Bn.without=cs,Bn.words=Za,Bn.wrap=function(e,t){return Us(wi(t),e)},Bn.xor=us,Bn.xorBy=ls,Bn.xorWith=hs,Bn.zip=ds,Bn.zipObject=function(e,t){return vi(e||[],t||[],nr)},Bn.zipObjectDeep=function(e,t){return vi(e||[],t||[],ei)},Bn.zipWith=fs,Bn.entries=Va,Bn.entriesIn=Ba,Bn.extend=Ea,Bn.extendWith=Ta,uc(Bn,Bn),Bn.add=wc,Bn.attempt=ec,Bn.camelCase=qa,Bn.capitalize=Wa,Bn.ceil=bc,Bn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=ya(n))===n?n:0),t!==i&&(t=(t=ya(t))===t?t:0),cr(ya(e),t,n)},Bn.clone=function(e){return ur(e,4)},Bn.cloneDeep=function(e){return ur(e,5)},Bn.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:i)},Bn.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:i)},Bn.conformsTo=function(e,t){return null==t||lr(e,t,Da(t))},Bn.deburr=Ka,Bn.defaultTo=function(e,t){return null==e||e!==e?t:e},Bn.divide=_c,Bn.endsWith=function(e,t,n){e=ba(e),t=li(t);var r=e.length,o=n=n===i?r:cr(ga(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Bn.eq=zs,Bn.escape=function(e){return(e=ba(e))&&Y.test(e)?e.replace($,on):e},Bn.escapeRegExp=function(e){return(e=ba(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},Bn.every=function(e,t,n){var r=Hs(e)?Nt:mr;return n&&_o(e,t,n)&&(t=i),r(e,uo(t,3))},Bn.find=ys,Bn.findIndex=Ko,Bn.findKey=function(e,t){return Ut(e,uo(t,3),_r)},Bn.findLast=ws,Bn.findLastIndex=Ho,Bn.findLastKey=function(e,t){return Ut(e,uo(t,3),Er)},Bn.floor=Ec,Bn.forEach=bs,Bn.forEachRight=_s,Bn.forIn=function(e,t){return null==e?e:wr(e,uo(t,3),Ra)},Bn.forInRight=function(e,t){return null==e?e:br(e,uo(t,3),Ra)},Bn.forOwn=function(e,t){return e&&_r(e,uo(t,3))},Bn.forOwnRight=function(e,t){return e&&Er(e,uo(t,3))},Bn.get=Ca,Bn.gt=qs,Bn.gte=Ws,Bn.has=function(e,t){return null!=e&&vo(e,t,Cr)},Bn.hasIn=Na,Bn.head=Qo,Bn.identity=oc,Bn.includes=function(e,t,n,r){e=Qs(e)?e:za(e),n=n&&!r?ga(n):0;var i=e.length;return n<0&&(n=wn(i+n,0)),ua(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Bt(e,t,n)>-1},Bn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=wn(r+i,0)),Bt(e,t,i)},Bn.inRange=function(e,t,n){return t=ma(t),n===i?(n=t,t=0):n=ma(n),function(e,t,n){return e>=bn(t,n)&&e<wn(t,n)}(e=ya(e),t,n)},Bn.invoke=Pa,Bn.isArguments=Ks,Bn.isArray=Hs,Bn.isArrayBuffer=Gs,Bn.isArrayLike=Qs,Bn.isArrayLikeObject=$s,Bn.isBoolean=function(e){return!0===e||!1===e||ra(e)&&kr(e)==b},Bn.isBuffer=Js,Bn.isDate=Ys,Bn.isElement=function(e){return ra(e)&&1===e.nodeType&&!sa(e)},Bn.isEmpty=function(e){if(null==e)return!0;if(Qs(e)&&(Hs(e)||"string"==typeof e||"function"==typeof e.splice||Js(e)||ha(e)||Ks(e)))return!e.length;var t=go(e);if(t==I||t==A)return!e.size;if(Io(e))return!jr(e).length;for(var n in e)if(Me.call(e,n))return!1;return!0},Bn.isEqual=function(e,t){return Dr(e,t)},Bn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Dr(e,t,i,n):!!r},Bn.isError=Xs,Bn.isFinite=function(e){return"number"==typeof e&&Ft(e)},Bn.isFunction=Zs,Bn.isInteger=ea,Bn.isLength=ta,Bn.isMap=ia,Bn.isMatch=function(e,t){return e===t||Rr(e,t,ho(t))},Bn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Rr(e,t,ho(t),n)},Bn.isNaN=function(e){return oa(e)&&e!=+e},Bn.isNative=function(e){if(So(e))throw new ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(e)},Bn.isNil=function(e){return null==e},Bn.isNull=function(e){return null===e},Bn.isNumber=oa,Bn.isObject=na,Bn.isObjectLike=ra,Bn.isPlainObject=sa,Bn.isRegExp=aa,Bn.isSafeInteger=function(e){return ea(e)&&e>=-9007199254740991&&e<=p},Bn.isSet=ca,Bn.isString=ua,Bn.isSymbol=la,Bn.isTypedArray=ha,Bn.isUndefined=function(e){return e===i},Bn.isWeakMap=function(e){return ra(e)&&go(e)==D},Bn.isWeakSet=function(e){return ra(e)&&"[object WeakSet]"==kr(e)},Bn.join=function(e,t){return null==e?"":Ht.call(e,t)},Bn.kebabCase=Ha,Bn.last=Xo,Bn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ga(n))<0?wn(r+o,0):bn(o,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Vt(e,qt,o,!0)},Bn.lowerCase=Ga,Bn.lowerFirst=Qa,Bn.lt=da,Bn.lte=fa,Bn.max=function(e){return e&&e.length?gr(e,oc,xr):i},Bn.maxBy=function(e,t){return e&&e.length?gr(e,uo(t,2),xr):i},Bn.mean=function(e){return Wt(e,oc)},Bn.meanBy=function(e,t){return Wt(e,uo(t,2))},Bn.min=function(e){return e&&e.length?gr(e,oc,Ur):i},Bn.minBy=function(e,t){return e&&e.length?gr(e,uo(t,2),Ur):i},Bn.stubArray=vc,Bn.stubFalse=yc,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=Tc,Bn.nth=function(e,t){return e&&e.length?Wr(e,ga(t)):i},Bn.noConflict=function(){return ft._===this&&(ft._=Ve),this},Bn.noop=lc,Bn.now=Cs,Bn.pad=function(e,t,n){e=ba(e);var r=(t=ga(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ki(mt(i),n)+e+Ki(pt(i),n)},Bn.padEnd=function(e,t,n){e=ba(e);var r=(t=ga(t))?fn(e):0;return t&&r<t?e+Ki(t-r,n):e},Bn.padStart=function(e,t,n){e=ba(e);var r=(t=ga(t))?fn(e):0;return t&&r<t?Ki(t-r,n)+e:e},Bn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),En(ba(e).replace(se,""),t||0)},Bn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_o(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ma(e),t===i?(t=e,e=0):t=ma(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Tn();return bn(e+o*(t-e+ut("1e-"+((o+"").length-1))),t)}return $r(e,t)},Bn.reduce=function(e,t,n){var r=Hs(e)?Mt:Gt,i=arguments.length<3;return r(e,uo(t,4),n,i,fr)},Bn.reduceRight=function(e,t,n){var r=Hs(e)?Lt:Gt,i=arguments.length<3;return r(e,uo(t,4),n,i,pr)},Bn.repeat=function(e,t,n){return t=(n?_o(e,t,n):t===i)?1:ga(t),Jr(ba(e),t)},Bn.replace=function(){var e=arguments,t=ba(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Bn.result=function(e,t,n){var r=-1,o=(t=bi(t,e)).length;for(o||(o=1,e=i);++r<o;){var s=null==e?i:e[Uo(t[r])];s===i&&(r=o,s=n),e=Zs(s)?s.call(e):s}return e},Bn.round=Sc,Bn.runInContext=e,Bn.sample=function(e){return(Hs(e)?Xn:Xr)(e)},Bn.size=function(e){if(null==e)return 0;if(Qs(e))return ua(e)?fn(e):e.length;var t=go(e);return t==I||t==A?e.size:jr(e).length},Bn.snakeCase=$a,Bn.some=function(e,t,n){var r=Hs(e)?jt:oi;return n&&_o(e,t,n)&&(t=i),r(e,uo(t,3))},Bn.sortedIndex=function(e,t){return si(e,t)},Bn.sortedIndexBy=function(e,t,n){return ai(e,t,uo(n,2))},Bn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=si(e,t);if(r<n&&zs(e[r],t))return r}return-1},Bn.sortedLastIndex=function(e,t){return si(e,t,!0)},Bn.sortedLastIndexBy=function(e,t,n){return ai(e,t,uo(n,2),!0)},Bn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=si(e,t,!0)-1;if(zs(e[n],t))return n}return-1},Bn.startCase=Ja,Bn.startsWith=function(e,t,n){return e=ba(e),n=null==n?0:cr(ga(n),0,e.length),t=li(t),e.slice(n,n+t.length)==t},Bn.subtract=Ic,Bn.sum=function(e){return e&&e.length?Qt(e,oc):0},Bn.sumBy=function(e,t){return e&&e.length?Qt(e,uo(t,2)):0},Bn.template=function(e,t,n){var r=Bn.templateSettings;n&&_o(e,t,n)&&(t=i),e=ba(e),t=Ta({},t,r,Zi);var o,s,a=Ta({},t.imports,r.imports,Zi),c=Da(a),u=Xt(a,c),l=0,h=t.interpolate||Ee,d="__p += '",f=xe((t.escape||Ee).source+"|"+h.source+"|"+(h===ee?pe:Ee).source+"|"+(t.evaluate||Ee).source+"|$","g"),p="//# sourceURL="+(Me.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(f,(function(t,n,r,i,a,c){return r||(r=i),d+=e.slice(l,c).replace(Te,sn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),d+="';\n";var m=Me.call(t,"variable")&&t.variable;if(m){if(de.test(m))throw new ae("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(K,""):d).replace(H,"$1").replace(G,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=ec((function(){return Se(c,p+"return "+d).apply(i,u)}));if(g.source=d,Xs(g))throw g;return g},Bn.times=function(e,t){if((e=ga(e))<1||e>p)return[];var n=g,r=bn(e,g);t=uo(t),e-=g;for(var i=$t(r,t);++n<e;)t(n);return i},Bn.toFinite=ma,Bn.toInteger=ga,Bn.toLength=va,Bn.toLower=function(e){return ba(e).toLowerCase()},Bn.toNumber=ya,Bn.toSafeInteger=function(e){return e?cr(ga(e),-9007199254740991,p):0===e?e:0},Bn.toString=ba,Bn.toUpper=function(e){return ba(e).toUpperCase()},Bn.trim=function(e,t,n){if((e=ba(e))&&(n||t===i))return Jt(e);if(!e||!(t=li(t)))return e;var r=pn(e),o=pn(t);return Ei(r,en(r,o),tn(r,o)+1).join("")},Bn.trimEnd=function(e,t,n){if((e=ba(e))&&(n||t===i))return e.slice(0,mn(e)+1);if(!e||!(t=li(t)))return e;var r=pn(e);return Ei(r,0,tn(r,pn(t))+1).join("")},Bn.trimStart=function(e,t,n){if((e=ba(e))&&(n||t===i))return e.replace(se,"");if(!e||!(t=li(t)))return e;var r=pn(e);return Ei(r,en(r,pn(t))).join("")},Bn.truncate=function(e,t){var n=30,r="...";if(na(t)){var o="separator"in t?t.separator:o;n="length"in t?ga(t.length):n,r="omission"in t?li(t.omission):r}var s=(e=ba(e)).length;if(an(e)){var a=pn(e);s=a.length}if(n>=s)return e;var c=n-fn(r);if(c<1)return r;var u=a?Ei(a,0,c).join(""):e.slice(0,c);if(o===i)return u+r;if(a&&(c+=u.length-c),aa(o)){if(e.slice(c).search(o)){var l,h=u;for(o.global||(o=xe(o.source,ba(me.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var d=l.index;u=u.slice(0,d===i?c:d)}}else if(e.indexOf(li(o),c)!=c){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+r},Bn.unescape=function(e){return(e=ba(e))&&J.test(e)?e.replace(Q,gn):e},Bn.uniqueId=function(e){var t=++Le;return ba(e)+t},Bn.upperCase=Ya,Bn.upperFirst=Xa,Bn.each=bs,Bn.eachRight=_s,Bn.first=Qo,uc(Bn,function(){var e={};return _r(Bn,(function(t,n){Me.call(Bn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Bn.VERSION="4.17.21",xt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Bn[e].placeholder=Bn})),xt(["drop","take"],(function(e,t){Kn.prototype[e]=function(n){n=n===i?1:wn(ga(n),0);var r=this.__filtered__&&!t?new Kn(this):this.clone();return r.__filtered__?r.__takeCount__=bn(n,r.__takeCount__):r.__views__.push({size:bn(n,g),type:e+(r.__dir__<0?"Right":"")}),r},Kn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),xt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Kn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),xt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Kn.prototype[e]=function(){return this[n](1).value()[0]}})),xt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Kn.prototype[e]=function(){return this.__filtered__?new Kn(this):this[n](1)}})),Kn.prototype.compact=function(){return this.filter(oc)},Kn.prototype.find=function(e){return this.filter(e).head()},Kn.prototype.findLast=function(e){return this.reverse().find(e)},Kn.prototype.invokeMap=Yr((function(e,t){return"function"==typeof e?new Kn(this):this.map((function(n){return Or(n,e,t)}))})),Kn.prototype.reject=function(e){return this.filter(js(uo(e)))},Kn.prototype.slice=function(e,t){e=ga(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Kn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ga(t))<0?n.dropRight(-t):n.take(t-e)),n)},Kn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Kn.prototype.toArray=function(){return this.take(g)},_r(Kn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Bn[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);o&&(Bn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,c=t instanceof Kn,u=a[0],l=c||Hs(t),h=function(e){var t=o.apply(Bn,Rt([e],a));return r&&d?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var d=this.__chain__,f=!!this.__actions__.length,p=s&&!d,m=c&&!f;if(!s&&l){t=m?t:new Kn(this);var g=e.apply(t,a);return g.__actions__.push({func:ms,args:[h],thisArg:i}),new Wn(g,d)}return p&&m?e.apply(this,a):(g=this.thru(h),p?r?g.value()[0]:g.value():g)})})),xt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Bn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Hs(i)?i:[],e)}return this[n]((function(n){return t.apply(Hs(n)?n:[],e)}))}})),_r(Kn.prototype,(function(e,t){var n=Bn[t];if(n){var r=n.name+"";Me.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:t,func:n})}})),Pn[Bi(i,2).name]=[{name:"wrapper",func:i}],Kn.prototype.clone=function(){var e=new Kn(this.__wrapped__);return e.__actions__=Ai(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ai(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ai(this.__views__),e},Kn.prototype.reverse=function(){if(this.__filtered__){var e=new Kn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Kn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Hs(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=bn(t,e+s);break;case"takeRight":e=wn(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=r?a:s-1,l=this.__iteratees__,h=l.length,d=0,f=bn(c,this.__takeCount__);if(!n||!r&&i==c&&f==c)return mi(e,this.__actions__);var p=[];e:for(;c--&&d<f;){for(var m=-1,g=e[u+=t];++m<h;){var v=l[m],y=v.iteratee,w=v.type,b=y(g);if(2==w)g=b;else if(!b){if(1==w)continue e;break e}}p[d++]=g}return p},Bn.prototype.at=gs,Bn.prototype.chain=function(){return ps(this)},Bn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===i&&(this.__values__=pa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Bn.prototype.plant=function(e){for(var t,n=this;n instanceof qn;){var r=Bo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Bn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Kn){var t=e;return this.__actions__.length&&(t=new Kn(this)),(t=t.reverse()).__actions__.push({func:ms,args:[ns],thisArg:i}),new Wn(t,this.__chain__)}return this.thru(ns)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,Ye&&(Bn.prototype[Ye]=function(){return this}),Bn}();ft._=vn,(r=function(){return vn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},1725:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var s,a,c=i(e),u=1;u<arguments.length;u++){for(var l in s=Object(arguments[u]))n.call(s,l)&&(c[l]=s[l]);if(t){a=t(s);for(var h=0;h<a.length;h++)r.call(s,a[h])&&(c[a[h]]=s[a[h]])}}return c}},6151:(e,t,n)=>{var r=n(1571);e.exports=f,e.exports.parse=o,e.exports.compile=function(e,t){return a(o(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,s=0,a="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(a+=e.slice(s,f),s=f+h.length,d)a+=d[1];else{var p=e[s],m=n[2],g=n[3],v=n[4],y=n[5],w=n[6],b=n[7];a&&(r.push(a),a="");var _=null!=m&&null!=p&&p!==m,E="+"===w||"*"===w,T="?"===w||"*"===w,S=n[2]||l,I=v||y;r.push({name:g||o++,prefix:m||"",delimiter:S,optional:T,repeat:E,partial:_,asterisk:!!b,pattern:I?u(I):b?".*":"[^"+c(S)+"]+?"})}}return s<e.length&&(a+=e.substr(s)),a&&r.push(a),r}function s(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var o="",a=t||{},c=(i||{}).pretty?s:encodeURIComponent,u=0;u<e.length;u++){var l=e[u];if("string"!==typeof l){var h,d=a[l.name];if(null==d){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=c(d[f]),!n[u].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===f?l.prefix:l.delimiter)+h}}else{if(h=l.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(d),!n[u].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+h+'"');o+=l.prefix+h}}else o+=l}return o}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,s="",a=0;a<e.length;a++){var u=e[a];if("string"===typeof u)s+=c(u);else{var d=c(u.prefix),f="(?:"+u.pattern+")";t.push(u),u.repeat&&(f+="(?:"+d+f+")*"),s+=f=u.optional?u.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=c(n.delimiter||"/"),m=s.slice(-p.length)===p;return i||(s=(m?s.slice(0,-p.length):s)+"(?:"+p+"(?=$))?"),s+=o?"$":i&&m?"":"(?="+p+"|$)",l(new RegExp("^"+s,h(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(o(e,n),t,n)}(e,t,n)}},888:(e,t,n)=>{"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:(e,t,n)=>{e.exports=n(888)()},9047:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:(e,t,n)=>{"use strict";var r=n(2791),i=n(1725),o=n(5296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));function a(e,t,n,r,i,o,s,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var c=!1,u=null,l=!1,h=null,d={onError:function(e){c=!0,u=e}};function f(e,t,n,r,i,o,s,l,h){c=!1,u=null,a.apply(d,arguments)}var p=null,m=null,g=null;function v(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,o,a,d,p){if(f.apply(this,arguments),c){if(!c)throw Error(s(198));var m=u;c=!1,u=null,l||(l=!0,h=m)}}(r,t,void 0,e),e.currentTarget=null}var y=null,w={};function b(){if(y)for(var e in w){var t=w[e],n=y.indexOf(e);if(!(-1<n))throw Error(s(96,e));if(!E[n]){if(!t.extractEvents)throw Error(s(97,e));for(var r in E[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,c=r;if(T.hasOwnProperty(c))throw Error(s(99,c));T[c]=o;var u=o.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&_(u[i],a,c);i=!0}else o.registrationName?(_(o.registrationName,a,c),i=!0):i=!1;if(!i)throw Error(s(98,r,e))}}}}function _(e,t,n){if(S[e])throw Error(s(100,e));S[e]=t,I[e]=t.eventTypes[n].dependencies}var E=[],T={},S={},I={};function k(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!w.hasOwnProperty(t)||w[t]!==r){if(w[t])throw Error(s(102,t));w[t]=r,n=!0}}n&&b()}var x=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,N=null,A=null;function O(e){if(e=m(e)){if("function"!==typeof C)throw Error(s(280));var t=e.stateNode;t&&(t=p(t),C(e.stateNode,e.type,t))}}function P(e){N?A?A.push(e):A=[e]:N=e}function D(){if(N){var e=N,t=A;if(A=N=null,O(e),t)for(e=0;e<t.length;e++)O(t[e])}}function R(e,t){return e(t)}function M(e,t,n,r,i){return e(t,n,r,i)}function L(){}var j=R,F=!1,U=!1;function V(){null===N&&null===A||(L(),D())}function B(e,t,n){if(U)return e(t,n);U=!0;try{return j(e,t,n)}finally{U=!1,V()}}var z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,W={},K={};function H(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){G[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];G[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){G[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){G[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){G[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){G[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){G[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){G[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){G[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function $(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,$);G[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,$);G[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,$);G[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){G[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),G.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){G[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var J=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Y(e,t,n,r){var i=G.hasOwnProperty(t)?G[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!q.call(K,e)||!q.call(W,e)&&(z.test(e)?K[e]=!0:(W[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}J.hasOwnProperty("ReactCurrentDispatcher")||(J.ReactCurrentDispatcher={current:null}),J.hasOwnProperty("ReactCurrentBatchConfig")||(J.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,oe=Z?Symbol.for("react.provider"):60109,se=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,ce=Z?Symbol.for("react.forward_ref"):60112,ue=Z?Symbol.for("react.suspense"):60113,le=Z?Symbol.for("react.suspense_list"):60120,he=Z?Symbol.for("react.memo"):60115,de=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ue:return"Suspense";case le:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case se:return"Context.Consumer";case oe:return"Context.Provider";case ce:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case fe:return ge(e.render);case de:if(e=1===e._status?e._result:null)return ge(e)}return null}function ve(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ge(e.type);n=null,r&&(n=ge(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(X,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ye(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=we(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function _e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=we(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ee(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Te(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ye(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Se(e,t){null!=(t=t.checked)&&Y(e,"checked",t,!1)}function Ie(e,t){Se(e,t);var n=ye(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?xe(e,t.type,n):t.hasOwnProperty("defaultValue")&&xe(e,t.type,ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ke(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function xe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ye(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ye(n)}}function Pe(e,t){var n=ye(t.value),r=ye(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function De(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Re="http://www.w3.org/1999/xhtml",Me="http://www.w3.org/2000/svg";function Le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function je(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Fe,Ue,Ve=(Ue=function(e,t){if(e.namespaceURI!==Me||"innerHTML"in e)e.innerHTML=t;else{for((Fe=Fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ue(e,t)}))}:Ue);function Be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function ze(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:ze("Animation","AnimationEnd"),animationiteration:ze("Animation","AnimationIteration"),animationstart:ze("Animation","AnimationStart"),transitionend:ze("Transition","TransitionEnd")},We={},Ke={};function He(e){if(We[e])return We[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ke)return We[e]=n[t];return e}x&&(Ke=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var Ge=He("animationend"),Qe=He("animationiteration"),$e=He("animationstart"),Je=He("transitionend"),Ye="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xe=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Xe.get(e);return void 0===t&&(t=new Map,Xe.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(s(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nt(i),e;if(o===r)return nt(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function ot(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var st=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)v(e,t[r],n[r]);else t&&v(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function ct(e){if(null!==e&&(st=it(st,e)),e=st,st=null,e){if(ot(e,at),st)throw Error(s(95));if(l)throw e=h,l=!1,h=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function lt(e){if(!x)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ht=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ht.length&&ht.push(e)}function ft(e,t,n,r){if(ht.length){var i=ht.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=On(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ut(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,s=e.eventSystemFlags;0===n&&(s|=64);for(var a=null,c=0;c<E.length;c++){var u=E[c];u&&(u=u.extractEvents(r,t,o,i,s))&&(a=it(a,u))}ct(a)}}function mt(e,t,n){if(!n.has(e)){switch(e){case"scroll":$t(t,"scroll",!0);break;case"focus":case"blur":$t(t,"focus",!0),$t(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":lt(e)&&$t(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ye.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var gt,vt,yt,wt=!1,bt=[],_t=null,Et=null,Tt=null,St=new Map,It=new Map,kt=[],xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Nt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function At(e,t){switch(e){case"focus":case"blur":_t=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":St.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Ot(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=Nt(t,n,r,i,o),null!==t&&(null!==(t=Pn(t))&&vt(t)),e):(e.eventSystemFlags|=r,e)}function Pt(e){var t=On(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){yt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Pn(t);return null!==n&&vt(n),e.blockedOn=t,!1}return!0}function Rt(e,t,n){Dt(e)&&n.delete(t)}function Mt(){for(wt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=Pn(e.blockedOn))&&gt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==_t&&Dt(_t)&&(_t=null),null!==Et&&Dt(Et)&&(Et=null),null!==Tt&&Dt(Tt)&&(Tt=null),St.forEach(Rt),It.forEach(Rt)}function Lt(e,t){e.blockedOn===t&&(e.blockedOn=null,wt||(wt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Mt)))}function jt(e){function t(t){return Lt(t,e)}if(0<bt.length){Lt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Lt(_t,e),null!==Et&&Lt(Et,e),null!==Tt&&Lt(Tt,e),St.forEach(t),It.forEach(t),n=0;n<kt.length;n++)(r=kt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)Pt(n),null===n.blockedOn&&kt.shift()}var Ft={},Ut=new Map,Vt=new Map,Bt=["abort","abort",Ge,"animationEnd",Qe,"animationIteration",$e,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Je,"transitionEnd","waiting","waiting"];function zt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},Vt.set(r,t),Ut.set(r,o),Ft[i]=o}}zt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),zt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),zt(Bt,2);for(var qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Wt=0;Wt<qt.length;Wt++)Vt.set(qt[Wt],0);var Kt=o.unstable_UserBlockingPriority,Ht=o.unstable_runWithPriority,Gt=!0;function Qt(e,t){$t(t,e,!1)}function $t(e,t,n){var r=Vt.get(t);switch(void 0===r?2:r){case 0:r=Jt.bind(null,t,1,e);break;case 1:r=Yt.bind(null,t,1,e);break;default:r=Xt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Jt(e,t,n,r){F||L();var i=Xt,o=F;F=!0;try{M(i,e,t,n,r)}finally{(F=o)||V()}}function Yt(e,t,n,r){Ht(Kt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){if(Gt)if(0<bt.length&&-1<xt.indexOf(e))e=Nt(null,e,t,n,r),bt.push(e);else{var i=Zt(e,t,n,r);if(null===i)At(e,r);else if(-1<xt.indexOf(e))e=Nt(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return _t=Ot(_t,e,t,n,r,i),!0;case"dragenter":return Et=Ot(Et,e,t,n,r,i),!0;case"mouseover":return Tt=Ot(Tt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return St.set(o,Ot(St.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,It.set(o,Ot(It.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){At(e,r),e=ft(e,r,null,t);try{B(pt,e)}finally{dt(e)}}}}function Zt(e,t,n,r){if(null!==(n=On(n=ut(r)))){var i=et(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=tt(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ft(e,r,n,t);try{B(pt,e)}finally{dt(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var on=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sn(e,t){if(t){if(on[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cn=Re;function un(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=I[t];for(var r=0;r<t.length;r++)mt(t[r],e,n)}function ln(){}function hn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=hn((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vn="$?",yn="$!",wn=null,bn=null;function _n(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function En(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Tn="function"===typeof setTimeout?setTimeout:void 0,Sn="function"===typeof clearTimeout?clearTimeout:void 0;function In(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function kn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||n===yn||n===vn){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var xn=Math.random().toString(36).slice(2),Cn="__reactInternalInstance$"+xn,Nn="__reactEventHandlers$"+xn,An="__reactContainere$"+xn;function On(e){var t=e[Cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[Cn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=kn(e);null!==e;){if(n=e[Cn])return n;e=kn(e)}return t}n=(e=n).parentNode}return null}function Pn(e){return!(e=e[Cn]||e[An])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Dn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Rn(e){return e[Nn]||null}function Mn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Ln(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}function jn(e,t,n){(t=Ln(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Fn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Mn(t);for(t=n.length;0<t--;)jn(n[t],"captured",e);for(t=0;t<n.length;t++)jn(n[t],"bubbled",e)}}function Un(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Ln(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Vn(e){e&&e.dispatchConfig.registrationName&&Un(e._targetInst,null,e)}function Bn(e){ot(e,Fn)}var zn=null,qn=null,Wn=null;function Kn(){if(Wn)return Wn;var e,t,n=qn,r=n.length,i="value"in zn?zn.value:zn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Wn=i.slice(e,1<t?1-t:void 0)}function Hn(){return!0}function Gn(){return!1}function Qn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Hn:Gn,this.isPropagationStopped=Gn,this}function $n(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Jn(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Yn(e){e.eventPool=[],e.getPooled=$n,e.release=Jn}i(Qn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Hn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Hn)},persist:function(){this.isPersistent=Hn},isPersistent:Gn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Gn,this._dispatchInstances=this._dispatchListeners=null}}),Qn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Qn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Yn(n),n},Yn(Qn);var Xn=Qn.extend({data:null}),Zn=Qn.extend({data:null}),er=[9,13,27,32],tr=x&&"CompositionEvent"in window,nr=null;x&&"documentMode"in document&&(nr=document.documentMode);var rr=x&&"TextEvent"in window&&!nr,ir=x&&(!tr||nr&&8<nr&&11>=nr),or=String.fromCharCode(32),sr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ar=!1;function cr(e,t){switch(e){case"keyup":return-1!==er.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var lr=!1;var hr={eventTypes:sr,extractEvents:function(e,t,n,r){var i;if(tr)e:{switch(e){case"compositionstart":var o=sr.compositionStart;break e;case"compositionend":o=sr.compositionEnd;break e;case"compositionupdate":o=sr.compositionUpdate;break e}o=void 0}else lr?cr(e,n)&&(o=sr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=sr.compositionStart);return o?(ir&&"ko"!==n.locale&&(lr||o!==sr.compositionStart?o===sr.compositionEnd&&lr&&(i=Kn()):(qn="value"in(zn=r)?zn.value:zn.textContent,lr=!0)),o=Xn.getPooled(o,t,n,r),i?o.data=i:null!==(i=ur(n))&&(o.data=i),Bn(o),i=o):i=null,(e=rr?function(e,t){switch(e){case"compositionend":return ur(t);case"keypress":return 32!==t.which?null:(ar=!0,or);case"textInput":return(e=t.data)===or&&ar?null:e;default:return null}}(e,n):function(e,t){if(lr)return"compositionend"===e||!tr&&cr(e,t)?(e=Kn(),Wn=qn=zn=null,lr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ir&&"ko"!==t.locale?null:t.data}}(e,n))?((t=Zn.getPooled(sr.beforeInput,t,n,r)).data=e,Bn(t)):t=null,null===i?t:null===t?i:[i,t]}},dr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!dr[e.type]:"textarea"===t}var pr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function mr(e,t,n){return(e=Qn.getPooled(pr.change,e,t,n)).type="change",P(n),Bn(e),e}var gr=null,vr=null;function yr(e){ct(e)}function wr(e){if(_e(Dn(e)))return e}function br(e,t){if("change"===e)return t}var _r=!1;function Er(){gr&&(gr.detachEvent("onpropertychange",Tr),vr=gr=null)}function Tr(e){if("value"===e.propertyName&&wr(vr))if(e=mr(vr,e,ut(e)),F)ct(e);else{F=!0;try{R(yr,e)}finally{F=!1,V()}}}function Sr(e,t,n){"focus"===e?(Er(),vr=n,(gr=t).attachEvent("onpropertychange",Tr)):"blur"===e&&Er()}function Ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return wr(vr)}function kr(e,t){if("click"===e)return wr(t)}function xr(e,t){if("input"===e||"change"===e)return wr(t)}x&&(_r=lt("input")&&(!document.documentMode||9<document.documentMode));var Cr={eventTypes:pr,_isInputEventSupported:_r,extractEvents:function(e,t,n,r){var i=t?Dn(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var s=br;else if(fr(i))if(_r)s=xr;else{s=Ir;var a=Sr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=kr);if(s&&(s=s(e,t)))return mr(s,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&xe(i,"number",i.value)}},Nr=Qn.extend({view:null,detail:null}),Ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Or(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ar[e])&&!!t[e]}function Pr(){return Or}var Dr=0,Rr=0,Mr=!1,Lr=!1,jr=Nr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Pr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Dr;return Dr=e.screenX,Mr?"mousemove"===e.type?e.screenX-t:0:(Mr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Rr;return Rr=e.screenY,Lr?"mousemove"===e.type?e.screenY-t:0:(Lr=!0,0)}}),Fr=jr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ur={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Vr={eventTypes:Ur,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!s&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,s)?(s=t,null!==(t=(t=n.relatedTarget||n.toElement)?On(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):s=null;if(s===t)return null;if("mouseout"===e||"mouseover"===e)var a=jr,c=Ur.mouseLeave,u=Ur.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=Fr,c=Ur.pointerLeave,u=Ur.pointerEnter,l="pointer");if(e=null==s?o:Dn(s),o=null==t?o:Dn(t),(c=a.getPooled(c,s,n,r)).type=l+"leave",c.target=e,c.relatedTarget=o,(n=a.getPooled(u,t,n,r)).type=l+"enter",n.target=o,n.relatedTarget=e,l=t,(r=s)&&l)e:{for(u=l,s=0,e=a=r;e;e=Mn(e))s++;for(e=0,t=u;t;t=Mn(t))e++;for(;0<s-e;)a=Mn(a),s--;for(;0<e-s;)u=Mn(u),e--;for(;s--;){if(a===u||a===u.alternate)break e;a=Mn(a),u=Mn(u)}a=null}else a=null;for(u=a,a=[];r&&r!==u&&(null===(s=r.alternate)||s!==u);)a.push(r),r=Mn(r);for(r=[];l&&l!==u&&(null===(s=l.alternate)||s!==u);)r.push(l),l=Mn(l);for(l=0;l<a.length;l++)Un(a[l],"bubbled",c);for(l=r.length;0<l--;)Un(r[l],"captured",n);return 0===(64&i)?[c]:[c,n]}};var Br="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},zr=Object.prototype.hasOwnProperty;function qr(e,t){if(Br(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!zr.call(t,n[r])||!Br(e[n[r]],t[n[r]]))return!1;return!0}var Wr=x&&"documentMode"in document&&11>=document.documentMode,Kr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Hr=null,Gr=null,Qr=null,$r=!1;function Jr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return $r||null==Hr||Hr!==hn(n)?null:("selectionStart"in(n=Hr)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Qr&&qr(Qr,n)?null:(Qr=n,(e=Qn.getPooled(Kr.select,Gr,e,t)).type="select",e.target=Hr,Bn(e),e))}var Yr={eventTypes:Kr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),o=I.onSelect;for(var s=0;s<o.length;s++)if(!i.has(o[s])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?Dn(t):window,e){case"focus":(fr(i)||"true"===i.contentEditable)&&(Hr=i,Gr=t,Qr=null);break;case"blur":Qr=Gr=Hr=null;break;case"mousedown":$r=!0;break;case"contextmenu":case"mouseup":case"dragend":return $r=!1,Jr(n,r);case"selectionchange":if(Wr)break;case"keydown":case"keyup":return Jr(n,r)}return null}},Xr=Qn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Zr=Qn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ei=Nr.extend({relatedTarget:null});function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ii=Nr.extend({key:function(e){if(e.key){var t=ni[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ri[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Pr,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),oi=jr.extend({dataTransfer:null}),si=Nr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Pr}),ai=Qn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ci=jr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ui={eventTypes:Ft,extractEvents:function(e,t,n,r){var i=Ut.get(e);if(!i)return null;switch(e){case"keypress":if(0===ti(n))return null;case"keydown":case"keyup":e=ii;break;case"blur":case"focus":e=ei;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=jr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=oi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=si;break;case Ge:case Qe:case $e:e=Xr;break;case Je:e=ai;break;case"scroll":e=Nr;break;case"wheel":e=ci;break;case"copy":case"cut":case"paste":e=Zr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Fr;break;default:e=Qn}return Bn(t=e.getPooled(i,t,n,r)),t}};if(y)throw Error(s(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=Rn,m=Pn,g=Dn,k({SimpleEventPlugin:ui,EnterLeaveEventPlugin:Vr,ChangeEventPlugin:Cr,SelectEventPlugin:Yr,BeforeInputEventPlugin:hr});var li=[],hi=-1;function di(e){0>hi||(e.current=li[hi],li[hi]=null,hi--)}function fi(e,t){hi++,li[hi]=e.current,e.current=t}var pi={},mi={current:pi},gi={current:!1},vi=pi;function yi(e,t){var n=e.type.contextTypes;if(!n)return pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function wi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function bi(){di(gi),di(mi)}function _i(e,t,n){if(mi.current!==pi)throw Error(s(168));fi(mi,t),fi(gi,n)}function Ei(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(s(108,ge(t)||"Unknown",o));return i({},n,{},r)}function Ti(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pi,vi=mi.current,fi(mi,e),fi(gi,gi.current),!0}function Si(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ei(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,di(gi),di(mi),fi(mi,e)):di(gi),fi(gi,n)}var Ii=o.unstable_runWithPriority,ki=o.unstable_scheduleCallback,xi=o.unstable_cancelCallback,Ci=o.unstable_requestPaint,Ni=o.unstable_now,Ai=o.unstable_getCurrentPriorityLevel,Oi=o.unstable_ImmediatePriority,Pi=o.unstable_UserBlockingPriority,Di=o.unstable_NormalPriority,Ri=o.unstable_LowPriority,Mi=o.unstable_IdlePriority,Li={},ji=o.unstable_shouldYield,Fi=void 0!==Ci?Ci:function(){},Ui=null,Vi=null,Bi=!1,zi=Ni(),qi=1e4>zi?Ni:function(){return Ni()-zi};function Wi(){switch(Ai()){case Oi:return 99;case Pi:return 98;case Di:return 97;case Ri:return 96;case Mi:return 95;default:throw Error(s(332))}}function Ki(e){switch(e){case 99:return Oi;case 98:return Pi;case 97:return Di;case 96:return Ri;case 95:return Mi;default:throw Error(s(332))}}function Hi(e,t){return e=Ki(e),Ii(e,t)}function Gi(e,t,n){return e=Ki(e),ki(e,t,n)}function Qi(e){return null===Ui?(Ui=[e],Vi=ki(Oi,Ji)):Ui.push(e),Li}function $i(){if(null!==Vi){var e=Vi;Vi=null,xi(e)}Ji()}function Ji(){if(!Bi&&null!==Ui){Bi=!0;var e=0;try{var t=Ui;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),ki(Oi,$i),n}finally{Bi=!1}}}function Yi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Xi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Zi={current:null},eo=null,to=null,no=null;function ro(){no=to=eo=null}function io(e){var t=Zi.current;di(Zi),e.type._context._currentValue=t}function oo(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function so(e,t){eo=e,no=to=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Rs=!0),e.firstContext=null)}function ao(e,t){if(no!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(no=e,t=1073741823),t={context:e,observedBits:t,next:null},null===to){if(null===eo)throw Error(s(308));to=t,eo.dependencies={expirationTime:0,firstContext:t,responders:null}}else to=to.next=t;return e._currentValue}var co=!1;function uo(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function ho(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function fo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function po(e,t){var n=e.alternate;null!==n&&lo(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function mo(e,t,n,r){var o=e.updateQueue;co=!1;var s=o.baseQueue,a=o.shared.pending;if(null!==a){if(null!==s){var c=s.next;s.next=a.next,a.next=c}s=a,o.shared.pending=null,null!==(c=e.alternate)&&(null!==(c=c.updateQueue)&&(c.baseQueue=a))}if(null!==s){c=s.next;var u=o.baseState,l=0,h=null,d=null,f=null;if(null!==c)for(var p=c;;){if((a=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=m,h=u):f=f.next=m,a>l&&(l=a)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),fc(a,p.suspenseConfig);e:{var g=e,v=p;switch(a=t,m=n,v.tag){case 1:if("function"===typeof(g=v.payload)){u=g.call(m,u,a);break e}u=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(a="function"===typeof(g=v.payload)?g.call(m,u,a):g)||void 0===a)break e;u=i({},u,a);break e;case 2:co=!0}}null!==p.callback&&(e.effectTag|=32,null===(a=o.effects)?o.effects=[p]:a.push(p))}if(null===(p=p.next)||p===c){if(null===(a=o.shared.pending))break;p=s.next=a.next,a.next=c,o.baseQueue=s=a,o.shared.pending=null}}null===f?h=u:f.next=d,o.baseState=h,o.baseQueue=f,pc(l),e.expirationTime=l,e.memoizedState=u}}function go(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var vo=J.ReactCurrentBatchConfig,yo=(new r.Component).refs;function wo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var bo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ec(),i=vo.suspense;(i=ho(r=tc(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),fo(e,i),nc(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ec(),i=vo.suspense;(i=ho(r=tc(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),fo(e,i),nc(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ec(),r=vo.suspense;(r=ho(n=tc(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),fo(e,r),nc(e,n)}};function _o(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!qr(n,r)||!qr(i,o))}function Eo(e,t,n){var r=!1,i=pi,o=t.contextType;return"object"===typeof o&&null!==o?o=ao(o):(i=wi(t)?vi:mi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):pi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=bo,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function To(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bo.enqueueReplaceState(t,t.state,null)}function So(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=yo,uo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ao(o):(o=wi(t)?vi:mi.current,i.context=yi(e,o)),mo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(wo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&bo.enqueueReplaceState(i,i.state,null),mo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var Io=Array.isArray;function ko(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===yo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function xo(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Co(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=ko(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=ko(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=ko(e,null,t),n.return=e,n;case te:return(t=Fc(t,e.mode,n)).return=e,t}if(Io(t)||me(t))return(t=Lc(t,e.mode,n,null)).return=e,t;xo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case te:return n.key===i?l(e,t,n,r):null}if(Io(n)||me(n))return null!==i?null:h(e,t,n,r,null);xo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case te:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Io(r)||me(r))return h(t,e=e.get(n)||null,r,i,null);xo(t,r)}return null}function m(i,s,a,c){for(var u=null,l=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===l?u=v:l.sibling=v,l=v,h=g}if(m===a.length)return n(i,h),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(s=o(h,s,m),null===l?u=h:l.sibling=h,l=h);return u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===l?u=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(i,e)})),u}function g(i,a,c,u){var l=me(c);if("function"!==typeof l)throw Error(s(150));if(null==(c=l.call(c)))throw Error(s(151));for(var h=l=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,u);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?l=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),l;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,u))&&(a=o(y,a,g),null===h?l=y:h.sibling=y,h=y);return l}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?l=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),l}return function(e,r,o,c){var u="object"===typeof o&&null!==o&&o.type===ne&&null===o.key;u&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case ee:e:{for(l=o.key,u=r;null!==u;){if(u.key===l){if(7===u.tag){if(o.type===ne){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}}else if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=ko(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===ne?((r=Lc(o.props.children,e.mode,c,o.key)).return=e,e=r):((c=Mc(o.type,o.key,o.props,null,e.mode,c)).ref=ko(e,r,o),c.return=e,e=c)}return a(e);case te:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Fc(o,e.mode,c)).return=e,e=r}return a(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=jc(o,e.mode,c)).return=e,e=r),a(e);if(Io(o))return m(e,r,o,c);if(me(o))return g(e,r,o,c);if(l&&xo(e,o),"undefined"===typeof o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return n(e,r)}}var No=Co(!0),Ao=Co(!1),Oo={},Po={current:Oo},Do={current:Oo},Ro={current:Oo};function Mo(e){if(e===Oo)throw Error(s(174));return e}function Lo(e,t){switch(fi(Ro,t),fi(Do,e),fi(Po,Oo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:je(null,"");break;default:t=je(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}di(Po),fi(Po,t)}function jo(){di(Po),di(Do),di(Ro)}function Fo(e){Mo(Ro.current);var t=Mo(Po.current),n=je(t,e.type);t!==n&&(fi(Do,e),fi(Po,n))}function Uo(e){Do.current===e&&(di(Po),di(Do))}var Vo={current:0};function Bo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===vn||n.data===yn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function zo(e,t){return{responder:e,props:t}}var qo=J.ReactCurrentDispatcher,Wo=J.ReactCurrentBatchConfig,Ko=0,Ho=null,Go=null,Qo=null,$o=!1;function Jo(){throw Error(s(321))}function Yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Br(e[n],t[n]))return!1;return!0}function Xo(e,t,n,r,i,o){if(Ko=o,Ho=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,qo.current=null===e||null===e.memoizedState?_s:Es,e=n(r,i),t.expirationTime===Ko){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(s(301));o+=1,Qo=Go=null,t.updateQueue=null,qo.current=Ts,e=n(r,i)}while(t.expirationTime===Ko)}if(qo.current=bs,t=null!==Go&&null!==Go.next,Ko=0,Qo=Go=Ho=null,$o=!1,t)throw Error(s(300));return e}function Zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qo?Ho.memoizedState=Qo=e:Qo=Qo.next=e,Qo}function es(){if(null===Go){var e=Ho.alternate;e=null!==e?e.memoizedState:null}else e=Go.next;var t=null===Qo?Ho.memoizedState:Qo.next;if(null!==t)Qo=t,Go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Go=e).memoizedState,baseState:Go.baseState,baseQueue:Go.baseQueue,queue:Go.queue,next:null},null===Qo?Ho.memoizedState=Qo=e:Qo=Qo.next=e}return Qo}function ts(e,t){return"function"===typeof t?t(e):t}function ns(e){var t=es(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var c=a=o=null,u=i;do{var l=u.expirationTime;if(l<Ko){var h={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(a=c=h,o=r):c=c.next=h,l>Ho.expirationTime&&(Ho.expirationTime=l,pc(l))}else null!==c&&(c=c.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),fc(l,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==i);null===c?o=r:c.next=a,Br(r,t.memoizedState)||(Rs=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function rs(e){var t=es(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Br(o,t.memoizedState)||(Rs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function is(e){var t=Zo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ts,lastRenderedState:e}).dispatch=ws.bind(null,Ho,e),[t.memoizedState,e]}function os(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ho.updateQueue)?(t={lastEffect:null},Ho.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ss(){return es().memoizedState}function as(e,t,n,r){var i=Zo();Ho.effectTag|=e,i.memoizedState=os(1|t,n,void 0,void 0===r?null:r)}function cs(e,t,n,r){var i=es();r=void 0===r?null:r;var o=void 0;if(null!==Go){var s=Go.memoizedState;if(o=s.destroy,null!==r&&Yo(r,s.deps))return void os(t,n,o,r)}Ho.effectTag|=e,i.memoizedState=os(1|t,n,o,r)}function us(e,t){return as(516,4,e,t)}function ls(e,t){return cs(516,4,e,t)}function hs(e,t){return cs(4,2,e,t)}function ds(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function fs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,cs(4,2,ds.bind(null,t,e),n)}function ps(){}function ms(e,t){return Zo().memoizedState=[e,void 0===t?null:t],e}function gs(e,t){var n=es();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vs(e,t){var n=es();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ys(e,t,n){var r=Wi();Hi(98>r?98:r,(function(){e(!0)})),Hi(97<r?97:r,(function(){var r=Wo.suspense;Wo.suspense=void 0===t?null:t;try{e(!1),n()}finally{Wo.suspense=r}}))}function ws(e,t,n){var r=ec(),i=vo.suspense;i={expirationTime:r=tc(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Ho||null!==o&&o===Ho)$o=!0,i.expirationTime=Ko,Ho.expirationTime=Ko;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.eagerReducer=o,i.eagerState=a,Br(a,s))return}catch(c){}nc(e,r)}}var bs={readContext:ao,useCallback:Jo,useContext:Jo,useEffect:Jo,useImperativeHandle:Jo,useLayoutEffect:Jo,useMemo:Jo,useReducer:Jo,useRef:Jo,useState:Jo,useDebugValue:Jo,useResponder:Jo,useDeferredValue:Jo,useTransition:Jo},_s={readContext:ao,useCallback:ms,useContext:ao,useEffect:us,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,as(4,2,ds.bind(null,t,e),n)},useLayoutEffect:function(e,t){return as(4,2,e,t)},useMemo:function(e,t){var n=Zo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Zo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ws.bind(null,Ho,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Zo().memoizedState=e},useState:is,useDebugValue:ps,useResponder:zo,useDeferredValue:function(e,t){var n=is(e),r=n[0],i=n[1];return us((function(){var n=Wo.suspense;Wo.suspense=void 0===t?null:t;try{i(e)}finally{Wo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=is(!1),n=t[0];return t=t[1],[ms(ys.bind(null,t,e),[t,e]),n]}},Es={readContext:ao,useCallback:gs,useContext:ao,useEffect:ls,useImperativeHandle:fs,useLayoutEffect:hs,useMemo:vs,useReducer:ns,useRef:ss,useState:function(){return ns(ts)},useDebugValue:ps,useResponder:zo,useDeferredValue:function(e,t){var n=ns(ts),r=n[0],i=n[1];return ls((function(){var n=Wo.suspense;Wo.suspense=void 0===t?null:t;try{i(e)}finally{Wo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ns(ts),n=t[0];return t=t[1],[gs(ys.bind(null,t,e),[t,e]),n]}},Ts={readContext:ao,useCallback:gs,useContext:ao,useEffect:ls,useImperativeHandle:fs,useLayoutEffect:hs,useMemo:vs,useReducer:rs,useRef:ss,useState:function(){return rs(ts)},useDebugValue:ps,useResponder:zo,useDeferredValue:function(e,t){var n=rs(ts),r=n[0],i=n[1];return ls((function(){var n=Wo.suspense;Wo.suspense=void 0===t?null:t;try{i(e)}finally{Wo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=rs(ts),n=t[0];return t=t[1],[gs(ys.bind(null,t,e),[t,e]),n]}},Ss=null,Is=null,ks=!1;function xs(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Cs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ns(e){if(ks){var t=Is;if(t){var n=t;if(!Cs(e,t)){if(!(t=In(n.nextSibling))||!Cs(e,t))return e.effectTag=-1025&e.effectTag|2,ks=!1,void(Ss=e);xs(Ss,n)}Ss=e,Is=In(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,ks=!1,Ss=e}}function As(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ss=e}function Os(e){if(e!==Ss)return!1;if(!ks)return As(e),ks=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!En(t,e.memoizedProps))for(t=Is;t;)xs(e,t),t=In(t.nextSibling);if(As(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Is=In(e.nextSibling);break e}t--}else"$"!==n&&n!==yn&&n!==vn||t++}e=e.nextSibling}Is=null}}else Is=Ss?In(e.stateNode.nextSibling):null;return!0}function Ps(){Is=Ss=null,ks=!1}var Ds=J.ReactCurrentOwner,Rs=!1;function Ms(e,t,n,r){t.child=null===e?Ao(t,null,n,r):No(t,e.child,n,r)}function Ls(e,t,n,r,i){n=n.render;var o=t.ref;return so(t,i),r=Xo(e,t,n,r,o,i),null===e||Rs?(t.effectTag|=1,Ms(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Xs(e,t,i))}function js(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Fs(e,t,s,r,i,o))}return s=e.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:qr)(i,r)&&e.ref===t.ref)?Xs(e,t,o):(t.effectTag|=1,(e=Rc(s,r)).ref=t.ref,e.return=t,t.child=e)}function Fs(e,t,n,r,i,o){return null!==e&&qr(e.memoizedProps,r)&&e.ref===t.ref&&(Rs=!1,i<o)?(t.expirationTime=e.expirationTime,Xs(e,t,o)):Vs(e,t,n,r,o)}function Us(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Vs(e,t,n,r,i){var o=wi(n)?vi:mi.current;return o=yi(t,o),so(t,i),n=Xo(e,t,n,r,o,i),null===e||Rs?(t.effectTag|=1,Ms(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Xs(e,t,i))}function Bs(e,t,n,r,i){if(wi(n)){var o=!0;Ti(t)}else o=!1;if(so(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Eo(t,n,r),So(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=ao(u):u=yi(t,u=wi(n)?vi:mi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||c!==u)&&To(t,s,r,u),co=!1;var d=t.memoizedState;s.state=d,mo(t,r,s,i),c=t.memoizedState,a!==r||d!==c||gi.current||co?("function"===typeof l&&(wo(t,n,l,r),c=t.memoizedState),(a=co||_o(t,n,a,r,d,c,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.effectTag|=4)):("function"===typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=u,r=a):("function"===typeof s.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.stateNode,lo(e,t),a=t.memoizedProps,s.props=t.type===t.elementType?a:Xi(t.type,a),c=s.context,"object"===typeof(u=n.contextType)&&null!==u?u=ao(u):u=yi(t,u=wi(n)?vi:mi.current),(h="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||c!==u)&&To(t,s,r,u),co=!1,c=t.memoizedState,s.state=c,mo(t,r,s,i),d=t.memoizedState,a!==r||c!==d||gi.current||co?("function"===typeof l&&(wo(t,n,l,r),d=t.memoizedState),(l=co||_o(t,n,a,r,c,d,u))?(h||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof s.componentDidUpdate&&(t.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),s.props=r,s.state=d,s.context=u,r=l):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),r=!1);return zs(e,t,n,r,o,i)}function zs(e,t,n,r,i,o){Us(e,t);var s=0!==(64&t.effectTag);if(!r&&!s)return i&&Si(t,n,!1),Xs(e,t,o);r=t.stateNode,Ds.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&s?(t.child=No(t,e.child,null,o),t.child=No(t,null,a,o)):Ms(e,t,a,o),t.memoizedState=r.state,i&&Si(t,n,!0),t.child}function qs(e){var t=e.stateNode;t.pendingContext?_i(0,t.pendingContext,t.pendingContext!==t.context):t.context&&_i(0,t.context,!1),Lo(e,t.containerInfo)}var Ws,Ks,Hs,Gs={dehydrated:null,retryTime:0};function Qs(e,t,n){var r,i=t.mode,o=t.pendingProps,s=Vo.current,a=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&s)&&(null===e||null!==e.memoizedState)),r?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),fi(Vo,1&s),null===e){if(void 0!==o.fallback&&Ns(t),a){if(a=o.fallback,(o=Lc(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Lc(a,i,n,null)).return=t,o.sibling=n,t.memoizedState=Gs,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Ao(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,a){if(o=o.fallback,(n=Rc(e,e.pendingProps)).return=t,0===(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=Rc(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Gs,t.child=n,i}return n=No(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=o.fallback,(o=Lc(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Lc(a,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Gs,t.child=o,n}return t.memoizedState=null,t.child=No(t,e,o.children,n)}function $s(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),oo(e.return,t)}function Js(e,t,n,r,i,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=i,s.lastEffect=o)}function Ys(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ms(e,t,r.children,n),0!==(2&(r=Vo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$s(e,n);else if(19===e.tag)$s(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Vo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Bo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Js(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Bo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Js(t,!0,n,null,o,t.lastEffect);break;case"together":Js(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Xs(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&pc(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Zs(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ea(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return wi(t.type)&&bi(),null;case 3:return jo(),di(gi),di(mi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Os(t)||(t.effectTag|=4),null;case 5:Uo(t),n=Mo(Ro.current);var o=t.type;if(null!==e&&null!=t.stateNode)Ks(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Mo(Po.current),Os(t)){r=t.stateNode,o=t.type;var a=t.memoizedProps;switch(r[Cn]=t,r[Nn]=a,o){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<Ye.length;e++)Qt(Ye[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":Te(r,a),Qt("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qt("invalid",r),un(n,"onChange");break;case"textarea":Oe(r,a),Qt("invalid",r),un(n,"onChange")}for(var c in sn(o,a),e=null,a)if(a.hasOwnProperty(c)){var u=a[c];"children"===c?"string"===typeof u?r.textContent!==u&&(e=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(e=["children",""+u]):S.hasOwnProperty(c)&&null!=u&&un(n,c)}switch(o){case"input":be(r),ke(r,a,!0);break;case"textarea":be(r),De(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=ln)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(c=9===n.nodeType?n:n.ownerDocument,e===cn&&(e=Le(o)),e===cn?"script"===o?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(o,{is:r.is}):(e=c.createElement(o),"select"===o&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,o),e[Cn]=t,e[Nn]=r,Ws(e,t),t.stateNode=e,c=an(o,r),o){case"iframe":case"object":case"embed":Qt("load",e),u=r;break;case"video":case"audio":for(u=0;u<Ye.length;u++)Qt(Ye[u],e);u=r;break;case"source":Qt("error",e),u=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),u=r;break;case"form":Qt("reset",e),Qt("submit",e),u=r;break;case"details":Qt("toggle",e),u=r;break;case"input":Te(e,r),u=Ee(e,r),Qt("invalid",e),un(n,"onChange");break;case"option":u=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},u=i({},r,{value:void 0}),Qt("invalid",e),un(n,"onChange");break;case"textarea":Oe(e,r),u=Ae(e,r),Qt("invalid",e),un(n,"onChange");break;default:u=r}sn(o,u);var l=u;for(a in l)if(l.hasOwnProperty(a)){var h=l[a];"style"===a?rn(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&Ve(e,h):"children"===a?"string"===typeof h?("textarea"!==o||""!==h)&&Be(e,h):"number"===typeof h&&Be(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(S.hasOwnProperty(a)?null!=h&&un(n,a):null!=h&&Y(e,a,h,c))}switch(o){case"input":be(e),ke(e,r,!1);break;case"textarea":be(e),De(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ye(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ne(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof u.onClick&&(e.onclick=ln)}_n(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Hs(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));n=Mo(Ro.current),Mo(Po.current),Os(t)?(n=t.stateNode,r=t.memoizedProps,n[Cn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Cn]=t,t.stateNode=n)}return null;case 13:return di(Vo),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Os(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=o,o.nextEffect=a):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Vo.current)?Ma===Ca&&(Ma=Na):(Ma!==Ca&&Ma!==Na||(Ma=Aa),0!==Va&&null!==Pa&&(Bc(Pa,Ra),zc(Pa,Va)))),(n||r)&&(t.effectTag|=4),null);case 4:return jo(),null;case 10:return io(t),null;case 19:if(di(Vo),null===(r=t.memoizedState))return null;if(o=0!==(64&t.effectTag),null===(a=r.rendering)){if(o)Zs(r,!1);else if(Ma!==Ca||null!==e&&0!==(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=Bo(a))){for(t.effectTag|=64,Zs(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)a=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,a=e.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return fi(Vo,1&Vo.current|2),t.child}a=a.sibling}}else{if(!o)if(null!==(e=Bo(a))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Zs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*qi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,Zs(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=qi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=qi(),n.sibling=null,t=Vo.current,fi(Vo,o?1&t|2:1&t),n):null}throw Error(s(156,t.tag))}function ta(e){switch(e.tag){case 1:wi(e.type)&&bi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(jo(),di(gi),di(mi),0!==(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return Uo(e),null;case 13:return di(Vo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return di(Vo),null;case 4:return jo(),null;case 10:return io(e),null;default:return null}}function na(e,t){return{value:e,source:t,stack:ve(t)}}Ws=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ks=function(e,t,n,r,o){var s=e.memoizedProps;if(s!==r){var a,c,u=t.stateNode;switch(Mo(Po.current),e=null,n){case"input":s=Ee(u,s),r=Ee(u,r),e=[];break;case"option":s=Ce(u,s),r=Ce(u,r),e=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":s=Ae(u,s),r=Ae(u,r),e=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(u.onclick=ln)}for(a in sn(n,r),n=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(c in u=s[a])u.hasOwnProperty(c)&&(n||(n={}),n[c]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(S.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var l=r[a];if(u=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&l!==u&&(null!=l||null!=u))if("style"===a)if(u){for(c in u)!u.hasOwnProperty(c)||l&&l.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in l)l.hasOwnProperty(c)&&u[c]!==l[c]&&(n||(n={}),n[c]=l[c])}else n||(e||(e=[]),e.push(a,n)),n=l;else"dangerouslySetInnerHTML"===a?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(e=e||[]).push(a,l)):"children"===a?u===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(a,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(S.hasOwnProperty(a)?(null!=l&&un(o,a),e||u===l||(e=[])):(e=e||[]).push(a,l))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Hs=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var ra="function"===typeof WeakSet?WeakSet:Set;function ia(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ve(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function oa(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){kc(e,n)}else t.current=null}function sa(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(s(163))}function aa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ca(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ua(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ca(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&go(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}go(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&_n(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&jt(n)))))}throw Error(s(163))}function la(e,t,n){switch("function"===typeof Ac&&Ac(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Hi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){kc(i,o)}}e=e.next}while(e!==r)}))}break;case 1:oa(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){kc(e,n)}}(t,n);break;case 5:oa(t);break;case 4:ga(e,t,n)}}function ha(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ha(t)}function da(e){return 5===e.tag||3===e.tag||4===e.tag}function fa(e){e:{for(var t=e.return;null!==t;){if(da(t)){var n=t;break e}t=t.return}throw Error(s(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(Be(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||da(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?pa(e,n,t):ma(e,n,t)}function pa(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ln));else if(4!==r&&null!==(e=e.child))for(pa(e,t,n),e=e.sibling;null!==e;)pa(e,t,n),e=e.sibling}function ma(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ma(e,t,n),e=e.sibling;null!==e;)ma(e,t,n),e=e.sibling}function ga(e,t,n){for(var r,i,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var c=e,u=o,l=n,h=u;;)if(la(c,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===u)break e;for(;null===h.sibling;){if(null===h.return||h.return===u)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(c=r,u=o.stateNode,8===c.nodeType?c.parentNode.removeChild(u):c.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(la(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function va(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void aa(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Nn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Se(n,r),an(e,i),t=an(e,r),i=0;i<o.length;i+=2){var a=o[i],c=o[i+1];"style"===a?rn(n,c):"dangerouslySetInnerHTML"===a?Ve(n,c):"children"===a?Be(n,c):Y(n,a,c,t)}switch(e){case"input":Ie(n,r);break;case"textarea":Pe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ne(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ne(n,!!r.multiple,r.defaultValue,!0):Ne(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,jt(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,za=qi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ya(t);case 19:return void ya(t)}throw Error(s(163))}function ya(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ra),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var wa="function"===typeof WeakMap?WeakMap:Map;function ba(e,t,n){(n=ho(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wa||(Wa=!0,Ka=r),ia(e,t)},n}function _a(e,t,n){(n=ho(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ia(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ha?Ha=new Set([this]):Ha.add(this),ia(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Ea,Ta=Math.ceil,Sa=J.ReactCurrentDispatcher,Ia=J.ReactCurrentOwner,ka=16,xa=32,Ca=0,Na=3,Aa=4,Oa=0,Pa=null,Da=null,Ra=0,Ma=Ca,La=null,ja=1073741823,Fa=1073741823,Ua=null,Va=0,Ba=!1,za=0,qa=null,Wa=!1,Ka=null,Ha=null,Ga=!1,Qa=null,$a=90,Ja=null,Ya=0,Xa=null,Za=0;function ec(){return 0!==(48&Oa)?1073741821-(qi()/10|0):0!==Za?Za:Za=1073741821-(qi()/10|0)}function tc(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Wi();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(Oa&ka))return Ra;if(null!==n)e=Yi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Yi(e,150,100);break;case 97:case 96:e=Yi(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==Pa&&e===Ra&&--e,e}function nc(e,t){if(50<Ya)throw Ya=0,Xa=null,Error(s(185));if(null!==(e=rc(e,t))){var n=Wi();1073741823===t?0!==(8&Oa)&&0===(48&Oa)?ac(e):(oc(e),0===Oa&&$i()):oc(e),0===(4&Oa)||98!==n&&99!==n||(null===Ja?Ja=new Map([[e,t]]):(void 0===(n=Ja.get(e))||n>t)&&Ja.set(e,t))}}function rc(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Pa===i&&(pc(t),Ma===Aa&&Bc(i,Ra)),zc(i,t)),i}function ic(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Vc(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function oc(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Qi(ac.bind(null,e));else{var t=ic(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=ec();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Li&&xi(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Qi(ac.bind(null,e)):Gi(r,sc.bind(null,e),{timeout:10*(1073741821-t)-qi()}),e.callbackNode=t}}}function sc(e,t){if(Za=0,t)return qc(e,t=ec()),oc(e),null;var n=ic(e);if(0!==n){if(t=e.callbackNode,0!==(48&Oa))throw Error(s(327));if(Tc(),e===Pa&&n===Ra||lc(e,n),null!==Da){var r=Oa;Oa|=ka;for(var i=dc();;)try{gc();break}catch(c){hc(e,c)}if(ro(),Oa=r,Sa.current=i,1===Ma)throw t=La,lc(e,n),Bc(e,n),oc(e),t;if(null===Da)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ma,Pa=null,r){case Ca:case 1:throw Error(s(345));case 2:qc(e,2<n?2:n);break;case Na:if(Bc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=wc(i)),1073741823===ja&&10<(i=za+500-qi())){if(Ba){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,lc(e,n);break}}if(0!==(o=ic(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=Tn(bc.bind(null,e),i);break}bc(e);break;case Aa:if(Bc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=wc(i)),Ba&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,lc(e,n);break}if(0!==(i=ic(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Fa?r=10*(1073741821-Fa)-qi():1073741823===ja?r=0:(r=10*(1073741821-ja)-5e3,0>(r=(i=qi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ta(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=Tn(bc.bind(null,e),r);break}bc(e);break;case 5:if(1073741823!==ja&&null!==Ua){o=ja;var a=Ua;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=qi()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Bc(e,n),e.timeoutHandle=Tn(bc.bind(null,e),r);break}}bc(e);break;default:throw Error(s(329))}if(oc(e),e.callbackNode===t)return sc.bind(null,e)}}return null}function ac(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&Oa))throw Error(s(327));if(Tc(),e===Pa&&t===Ra||lc(e,t),null!==Da){var n=Oa;Oa|=ka;for(var r=dc();;)try{mc();break}catch(i){hc(e,i)}if(ro(),Oa=n,Sa.current=r,1===Ma)throw n=La,lc(e,t),Bc(e,t),oc(e),n;if(null!==Da)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Pa=null,bc(e),oc(e)}return null}function cc(e,t){var n=Oa;Oa|=1;try{return e(t)}finally{0===(Oa=n)&&$i()}}function uc(e,t){var n=Oa;Oa&=-2,Oa|=8;try{return e(t)}finally{0===(Oa=n)&&$i()}}function lc(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Sn(n)),null!==Da)for(n=Da.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&bi();break;case 3:jo(),di(gi),di(mi);break;case 5:Uo(r);break;case 4:jo();break;case 13:case 19:di(Vo);break;case 10:io(r)}n=n.return}Pa=e,Da=Rc(e.current,null),Ra=t,Ma=Ca,La=null,Fa=ja=1073741823,Ua=null,Va=0,Ba=!1}function hc(e,t){for(;;){try{if(ro(),qo.current=bs,$o)for(var n=Ho.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ko=0,Qo=Go=Ho=null,$o=!1,null===Da||null===Da.return)return Ma=1,La=t,Da=null;e:{var i=e,o=Da.return,s=Da,a=t;if(t=Ra,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var c=a;if(0===(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.expirationTime=u.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var l=0!==(1&Vo.current),h=o;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var p=h.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!l)}}if(d){var m=h.updateQueue;if(null===m){var g=new Set;g.add(c),h.updateQueue=g}else m.add(c);if(0===(2&h.mode)){if(h.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=ho(1073741823,null);v.tag=2,fo(s,v)}s.expirationTime=1073741823;break e}a=void 0,s=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new wa,a=new Set,y.set(c,a)):void 0===(a=y.get(c))&&(a=new Set,y.set(c,a)),!a.has(s)){a.add(s);var w=xc.bind(null,i,c,s);c.then(w,w)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);a=Error((ge(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ve(s))}5!==Ma&&(Ma=2),a=na(a,s),h=o;do{switch(h.tag){case 3:c=a,h.effectTag|=4096,h.expirationTime=t,po(h,ba(h,c,t));break e;case 1:c=a;var b=h.type,_=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Ha||!Ha.has(_)))){h.effectTag|=4096,h.expirationTime=t,po(h,_a(h,c,t));break e}}h=h.return}while(null!==h)}Da=yc(Da)}catch(E){t=E;continue}break}}function dc(){var e=Sa.current;return Sa.current=bs,null===e?bs:e}function fc(e,t){e<ja&&2<e&&(ja=e),null!==t&&e<Fa&&2<e&&(Fa=e,Ua=t)}function pc(e){e>Va&&(Va=e)}function mc(){for(;null!==Da;)Da=vc(Da)}function gc(){for(;null!==Da&&!ji();)Da=vc(Da)}function vc(e){var t=Ea(e.alternate,e,Ra);return e.memoizedProps=e.pendingProps,null===t&&(t=yc(e)),Ia.current=null,t}function yc(e){Da=e;do{var t=Da.alternate;if(e=Da.return,0===(2048&Da.effectTag)){if(t=ea(t,Da,Ra),1===Ra||1!==Da.childExpirationTime){for(var n=0,r=Da.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Da.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Da.firstEffect),null!==Da.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Da.firstEffect),e.lastEffect=Da.lastEffect),1<Da.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Da:e.firstEffect=Da,e.lastEffect=Da))}else{if(null!==(t=ta(Da)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Da.sibling))return t;Da=e}while(null!==Da);return Ma===Ca&&(Ma=5),null}function wc(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function bc(e){var t=Wi();return Hi(99,_c.bind(null,e,t)),null}function _c(e,t){do{Tc()}while(null!==Qa);if(0!==(48&Oa))throw Error(s(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=wc(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Pa&&(Da=Pa=null,Ra=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Oa;Oa|=xa,Ia.current=null,wn=Gt;var a=mn();if(gn(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{var u=(c=(c=a.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(u&&0!==u.rangeCount){c=u.anchorNode;var l=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{c.nodeType,h.nodeType}catch(k){c=null;break e}var d=0,f=-1,p=-1,m=0,g=0,v=a,y=null;t:for(;;){for(var w;v!==c||0!==l&&3!==v.nodeType||(f=d+l),v!==h||0!==u&&3!==v.nodeType||(p=d+u),3===v.nodeType&&(d+=v.nodeValue.length),null!==(w=v.firstChild);)y=v,v=w;for(;;){if(v===a)break t;if(y===c&&++m===l&&(f=d),y===h&&++g===u&&(p=d),null!==(w=v.nextSibling))break;y=(v=y).parentNode}v=w}c=-1===f||-1===p?null:{start:f,end:p}}else c=null}c=c||{start:0,end:0}}else c=null;bn={activeElementDetached:null,focusedElem:a,selectionRange:c},Gt=!1,qa=i;do{try{Ec()}catch(k){if(null===qa)throw Error(s(330));kc(qa,k),qa=qa.nextEffect}}while(null!==qa);qa=i;do{try{for(a=e,c=t;null!==qa;){var b=qa.effectTag;if(16&b&&Be(qa.stateNode,""),128&b){var _=qa.alternate;if(null!==_){var E=_.ref;null!==E&&("function"===typeof E?E(null):E.current=null)}}switch(1038&b){case 2:fa(qa),qa.effectTag&=-3;break;case 6:fa(qa),qa.effectTag&=-3,va(qa.alternate,qa);break;case 1024:qa.effectTag&=-1025;break;case 1028:qa.effectTag&=-1025,va(qa.alternate,qa);break;case 4:va(qa.alternate,qa);break;case 8:ga(a,l=qa,c),ha(l)}qa=qa.nextEffect}}catch(k){if(null===qa)throw Error(s(330));kc(qa,k),qa=qa.nextEffect}}while(null!==qa);if(E=bn,_=mn(),b=E.focusedElem,c=E.selectionRange,_!==b&&b&&b.ownerDocument&&pn(b.ownerDocument.documentElement,b)){null!==c&&gn(b)&&(_=c.start,void 0===(E=c.end)&&(E=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(E,b.value.length)):(E=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(E=E.getSelection(),l=b.textContent.length,a=Math.min(c.start,l),c=void 0===c.end?a:Math.min(c.end,l),!E.extend&&a>c&&(l=c,c=a,a=l),l=fn(b,a),h=fn(b,c),l&&h&&(1!==E.rangeCount||E.anchorNode!==l.node||E.anchorOffset!==l.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((_=_.createRange()).setStart(l.node,l.offset),E.removeAllRanges(),a>c?(E.addRange(_),E.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),E.addRange(_))))),_=[];for(E=b;E=E.parentNode;)1===E.nodeType&&_.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(E=_[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Gt=!!wn,bn=wn=null,e.current=n,qa=i;do{try{for(b=e;null!==qa;){var T=qa.effectTag;if(36&T&&ua(b,qa.alternate,qa),128&T){_=void 0;var S=qa.ref;if(null!==S){var I=qa.stateNode;qa.tag,_=I,"function"===typeof S?S(_):S.current=_}}qa=qa.nextEffect}}catch(k){if(null===qa)throw Error(s(330));kc(qa,k),qa=qa.nextEffect}}while(null!==qa);qa=null,Fi(),Oa=o}else e.current=n;if(Ga)Ga=!1,Qa=e,$a=t;else for(qa=i;null!==qa;)t=qa.nextEffect,qa.nextEffect=null,qa=t;if(0===(t=e.firstPendingTime)&&(Ha=null),1073741823===t?e===Xa?Ya++:(Ya=0,Xa=e):Ya=0,"function"===typeof Nc&&Nc(n.stateNode,r),oc(e),Wa)throw Wa=!1,e=Ka,Ka=null,e;return 0!==(8&Oa)||$i(),null}function Ec(){for(;null!==qa;){var e=qa.effectTag;0!==(256&e)&&sa(qa.alternate,qa),0===(512&e)||Ga||(Ga=!0,Gi(97,(function(){return Tc(),null}))),qa=qa.nextEffect}}function Tc(){if(90!==$a){var e=97<$a?97:$a;return $a=90,Hi(e,Sc)}}function Sc(){if(null===Qa)return!1;var e=Qa;if(Qa=null,0!==(48&Oa))throw Error(s(331));var t=Oa;for(Oa|=xa,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:aa(5,n),ca(5,n)}}catch(r){if(null===e)throw Error(s(330));kc(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Oa=t,$i(),!0}function Ic(e,t,n){fo(e,t=ba(e,t=na(n,t),1073741823)),null!==(e=rc(e,1073741823))&&oc(e)}function kc(e,t){if(3===e.tag)Ic(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ic(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ha||!Ha.has(r))){fo(n,e=_a(n,e=na(t,e),1073741823)),null!==(n=rc(n,1073741823))&&oc(n);break}}n=n.return}}function xc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Pa===e&&Ra===n?Ma===Aa||Ma===Na&&1073741823===ja&&qi()-za<500?lc(e,Ra):Ba=!0:Vc(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,oc(e)))}function Cc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=tc(t=ec(),e,null)),null!==(e=rc(e,t))&&oc(e)}Ea=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||gi.current)Rs=!0;else{if(r<n){switch(Rs=!1,t.tag){case 3:qs(t),Ps();break;case 5:if(Fo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:wi(t.type)&&Ti(t);break;case 4:Lo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,fi(Zi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Qs(e,t,n):(fi(Vo,1&Vo.current),null!==(t=Xs(e,t,n))?t.sibling:null);fi(Vo,1&Vo.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return Ys(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),fi(Vo,Vo.current),!r)return null}return Xs(e,t,n)}Rs=!1}}else Rs=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=yi(t,mi.current),so(t,n),i=Xo(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,wi(r)){var o=!0;Ti(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,uo(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&wo(t,r,a,e),i.updater=bo,t.stateNode=i,i._reactInternalFiber=t,So(t,r,e,n),t=zs(null,t,r,!0,o,n)}else t.tag=0,Ms(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===ce)return 11;if(e===he)return 14}return 2}(i),e=Xi(i,e),o){case 0:t=Vs(null,t,i,e,n);break e;case 1:t=Bs(null,t,i,e,n);break e;case 11:t=Ls(null,t,i,e,n);break e;case 14:t=js(null,t,i,Xi(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Vs(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Bs(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(qs(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,lo(e,t),mo(t,r,null,n),(r=t.memoizedState.element)===i)Ps(),t=Xs(e,t,n);else{if((i=t.stateNode.hydrate)&&(Is=In(t.stateNode.containerInfo.firstChild),Ss=t,i=ks=!0),i)for(n=Ao(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ms(e,t,r,n),Ps();t=t.child}return t;case 5:return Fo(t),null===e&&Ns(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,En(r,i)?a=null:null!==o&&En(r,o)&&(t.effectTag|=16),Us(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ms(e,t,a,n),t=t.child),t;case 6:return null===e&&Ns(t),null;case 13:return Qs(e,t,n);case 4:return Lo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=No(t,null,r,n):Ms(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ls(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Ms(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ms(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var c=t.type._context;if(fi(Zi,c._currentValue),c._currentValue=o,null!==a)if(c=a.value,0===(o=Br(c,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,o):1073741823))){if(a.children===i.children&&!gi.current){t=Xs(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){a=c.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===c.tag&&((l=ho(n,null)).tag=2,fo(c,l)),c.expirationTime<n&&(c.expirationTime=n),null!==(l=c.alternate)&&l.expirationTime<n&&(l.expirationTime=n),oo(c.return,n),u.expirationTime<n&&(u.expirationTime=n);break}l=l.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}Ms(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,so(t,n),r=r(i=ao(i,o.unstable_observedBits)),t.effectTag|=1,Ms(e,t,r,n),t.child;case 14:return o=Xi(i=t.type,t.pendingProps),js(e,t,i,o=Xi(i.type,o),r,n);case 15:return Fs(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,wi(r)?(e=!0,Ti(t)):e=!1,so(t,n),Eo(t,r,i),So(t,r,i,n),zs(null,t,r,!0,e,n);case 19:return Ys(e,t,n)}throw Error(s(156,t.tag))};var Nc=null,Ac=null;function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Pc(e,t,n,r){return new Oc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case ne:return Lc(n.children,i,o,t);case ae:a=8,i|=7;break;case re:a=8,i|=1;break;case ie:return(e=Pc(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case ue:return(e=Pc(13,n,t,i)).type=ue,e.elementType=ue,e.expirationTime=o,e;case le:return(e=Pc(19,n,t,i)).elementType=le,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case oe:a=10;break e;case se:a=9;break e;case ce:a=11;break e;case he:a=14;break e;case de:a=16,r=null;break e;case fe:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).expirationTime=n,e}function jc(e,t,n){return(e=Pc(6,e,null,t)).expirationTime=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Vc(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Bc(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function zc(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function qc(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Wc(e,t,n,r){var i=t.current,o=ec(),a=vo.suspense;o=tc(o,i,a);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(wi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(s(171))}if(1===n.tag){var u=n.type;if(wi(u)){n=Ei(n,u,c);break e}}n=c}else n=pi;return null===t.context?t.context=n:t.pendingContext=n,(t=ho(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fo(i,t),nc(i,o),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}function Qc(e,t,n){var r=new Uc(e,t,n=null!=n&&!0===n.hydrate),i=Pc(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,uo(i),e[An]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);xt.forEach((function(e){mt(e,t,n)})),Ct.forEach((function(e){mt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=Kc(s);a.call(e)}}Wc(t,s,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Qc(e,0,t?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"===typeof i){var c=i;i=function(){var e=Kc(s);c.call(e)}}uc((function(){Wc(t,s,e,i)}))}return Kc(s)}function Yc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Xc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return Yc(e,t,null,n)}Qc.prototype.render=function(e){Wc(e,this._internalRoot,null,null)},Qc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Wc(null,e,null,(function(){t[An]=null}))},gt=function(e){if(13===e.tag){var t=Yi(ec(),150,100);nc(e,t),Gc(e,t)}},vt=function(e){13===e.tag&&(nc(e,3),Gc(e,3))},yt=function(e){if(13===e.tag){var t=ec();nc(e,t=tc(t,e,null)),Gc(e,t)}},C=function(e,t,n){switch(t){case"input":if(Ie(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Rn(r);if(!i)throw Error(s(90));_e(r),Ie(r,i)}}}break;case"textarea":Pe(e,n);break;case"select":null!=(t=n.value)&&Ne(e,!!n.multiple,t,!1)}},R=cc,M=function(e,t,n,r,i){var o=Oa;Oa|=4;try{return Hi(98,e.bind(null,t,n,r,i))}finally{0===(Oa=o)&&$i()}},L=function(){0===(49&Oa)&&(function(){if(null!==Ja){var e=Ja;Ja=null,e.forEach((function(e,t){qc(t,e),oc(t)})),$i()}}(),Tc())},j=function(e,t){var n=Oa;Oa|=2;try{return e(t)}finally{0===(Oa=n)&&$i()}};var Zc={Events:[Pn,Dn,Rn,k,T,Bn,function(e){ot(e,Vn)},P,D,Xt,ct,Tc,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Nc=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Ac=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:On,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=Xc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&Oa))throw Error(s(187));var n=Oa;Oa|=1;try{return Hi(99,e.bind(null,t))}finally{Oa=n,$i()}},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return Jc(null,e,t,!0,n)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[An]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_createPortal=function(e,t){return Xc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return Jc(e,t,n,!1,r)},t.version="16.14.0"},4164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},3219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(8102),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default,e.exports=t.default},5921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={activeTrack:"input-range__track input-range__track--active",disabledInputRange:"input-range input-range--disabled",inputRange:"input-range",labelContainer:"input-range__label-container",maxLabel:"input-range__label input-range__label--max",minLabel:"input-range__label input-range__label--min",slider:"input-range__slider",sliderContainer:"input-range__slider-container",track:"input-range__track input-range__track--background",valueLabel:"input-range__label input-range__label--value"},e.exports=t.default},8102:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=v(n(2791)),s=v(n(2007)),a=v(n(4922)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1993)),u=v(n(5921)),l=v(n(638)),h=v(n(7680)),d=v(n(9070)),f=v(n(8994)),p=v(n(8090)),m=n(6682),g=n(805);function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var w=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.startValue=null,n.node=null,n.trackNode=null,n.isSliderDragging=!1,n.lastKeyMoved=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",get:function(){return{allowSameValues:s.default.bool,ariaLabelledby:s.default.string,ariaControls:s.default.string,classNames:s.default.objectOf(s.default.string),disabled:s.default.bool,draggableTrack:s.default.bool,formatLabel:s.default.func,maxValue:h.default,minValue:h.default,name:s.default.string,onChangeStart:s.default.func,onChange:s.default.func.isRequired,onChangeComplete:s.default.func,step:s.default.number,value:d.default}}},{key:"defaultProps",get:function(){return{allowSameValues:!1,classNames:u.default,disabled:!1,maxValue:10,minValue:0,step:1}}}]),i(t,[{key:"componentWillUnmount",value:function(){this.removeDocumentMouseUpListener(),this.removeDocumentTouchEndListener()}},{key:"getComponentClassName",value:function(){return this.props.disabled?this.props.classNames.disabledInputRange:this.props.classNames.inputRange}},{key:"getTrackClientRect",value:function(){return this.trackNode.getClientRect()}},{key:"getKeyByPosition",value:function(e){var t=c.getValueFromProps(this.props,this.isMultiValue()),n=c.getPositionsFromValues(t,this.props.minValue,this.props.maxValue,this.getTrackClientRect());if(this.isMultiValue()&&(0,m.distanceTo)(e,n.min)<(0,m.distanceTo)(e,n.max))return"min";return"max"}},{key:"getKeys",value:function(){return this.isMultiValue()?["min","max"]:["max"]}},{key:"hasStepDifference",value:function(e){var t=c.getValueFromProps(this.props,this.isMultiValue());return(0,m.length)(e.min,t.min)>=this.props.step||(0,m.length)(e.max,t.max)>=this.props.step}},{key:"isMultiValue",value:function(){return(0,m.isObject)(this.props.value)}},{key:"isWithinRange",value:function(e){return this.isMultiValue()?e.min>=this.props.minValue&&e.max<=this.props.maxValue&&this.props.allowSameValues?e.min<=e.max:e.min<e.max:e.max>=this.props.minValue&&e.max<=this.props.maxValue}},{key:"shouldUpdate",value:function(e){return this.isWithinRange(e)&&this.hasStepDifference(e)}},{key:"updatePosition",value:function(e,t){var n=c.getValueFromProps(this.props,this.isMultiValue()),r=c.getPositionsFromValues(n,this.props.minValue,this.props.maxValue,this.getTrackClientRect());r[e]=t,this.lastKeyMoved=e,this.updatePositions(r)}},{key:"updatePositions",value:function(e){var t={min:c.getValueFromPosition(e.min,this.props.minValue,this.props.maxValue,this.getTrackClientRect()),max:c.getValueFromPosition(e.max,this.props.minValue,this.props.maxValue,this.getTrackClientRect())},n={min:c.getStepValueFromValue(t.min,this.props.step),max:c.getStepValueFromValue(t.max,this.props.step)};this.updateValues(n)}},{key:"updateValue",value:function(e,t){var n=c.getValueFromProps(this.props,this.isMultiValue());n[e]=t,this.updateValues(n)}},{key:"updateValues",value:function(e){this.shouldUpdate(e)&&this.props.onChange(this.isMultiValue()?e:e.max)}},{key:"incrementValue",value:function(e){var t=c.getValueFromProps(this.props,this.isMultiValue())[e]+this.props.step;this.updateValue(e,t)}},{key:"decrementValue",value:function(e){var t=c.getValueFromProps(this.props,this.isMultiValue())[e]-this.props.step;this.updateValue(e,t)}},{key:"addDocumentMouseUpListener",value:function(){this.removeDocumentMouseUpListener(),this.node.ownerDocument.addEventListener("mouseup",this.handleMouseUp)}},{key:"addDocumentTouchEndListener",value:function(){this.removeDocumentTouchEndListener(),this.node.ownerDocument.addEventListener("touchend",this.handleTouchEnd)}},{key:"removeDocumentMouseUpListener",value:function(){this.node.ownerDocument.removeEventListener("mouseup",this.handleMouseUp)}},{key:"removeDocumentTouchEndListener",value:function(){this.node.ownerDocument.removeEventListener("touchend",this.handleTouchEnd)}},{key:"handleSliderDrag",value:function(e,t){var n=this;if(!this.props.disabled){var r=c.getPositionFromEvent(e,this.getTrackClientRect());this.isSliderDragging=!0,requestAnimationFrame((function(){return n.updatePosition(t,r)}))}}},{key:"handleTrackDrag",value:function(e,t){if(!this.props.disabled&&this.props.draggableTrack&&!this.isSliderDragging){var n=this.props,r=n.maxValue,i=n.minValue,o=n.value,s=o.max,a=o.min,u=c.getPositionFromEvent(e,this.getTrackClientRect()),l=c.getValueFromPosition(u,i,r,this.getTrackClientRect()),h=c.getStepValueFromValue(l,this.props.step),d=c.getPositionFromEvent(t,this.getTrackClientRect()),f=c.getValueFromPosition(d,i,r,this.getTrackClientRect()),p=c.getStepValueFromValue(f,this.props.step)-h,m={min:a-p,max:s-p};this.updateValues(m)}}},{key:"handleSliderKeyDown",value:function(e,t){if(!this.props.disabled)switch(e.keyCode){case g.LEFT_ARROW:case g.DOWN_ARROW:e.preventDefault(),this.decrementValue(t);break;case g.RIGHT_ARROW:case g.UP_ARROW:e.preventDefault(),this.incrementValue(t)}}},{key:"handleTrackMouseDown",value:function(e,t){if(!this.props.disabled){var n=this.props,r=n.maxValue,i=n.minValue,o=n.value,s=o.max,a=o.min;e.preventDefault();var u=c.getValueFromPosition(t,i,r,this.getTrackClientRect()),l=c.getStepValueFromValue(u,this.props.step);(!this.props.draggableTrack||l>s||l<a)&&this.updatePosition(this.getKeyByPosition(t),t)}}},{key:"handleInteractionStart",value:function(){this.props.onChangeStart&&this.props.onChangeStart(this.props.value),this.props.onChangeComplete&&!(0,m.isDefined)(this.startValue)&&(this.startValue=this.props.value)}},{key:"handleInteractionEnd",value:function(){this.isSliderDragging&&(this.isSliderDragging=!1),this.props.onChangeComplete&&(0,m.isDefined)(this.startValue)&&(this.startValue!==this.props.value&&this.props.onChangeComplete(this.props.value),this.startValue=null)}},{key:"handleKeyDown",value:function(e){this.handleInteractionStart(e)}},{key:"handleKeyUp",value:function(e){this.handleInteractionEnd(e)}},{key:"handleMouseDown",value:function(e){this.handleInteractionStart(e),this.addDocumentMouseUpListener()}},{key:"handleMouseUp",value:function(e){this.handleInteractionEnd(e),this.removeDocumentMouseUpListener()}},{key:"handleTouchStart",value:function(e){this.handleInteractionStart(e),this.addDocumentTouchEndListener()}},{key:"handleTouchEnd",value:function(e){this.handleInteractionEnd(e),this.removeDocumentTouchEndListener()}},{key:"renderSliders",value:function(){var e=this,t=c.getValueFromProps(this.props,this.isMultiValue()),n=c.getPercentagesFromValues(t,this.props.minValue,this.props.maxValue);return(this.props.allowSameValues&&"min"===this.lastKeyMoved?this.getKeys().reverse():this.getKeys()).map((function(r){var i=t[r],s=n[r],a=e.props,c=a.maxValue,u=a.minValue;return"min"===r?c=t.max:u=t.min,o.default.createElement(f.default,{ariaLabelledby:e.props.ariaLabelledby,ariaControls:e.props.ariaControls,classNames:e.props.classNames,formatLabel:e.props.formatLabel,key:r,maxValue:c,minValue:u,onSliderDrag:e.handleSliderDrag,onSliderKeyDown:e.handleSliderKeyDown,percentage:s,type:r,value:i})}))}},{key:"renderHiddenInputs",value:function(){var e=this;if(!this.props.name)return[];var t=this.isMultiValue(),n=c.getValueFromProps(this.props,t);return this.getKeys().map((function(r){var i=n[r],s=t?""+e.props.name+(0,m.captialize)(r):e.props.name;return o.default.createElement("input",{key:r,type:"hidden",name:s,value:i})}))}},{key:"render",value:function(){var e=this,t=this.getComponentClassName(),n=c.getValueFromProps(this.props,this.isMultiValue()),r=c.getPercentagesFromValues(n,this.props.minValue,this.props.maxValue);return o.default.createElement("div",{"aria-disabled":this.props.disabled,ref:function(t){e.node=t},className:t,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart},o.default.createElement(l.default,{classNames:this.props.classNames,formatLabel:this.props.formatLabel,type:"min"},this.props.minValue),o.default.createElement(p.default,{classNames:this.props.classNames,draggableTrack:this.props.draggableTrack,ref:function(t){e.trackNode=t},percentages:r,onTrackDrag:this.handleTrackDrag,onTrackMouseDown:this.handleTrackMouseDown},this.renderSliders()),o.default.createElement(l.default,{classNames:this.props.classNames,formatLabel:this.props.formatLabel,type:"max"},this.props.maxValue),this.renderHiddenInputs())}}]),t}(o.default.Component),y(r.prototype,"handleSliderDrag",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleSliderDrag"),r.prototype),y(r.prototype,"handleTrackDrag",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleTrackDrag"),r.prototype),y(r.prototype,"handleSliderKeyDown",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleSliderKeyDown"),r.prototype),y(r.prototype,"handleTrackMouseDown",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleTrackMouseDown"),r.prototype),y(r.prototype,"handleInteractionStart",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleInteractionStart"),r.prototype),y(r.prototype,"handleInteractionEnd",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleInteractionEnd"),r.prototype),y(r.prototype,"handleKeyDown",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleKeyDown"),r.prototype),y(r.prototype,"handleKeyUp",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleKeyUp"),r.prototype),y(r.prototype,"handleMouseDown",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleMouseDown"),r.prototype),y(r.prototype,"handleMouseUp",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleMouseUp"),r.prototype),y(r.prototype,"handleTouchStart",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleTouchStart"),r.prototype),y(r.prototype,"handleTouchEnd",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleTouchEnd"),r.prototype),r);t.default=w,e.exports=t.default},805:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DOWN_ARROW=40,t.LEFT_ARROW=37,t.RIGHT_ARROW=39,t.UP_ARROW=38},638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=o(n(2791)),i=o(n(2007));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.formatLabel?e.formatLabel(e.children,e.type):e.children;return r.default.createElement("span",{className:e.classNames[e.type+"Label"]},r.default.createElement("span",{className:e.classNames.labelContainer},t))}s.propTypes={children:i.default.node.isRequired,classNames:i.default.objectOf(i.default.string).isRequired,formatLabel:i.default.func,type:i.default.string.isRequired},e.exports=t.default},7680:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.maxValue,n=e.minValue;if(!(0,r.isNumber)(n)||!(0,r.isNumber)(t))return new Error('"minValue" and "maxValue" must be a number');if(n>=t)return new Error('"minValue" must be smaller than "maxValue"')};var r=n(6682);e.exports=t.default},8994:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(2791)),s=u(n(2007)),a=u(n(4922)),c=u(n(638));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var h=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.node=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",get:function(){return{ariaLabelledby:s.default.string,ariaControls:s.default.string,classNames:s.default.objectOf(s.default.string).isRequired,formatLabel:s.default.func,maxValue:s.default.number,minValue:s.default.number,onSliderDrag:s.default.func.isRequired,onSliderKeyDown:s.default.func.isRequired,percentage:s.default.number.isRequired,type:s.default.string.isRequired,value:s.default.number.isRequired}}}]),i(t,[{key:"componentWillUnmount",value:function(){this.removeDocumentMouseMoveListener(),this.removeDocumentMouseUpListener(),this.removeDocumentTouchEndListener(),this.removeDocumentTouchMoveListener()}},{key:"getStyle",value:function(){return{position:"absolute",left:100*(this.props.percentage||0)+"%"}}},{key:"addDocumentMouseMoveListener",value:function(){this.removeDocumentMouseMoveListener(),this.node.ownerDocument.addEventListener("mousemove",this.handleMouseMove)}},{key:"addDocumentMouseUpListener",value:function(){this.removeDocumentMouseUpListener(),this.node.ownerDocument.addEventListener("mouseup",this.handleMouseUp)}},{key:"addDocumentTouchMoveListener",value:function(){this.removeDocumentTouchMoveListener(),this.node.ownerDocument.addEventListener("touchmove",this.handleTouchMove)}},{key:"addDocumentTouchEndListener",value:function(){this.removeDocumentTouchEndListener(),this.node.ownerDocument.addEventListener("touchend",this.handleTouchEnd)}},{key:"removeDocumentMouseMoveListener",value:function(){this.node.ownerDocument.removeEventListener("mousemove",this.handleMouseMove)}},{key:"removeDocumentMouseUpListener",value:function(){this.node.ownerDocument.removeEventListener("mouseup",this.handleMouseUp)}},{key:"removeDocumentTouchMoveListener",value:function(){this.node.ownerDocument.removeEventListener("touchmove",this.handleTouchMove)}},{key:"removeDocumentTouchEndListener",value:function(){this.node.ownerDocument.removeEventListener("touchend",this.handleTouchEnd)}},{key:"handleMouseDown",value:function(){this.addDocumentMouseMoveListener(),this.addDocumentMouseUpListener()}},{key:"handleMouseUp",value:function(){this.removeDocumentMouseMoveListener(),this.removeDocumentMouseUpListener()}},{key:"handleMouseMove",value:function(e){this.props.onSliderDrag(e,this.props.type)}},{key:"handleTouchStart",value:function(){this.addDocumentTouchEndListener(),this.addDocumentTouchMoveListener()}},{key:"handleTouchMove",value:function(e){this.props.onSliderDrag(e,this.props.type)}},{key:"handleTouchEnd",value:function(){this.removeDocumentTouchMoveListener(),this.removeDocumentTouchEndListener()}},{key:"handleKeyDown",value:function(e){this.props.onSliderKeyDown(e,this.props.type)}},{key:"render",value:function(){var e=this,t=this.getStyle();return o.default.createElement("span",{className:this.props.classNames.sliderContainer,ref:function(t){e.node=t},style:t},o.default.createElement(c.default,{classNames:this.props.classNames,formatLabel:this.props.formatLabel,type:"value"},this.props.value),o.default.createElement("div",{"aria-labelledby":this.props.ariaLabelledby,"aria-controls":this.props.ariaControls,"aria-valuemax":this.props.maxValue,"aria-valuemin":this.props.minValue,"aria-valuenow":this.props.value,className:this.props.classNames.slider,draggable:"false",onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart,role:"slider",tabIndex:"0"}))}}]),t}(o.default.Component),l(r.prototype,"handleMouseDown",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleMouseDown"),r.prototype),l(r.prototype,"handleMouseUp",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleMouseUp"),r.prototype),l(r.prototype,"handleMouseMove",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleMouseMove"),r.prototype),l(r.prototype,"handleTouchStart",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleTouchStart"),r.prototype),l(r.prototype,"handleTouchMove",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleTouchMove"),r.prototype),l(r.prototype,"handleTouchEnd",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleTouchEnd"),r.prototype),l(r.prototype,"handleKeyDown",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleKeyDown"),r.prototype),r);t.default=h,e.exports=t.default},8090:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(2791)),s=c(n(2007)),a=c(n(4922));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var l=(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.node=null,n.trackDragEvent=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"propTypes",get:function(){return{children:s.default.node.isRequired,classNames:s.default.objectOf(s.default.string).isRequired,draggableTrack:s.default.bool,onTrackDrag:s.default.func,onTrackMouseDown:s.default.func.isRequired,percentages:s.default.objectOf(s.default.number).isRequired}}}]),i(t,[{key:"getClientRect",value:function(){return this.node.getBoundingClientRect()}},{key:"getActiveTrackStyle",value:function(){var e=100*(this.props.percentages.max-this.props.percentages.min)+"%";return{left:100*this.props.percentages.min+"%",width:e}}},{key:"addDocumentMouseMoveListener",value:function(){this.removeDocumentMouseMoveListener(),this.node.ownerDocument.addEventListener("mousemove",this.handleMouseMove)}},{key:"addDocumentMouseUpListener",value:function(){this.removeDocumentMouseUpListener(),this.node.ownerDocument.addEventListener("mouseup",this.handleMouseUp)}},{key:"removeDocumentMouseMoveListener",value:function(){this.node.ownerDocument.removeEventListener("mousemove",this.handleMouseMove)}},{key:"removeDocumentMouseUpListener",value:function(){this.node.ownerDocument.removeEventListener("mouseup",this.handleMouseUp)}},{key:"handleMouseMove",value:function(e){this.props.draggableTrack&&(null!==this.trackDragEvent&&this.props.onTrackDrag(e,this.trackDragEvent),this.trackDragEvent=e)}},{key:"handleMouseUp",value:function(){this.props.draggableTrack&&(this.removeDocumentMouseMoveListener(),this.removeDocumentMouseUpListener(),this.trackDragEvent=null)}},{key:"handleMouseDown",value:function(e){var t={x:(e.touches?e.touches[0].clientX:e.clientX)-this.getClientRect().left,y:0};this.props.onTrackMouseDown(e,t),this.props.draggableTrack&&(this.addDocumentMouseMoveListener(),this.addDocumentMouseUpListener())}},{key:"handleTouchStart",value:function(e){e.preventDefault(),this.handleMouseDown(e)}},{key:"render",value:function(){var e=this,t=this.getActiveTrackStyle();return o.default.createElement("div",{className:this.props.classNames.track,onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart,ref:function(t){e.node=t}},o.default.createElement("div",{style:t,className:this.props.classNames.activeTrack}),this.props.children)}}]),t}(o.default.Component),u(r.prototype,"handleMouseMove",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleMouseMove"),r.prototype),u(r.prototype,"handleMouseUp",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleMouseUp"),r.prototype),u(r.prototype,"handleMouseDown",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleMouseDown"),r.prototype),u(r.prototype,"handleTouchStart",[a.default],Object.getOwnPropertyDescriptor(r.prototype,"handleTouchStart"),r.prototype),r);t.default=l,e.exports=t.default},9070:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.maxValue,i=e.minValue,o=e[t];if(!(0,r.isNumber)(o)&&(!(0,r.isObject)(o)||!(0,r.isNumber)(o.min)||!(0,r.isNumber)(o.max)))return new Error('"'+t+'" must be a number or a range object');if((0,r.isNumber)(o)&&(o<i||o>n))return new Error('"'+t+'" must be in between "minValue" and "maxValue"');if((0,r.isObject)(o)&&(o.min<i||o.min>n||o.max<i||o.max>n))return new Error('"'+t+'" must be in between "minValue" and "maxValue"')};var r=n(6682);e.exports=t.default},1993:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getPercentageFromPosition=o,t.getValueFromPosition=function(e,t,n,r){var i=o(e,r);return t+(n-t)*i},t.getValueFromProps=function(e,t){if(t)return r({},e.value);return{min:e.minValue,max:e.value}},t.getPercentageFromValue=s,t.getPercentagesFromValues=function(e,t,n){return{min:s(e.min,t,n),max:s(e.max,t,n)}},t.getPositionFromValue=a,t.getPositionsFromValues=function(e,t,n,r){return{min:a(e.min,t,n,r),max:a(e.max,t,n,r)}},t.getPositionFromEvent=function(e,t){var n=t.width,r=(e.touches?e.touches[0]:e).clientX;return{x:(0,i.clamp)(r-t.left,0,n),y:0}},t.getStepValueFromValue=function(e,t){return Math.round(e/t)*t};var i=n(6682);function o(e,t){var n=t.width;return e.x/n||0}function s(e,t,n){return((0,i.clamp)(e,t,n)-t)/(n-t)||0}function a(e,t,n,r){var i=r.width;return{x:s(e,t,n)*i,y:0}}},4275:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},2430:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return Math.min(Math.max(e,t),n)},e.exports=t.default},8274:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=Math.pow(t.x-e.x,2),r=Math.pow(t.y-e.y,2);return Math.sqrt(n+r)},e.exports=t.default},6682:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4275);Object.defineProperty(t,"captialize",{enumerable:!0,get:function(){return l(r).default}});var i=n(2430);Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return l(i).default}});var o=n(8274);Object.defineProperty(t,"distanceTo",{enumerable:!0,get:function(){return l(o).default}});var s=n(6722);Object.defineProperty(t,"isDefined",{enumerable:!0,get:function(){return l(s).default}});var a=n(8012);Object.defineProperty(t,"isNumber",{enumerable:!0,get:function(){return l(a).default}});var c=n(3167);Object.defineProperty(t,"isObject",{enumerable:!0,get:function(){return l(c).default}});var u=n(9333);function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"length",{enumerable:!0,get:function(){return l(u).default}})},6722:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0!==e&&null!==e},e.exports=t.default},8012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"number"===typeof e},e.exports=t.default},3167:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":n(e))},e.exports=t.default},9333:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Math.abs(e-t)},e.exports=t.default},1372:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case u:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return E(e)||_(e)===l},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===u},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===a||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d||e.$$typeof===y||e.$$typeof===w||e.$$typeof===b||e.$$typeof===v)},t.typeOf=_},7441:(e,t,n)=>{"use strict";e.exports=n(1372)},8459:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case a:case s:case d:case f:return e;default:switch(e=e&&e.$$typeof){case l:case u:case h:case m:case p:case c:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isContextConsumer=function(e){return v(e)===u}},6900:(e,t,n)=>{"use strict";e.exports=n(8459)},6374:(e,t,n)=>{"use strict";var r=n(2791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:l,props:o,_owner:s.current}}t.jsx=u,t.jsxs=u},9117:(e,t,n)=>{"use strict";var r=n(1725),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,c=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function b(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||y}function _(){}function E(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||y}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=b.prototype;var T=E.prototype=new _;T.constructor=E,r(T,b.prototype),T.isPureReactComponent=!0;var S={current:null},I=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)I.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var N=/\/+/g,A=[];function O(e,t,n,r){if(A.length){var i=A.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function D(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case o:case s:a=!0}}if(a)return n(r,e,""===t?"."+M(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=t+M(i=e[c],c);a+=D(i,u,n,r)}else if(null===e||"object"!==typeof e?u=null:u="function"===typeof(u=g&&e[g]||e["@@iterator"])?u:null,"function"===typeof u)for(e=u.call(e),c=0;!(i=e.next()).done;)a+=D(i=i.value,u=t+M(i,c++),n,r);else if("object"===i)throw n=""+e,Error(v(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function R(e,t,n){return null==e?0:D(e,"",t,n)}function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function j(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(N,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(N,"$&/")+"/"),R(e,j,t=O(t,o,r,i)),P(t)}var U={current:null};function V(){var e=U.current;if(null===e)throw Error(v(321));return e}var B={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,L,t=O(null,null,t,n)),P(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(v(143));return e}},t.Component=b,t.Fragment=a,t.Profiler=u,t.PureComponent=E,t.StrictMode=c,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(v(267,e));var i=r({},e.props),s=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)I.call(t,l)&&!k.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){u=Array(l);for(var h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:o,type:e.type,key:s,ref:a,props:i,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return V().useCallback(e,t)},t.useContext=function(e,t){return V().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return V().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return V().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return V().useLayoutEffect(e,t)},t.useMemo=function(e,t){return V().useMemo(e,t)},t.useReducer=function(e,t,n){return V().useReducer(e,t,n)},t.useRef=function(e){return V().useRef(e)},t.useState=function(e){return V().useState(e)},t.version="16.14.0"},2791:(e,t,n)=>{"use strict";e.exports=n(9117)},184:(e,t,n)=>{"use strict";e.exports=n(6374)},6813:(e,t)=>{"use strict";var n,r,i,o,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var a=null,c=null,u=function(){if(null!==a)try{var e=t.unstable_now();a(!0,e),a=null}catch(n){throw setTimeout(u,0),n}},l=Date.now();t.unstable_now=function(){return Date.now()-l},n=function(e){null!==a?setTimeout(n,0,e):(a=e,setTimeout(u,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},o=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var v=!1,y=null,w=-1,b=5,_=0;o=function(){return t.unstable_now()>=_},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,T=E.port2;E.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();_=e+b;try{y(!0,e)?T.postMessage(null):(v=!1,y=null)}catch(n){throw T.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,T.postMessage(null))},r=function(e,n){w=f((function(){e(t.unstable_now())}),n)},i=function(){p(w),w=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<x(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,s=e[o],a=o+1,c=e[a];if(void 0!==s&&0>x(s,n))void 0!==c&&0>x(c,s)?(e[r]=c,e[a]=n,r=a):(e[r]=s,e[o]=n,r=o);else{if(!(void 0!==c&&0>x(c,n)))break e;e[r]=c,e[a]=n,r=a}}}return t}return null}function x(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],N=[],A=1,O=null,P=3,D=!1,R=!1,M=!1;function L(e){for(var t=I(N);null!==t;){if(null===t.callback)k(N);else{if(!(t.startTime<=e))break;k(N),t.sortIndex=t.expirationTime,S(C,t)}t=I(N)}}function j(e){if(M=!1,L(e),!R)if(null!==I(C))R=!0,n(F);else{var t=I(N);null!==t&&r(j,t.startTime-e)}}function F(e,n){R=!1,M&&(M=!1,i()),D=!0;var s=P;try{for(L(n),O=I(C);null!==O&&(!(O.expirationTime>n)||e&&!o());){var a=O.callback;if(null!==a){O.callback=null,P=O.priorityLevel;var c=a(O.expirationTime<=n);n=t.unstable_now(),"function"===typeof c?O.callback=c:O===I(C)&&k(C),L(n)}else k(C);O=I(C)}if(null!==O)var u=!0;else{var l=I(N);null!==l&&r(j,l.startTime-n),u=!1}return u}finally{O=null,P=s,D=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||D||(R=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return I(C)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=V,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,o,s){var a=t.unstable_now();if("object"===typeof s&&null!==s){var c=s.delay;c="number"===typeof c&&0<c?a+c:a,s="number"===typeof s.timeout?s.timeout:U(e)}else s=U(e),c=a;return e={id:A++,callback:o,priorityLevel:e,startTime:c,expirationTime:s=c+s,sortIndex:-1},c>a?(e.sortIndex=c,S(N,e),null===I(C)&&e===I(N)&&(M?i():M=!0,r(j,c-a))):(e.sortIndex=s,S(C,e),R||D||(R=!0,n(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();L(e);var n=I(C);return n!==O&&null!==O&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<O.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},5296:(e,t,n)=>{"use strict";e.exports=n(6813)},1561:(e,t,n)=>{"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,c=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return a((function(){i.value=n,i.getSnapshot=t,u(i)&&l({inst:i})}),[e,n,t]),s((function(){return u(i)&&l({inst:i}),e((function(){u(i)&&l({inst:i})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},7595:(e,t,n)=>{"use strict";var r=n(2791),i=n(7248);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,a=r.useRef,c=r.useEffect,u=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=a(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=u((function(){function e(e){if(!c){if(c=!0,s=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(s=e,a=n)}var s,a,c=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,n,r,i]);var f=s(e,h[0],h[1]);return c((function(){d.hasValue=!0,d.value=f}),[f]),l(f),f}},7248:(e,t,n)=>{"use strict";e.exports=n(1561)},327:(e,t,n)=>{"use strict";e.exports=n(7595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>L,SDK_VERSION:()=>Te,_DEFAULT_ENTRY_NAME:()=>ae,_addComponent:()=>de,_addOrOverwriteComponent:()=>fe,_apps:()=>ue,_clearComponents:()=>we,_components:()=>he,_getProvider:()=>me,_isFirebaseApp:()=>ve,_isFirebaseServerApp:()=>ye,_registerComponent:()=>pe,_removeServiceInstance:()=>ge,_serverApps:()=>le,deleteApp:()=>Ce,getApp:()=>ke,getApps:()=>xe,initializeApp:()=>Se,initializeServerApp:()=>Ie,onLog:()=>Ae,registerVersion:()=>Ne,setLogLevel:()=>Oe});const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t};class r extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}function i(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&o(n)&&(e[n]=i(e[n],t[n]));return e}function o(e){return"__proto__"!==e}class s extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,a.prototype.create)}}class a{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(c,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new s(n,o,t)}}const c=/\{\$([^}]+)}/g;function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){const n=new h(e,t);return n.subscribe.bind(n)}class h{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=d),void 0===r.error&&(r.error=d),void 0===r.complete&&(r.complete=d);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function d(){}const f=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t};class p extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class g extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,g.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,index_esm2017_ErrorFactory.prototype.create)}}class v{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const y="[DEFAULT]";class w{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:y})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===y?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return this.component?this.component.multipleInstances?e:y:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class b{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new w(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const _=[];var E;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(E||(E={}));const T={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},S=E.INFO,I={[E.DEBUG]:"log",[E.VERBOSE]:"log",[E.INFO]:"info",[E.WARN]:"warn",[E.ERROR]:"error"},k=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=I[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class x{constructor(e){this.name=e,this._logLevel=S,this._logHandler=k,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in E))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?T[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,E.DEBUG,...t),this._logHandler(this,E.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,E.VERBOSE,...t),this._logHandler(this,E.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,E.INFO,...t),this._logHandler(this,E.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,E.WARN,...t),this._logHandler(this,E.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,E.ERROR,...t),this._logHandler(this,E.ERROR,...t)}}const C=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},N={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,u=t>>2,l=(3&t)<<4|s>>4;let h=(15&s)<<2|c>>6,d=63&c;a||(d=64,o||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(C(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new A;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class A extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O=function(e){return function(e){const t=C(e);return N.encodeByteArray(t,!0)}(e).replace(/\./g,"")},P=function(e){try{return N.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const D=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,R=()=>{try{return D()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&P(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},M=()=>{var e;return null===(e=R())||void 0===e?void 0:e.config};class L extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,L.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,j.prototype.create)}}class j{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(F,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new L(n,o,t)}}const F=/\{\$([^}]+)}/g;function U(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(V(n)&&V(o)){if(!U(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function V(e){return null!==e&&"object"===typeof e}let B,z;const q=new WeakMap,W=new WeakMap,K=new WeakMap,H=new WeakMap,G=new WeakMap;let Q={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return W.get(e);if("objectStoreNames"===t)return e.objectStoreNames||K.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Y(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function $(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(X(this),n),Y(q.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Y(e.apply(X(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(X(this),t,...r);return K.set(o,t.sort?t.sort():[t]),Y(o)}}function J(e){return"function"===typeof e?$(e):(e instanceof IDBTransaction&&function(e){if(W.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));W.set(e,t)}(e),t=e,(B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Q):e);var t}function Y(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Y(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&q.set(t,e)})).catch((()=>{})),G.set(t,e),t}(e);if(H.has(e))return H.get(e);const t=J(e);return t!==e&&(H.set(e,t),G.set(t,e)),t}const X=e=>G.get(e);const Z=["get","getKey","getAll","getAllKeys","count"],ee=["put","add","delete","clear"],te=new Map;function ne(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(te.get(t))return te.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ee.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Z.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return te.set(t,o),o}Q=(e=>({...e,get:(t,n,r)=>ne(t,n)||e.get(t,n,r),has:(t,n)=>!!ne(t,n)||e.has(t,n)}))(Q);class re{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ie="@firebase/app",oe="0.10.0",se=new x("@firebase/app"),ae="[DEFAULT]",ce={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ue=new Map,le=new Map,he=new Map;function de(e,t){try{e.container.addComponent(t)}catch(n){se.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function fe(e,t){e.container.addOrOverwriteComponent(t)}function pe(e){const t=e.name;if(he.has(t))return se.debug("There were multiple attempts to register component ".concat(t,".")),!1;he.set(t,e);for(const n of ue.values())de(n,e);for(const n of le.values())de(n,e);return!0}function me(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ge(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae;me(e,t).clearInstance(n)}function ve(e){return void 0!==e.options}function ye(e){return void 0!==e.settings}function we(){he.clear()}const be=new j("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class _e{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new v("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw be.create("app-deleted",{appName:this._name})}}class Ee extends _e{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,o={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,o,r);else{super(e.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Ne(ie,oe,"serverapp")}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ce(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw be.create("server-app-deleted")}}const Te="10.10.0";function Se(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ae,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw be.create("bad-app-name",{appName:String(i)});if(n||(n=M()),!n)throw be.create("no-options");const o=ue.get(i);if(o){if(U(n,o.options)&&U(r,o.config))return o;throw be.create("duplicate-app",{appName:i})}const s=new b(i);for(const c of he.values())s.addComponent(c);const a=new _e(n,r,s);return ue.set(i,a),a}function Ie(e,t){if("object"===typeof self&&self.self===self)throw be.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=ve(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw be.create("finalization-registry-not-supported",{});const i=""+(e=>[...e].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0))(JSON.stringify(r)),o=le.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const s=new b(i);for(const c of he.values())s.addComponent(c);const a=new Ee(n,t,i,s);return le.set(i,a),a}function ke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;const t=ue.get(e);if(!t&&e===ae&&M())return Se();if(!t)throw be.create("no-app",{appName:e});return t}function xe(){return Array.from(ue.values())}async function Ce(e){let t=!1;const n=e.name;if(ue.has(n))t=!0,ue.delete(n);else if(le.has(n)){e.decRefCount()<=0&&(le.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Ne(e,t,n){var r;let i=null!==(r=ce[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void se.warn(e.join(" "))}pe(new v("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Ae(e,t){if(null!==e&&"function"!==typeof e)throw be.create("invalid-log-argument");!function(e,t){for(const n of _){let r=null;t&&t.level&&(r=T[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:E[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function Oe(e){var t;t=e,_.forEach((e=>{e.setLogLevel(t)}))}const Pe="firebase-heartbeat-store";let De=null;function Re(){return De||(De=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Y(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Y(s.result),e.oldVersion,e.newVersion,Y(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Pe)}catch(n){console.warn(n)}}}).catch((e=>{throw be.create("idb-open",{originalErrorMessage:e.message})}))),De}async function Me(e,t){try{const n=(await Re()).transaction(Pe,"readwrite"),r=n.objectStore(Pe);await r.put(t,Le(e)),await n.done}catch(n){if(n instanceof L)se.warn(n.message);else{const e=be.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});se.warn(e.message)}}}function Le(e){return"".concat(e.name,"!").concat(e.options.appId)}const je=1024;class Fe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ve(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ue();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ue(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:je;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Be(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Be(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=O(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ue(){return(new Date).toISOString().substring(0,10)}class Ve{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Re()).transaction(Pe),n=await t.objectStore(Pe).get(Le(e));return await t.done,n}catch(t){if(t instanceof L)se.warn(t.message);else{const e=be.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});se.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Me(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Me(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Be(e){return O(JSON.stringify({version:2,heartbeats:e})).length}var ze;ze="",pe(new v("platform-logger",(e=>new re(e)),"PRIVATE")),pe(new v("heartbeat",(e=>new Fe(e)),"PRIVATE")),Ne(ie,oe,ze),Ne(ie,oe,"esm2017"),Ne("fire-js","");class qe{constructor(e,t){this._delegate=e,this.firebase=t,de(e,new v("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ce(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){de(this._delegate,e)}_addOrOverwriteComponent(e){fe(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const We=new a("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Ke=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Se(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(u(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:o,registerVersion:Ne,setLogLevel:Oe,onLog:Ae,apps:null,SDK_VERSION:Te,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(pe(e)&&"PUBLIC"===e.type){const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o();if("function"!==typeof e[s])throw We.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&i(a,e.serviceProps),r[s]=a,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function o(e){if(!u(n,e=e||ae))throw We.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),o.App=t,r}(qe);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){i(n,e)},createSubscribe:l,ErrorFactory:a,deepExtend:i}),n}(),He=new x("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){He.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&He.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ge=Ke;!function(e){Ne("@firebase/app-compat","0.2.30",e)}();Ge.registerVersion("firebase","10.10.0","app-compat");const Qe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},$e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,u=t>>2,l=(3&t)<<4|s>>4;let h=(15&s)<<2|c>>6,d=63&c;a||(d=64,o||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Qe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Je;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Je extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ye=function(e){return function(e){const t=Qe(e);return $e.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Xe=function(e){try{return $e.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const Ze=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,et=()=>{try{return Ze()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Xe(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},tt=e=>{const t=(e=>{var t,n;return null===(n=null===(t=et())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]};function nt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ye(JSON.stringify({alg:"none",type:"JWT"})),Ye(JSON.stringify(o)),""].join(".")}function rt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function it(){return!function(){var e;const t=null===(e=et())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class ot extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,st.prototype.create)}}class st{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(at,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ot(n,o,t)}}const at=/\{\$([^}]+)}/g;function ct(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(ut(n)&&ut(o)){if(!ct(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ut(e){return null!==e&&"object"===typeof e}function lt(e){return e&&e._delegate?e._delegate:e}var ht,dt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ft={},pt=pt||{},mt=dt||self;function gt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function vt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var yt="closure_uid_"+(1e9*Math.random()>>>0),wt=0;function bt(e,t,n){return e.call.apply(e.bind,arguments)}function _t(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Et(e,t,n){return(Et=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bt:_t).apply(null,arguments)}function Tt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function St(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function It(){this.s=this.s,this.o=this.o}It.prototype.s=!1,It.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,yt)&&e[yt]||(e[yt]=++wt)}(this)},It.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function xt(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ct(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(gt(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Nt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Nt.prototype.h=function(){this.defaultPrevented=!0};var At=function(){if(!mt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};mt.addEventListener("test",e,t),mt.removeEventListener("test",e,t)}catch(BT){}return e}();function Ot(e){return/^[\s\xa0]*$/.test(e)}function Pt(){var e=mt.navigator;return e&&(e=e.userAgent)?e:""}function Dt(e){return-1!=Pt().indexOf(e)}function Rt(e){return Rt[" "](e),e}Rt[" "]=function(){};var Mt,Lt,jt=Dt("Opera"),Ft=Dt("Trident")||Dt("MSIE"),Ut=Dt("Edge"),Vt=Ut||Ft,Bt=Dt("Gecko")&&!(-1!=Pt().toLowerCase().indexOf("webkit")&&!Dt("Edge"))&&!(Dt("Trident")||Dt("MSIE"))&&!Dt("Edge"),zt=-1!=Pt().toLowerCase().indexOf("webkit")&&!Dt("Edge");function qt(){var e=mt.document;return e?e.documentMode:void 0}e:{var Wt="",Kt=function(){var e=Pt();return Bt?/rv:([^\);]+)(\)|;)/.exec(e):Ut?/Edge\/([\d\.]+)/.exec(e):Ft?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):zt?/WebKit\/(\S+)/.exec(e):jt?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Kt&&(Wt=Kt?Kt[1]:""),Ft){var Ht=qt();if(null!=Ht&&Ht>parseFloat(Wt)){Mt=String(Ht);break e}}Mt=Wt}if(mt.document&&Ft){var Gt=qt();Lt=Gt||(parseInt(Mt,10)||void 0)}else Lt=void 0;var Qt=Lt;function $t(e,t){if(Nt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Bt){e:{try{Rt(t.nodeName);var i=!0;break e}catch(VT){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Jt[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$t.$.h.call(this)}}St($t,Nt);var Jt={2:"touch",3:"pen",4:"mouse"};$t.prototype.h=function(){$t.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yt="closure_listenable_"+(1e6*Math.random()|0),Xt=0;function Zt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Xt,this.fa=this.ia=!1}function en(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function tn(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function nn(e){const t={};for(const n in e)t[n]=e[n];return t}const rn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function on(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<rn.length;t++)n=rn[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function sn(e){this.src=e,this.g={},this.h=0}function an(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=kt(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(en(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function cn(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}sn.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=cn(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Zt(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var un="closure_lm_"+(1e6*Math.random()|0),ln={};function hn(e,t,n,r,i){if(r&&r.once)return fn(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)hn(e,t[o],n,r,i);return null}return n=bn(n),e&&e[Yt]?e.O(t,n,vt(r)?!!r.capture:!!r,i):dn(e,t,n,!1,r,i)}function dn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=vt(i)?!!i.capture:!!i,a=yn(e);if(a||(e[un]=a=new sn(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=vn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)At||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(gn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function fn(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)fn(e,t[o],n,r,i);return null}return n=bn(n),e&&e[Yt]?e.P(t,n,vt(r)?!!r.capture:!!r,i):dn(e,t,n,!0,r,i)}function pn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)pn(e,t[o],n,r,i);else r=vt(r)?!!r.capture:!!r,n=bn(n),e&&e[Yt]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=cn(o=e.g[t],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=yn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=cn(t,n,r,i)),(n=-1<e?t[e]:null)&&mn(n))}function mn(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Yt])an(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(gn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=yn(t))?(an(n,e),0==n.h&&(n.src=null,t[un]=null)):en(e)}}}function gn(e){return e in ln?ln[e]:ln[e]="on"+e}function vn(e,t){if(e.fa)e=!0;else{t=new $t(t,this);var n=e.listener,r=e.la||e.src;e.ia&&mn(e),e=n.call(r,t)}return e}function yn(e){return(e=e[un])instanceof sn?e:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(e){return"function"===typeof e?e:(e[wn]||(e[wn]=function(t){return e.handleEvent(t)}),e[wn])}function _n(){It.call(this),this.i=new sn(this),this.S=this,this.J=null}function En(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Nt(t,e);else if(t instanceof Nt)t.target=t.target||e;else{var i=t;on(t=new Nt(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Tn(s,r,!0,t)&&i}if(i=Tn(s=t.g=e,r,!0,t)&&i,i=Tn(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Tn(s=t.g=n[o],r,!1,t)&&i}function Tn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&an(e.i,s),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}St(_n,It),_n.prototype[Yt]=!0,_n.prototype.removeEventListener=function(e,t,n,r){pn(this,e,t,n,r)},_n.prototype.N=function(){if(_n.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)en(n[r]);delete t.g[e],t.h--}}this.J=null},_n.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},_n.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Sn=mt.JSON.stringify;function In(){var e=Pn;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var kn=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new xn),(e=>e.reset()));class xn{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Cn(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Nn(e){mt.setTimeout((()=>{throw e}),0)}let An,On=!1,Pn=new class{constructor(){this.h=this.g=null}add(e,t){const n=kn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Dn=()=>{const e=mt.Promise.resolve(void 0);An=()=>{e.then(Rn)}};var Rn=()=>{for(var e;e=In();){try{e.h.call(e.g)}catch(BT){Nn(BT)}var t=kn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}On=!1};function Mn(e,t){_n.call(this),this.h=e||1,this.g=t||mt,this.j=Et(this.qb,this),this.l=Date.now()}function Ln(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function jn(e,t,n){if("function"===typeof e)n&&(e=Et(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Et(e.handleEvent,e)}return 2147483647<Number(t)?-1:mt.setTimeout(e,t||0)}function Fn(e){e.g=jn((()=>{e.g=null,e.i&&(e.i=!1,Fn(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}St(Mn,_n),(ht=Mn.prototype).ga=!1,ht.T=null,ht.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),En(this,"tick"),this.ga&&(Ln(this),this.start()))}},ht.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ht.N=function(){Mn.$.N.call(this),Ln(this),delete this.g};class Un extends It{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fn(this)}N(){super.N(),this.g&&(mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vn(e){It.call(this),this.h=e,this.g={}}St(Vn,It);var Bn=[];function zn(e,t,n,r){Array.isArray(n)||(n&&(Bn[0]=n.toString()),n=Bn);for(var i=0;i<n.length;i++){var o=hn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function qn(e){tn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&mn(e)}),e),e.g={}}function Wn(){this.g=!0}function Kn(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Sn(n)}catch(DT){return t}}(e,n)+(r?" "+r:"")}))}Vn.prototype.N=function(){Vn.$.N.call(this),qn(this)},Vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wn.prototype.Ea=function(){this.g=!1},Wn.prototype.info=function(){};var Hn={},Gn=null;function Qn(){return Gn=Gn||new _n}function $n(e){Nt.call(this,Hn.Ta,e)}function Jn(e){const t=Qn();En(t,new $n(t))}function Yn(e,t){Nt.call(this,Hn.STAT_EVENT,e),this.stat=t}function Xn(e){const t=Qn();En(t,new Yn(t,e))}function Zn(e,t){Nt.call(this,Hn.Ua,e),this.size=t}function er(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return mt.setTimeout((function(){e()}),t)}Hn.Ta="serverreachability",St($n,Nt),Hn.STAT_EVENT="statevent",St(Yn,Nt),Hn.Ua="timingevent",St(Zn,Nt);var tr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},nr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function rr(){}function ir(e){return e.h||(e.h=e.i())}function or(){}rr.prototype.h=null;var sr,ar={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function cr(){Nt.call(this,"d")}function ur(){Nt.call(this,"c")}function lr(){}function hr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Vn(this),this.P=fr,e=Vt?125:void 0,this.V=new Mn(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dr}function dr(){this.i=null,this.g="",this.h=!1}St(cr,Nt),St(ur,Nt),St(lr,rr),lr.prototype.g=function(){return new XMLHttpRequest},lr.prototype.i=function(){return{}},sr=new lr;var fr=45e3,pr={},mr={};function gr(e,t,n){e.L=1,e.A=Mr(Ar(t)),e.u=n,e.S=!0,vr(e,null)}function vr(e,t){e.G=Date.now(),_r(e),e.B=Ar(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Qr(n.i,"t",r),e.o=0,n=e.l.J,e.h=new dr,e.g=Hi(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Un(Et(e.Pa,e,e.g),e.O)),zn(e.U,e.g,"readystatechange",e.nb),t=e.I?nn(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Jn(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+u+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function yr(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function wr(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=br(e,n),r==mr){4==t&&(e.s=4,Xn(14),i=!1),Kn(e.j,e.m,null,"[Incomplete Response]");break}if(r==pr){e.s=4,Xn(15),Kn(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Kn(e.j,e.m,r,null),kr(e,r)}yr(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Xn(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fi(t),t.M=!0,Xn(11))):(Kn(e.j,e.m,n,"[Invalid Chunked Response]"),Ir(e),Sr(e))}function br(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?mr:(n=Number(t.substring(n,r)),isNaN(n)?pr:(r+=1)+n>t.length?mr:(t=t.slice(r,r+n),e.o=r+n,t))}function _r(e){e.Y=Date.now()+e.P,Er(e,e.P)}function Er(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=er(Et(e.lb,e),t)}function Tr(e){e.C&&(mt.clearTimeout(e.C),e.C=null)}function Sr(e){0==e.l.H||e.J||Bi(e.l,e)}function Ir(e){Tr(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ln(e.V),qn(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function kr(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ei(n.i,e)))if(!e.K&&ei(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(JT){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Vi(n),Ai(n)}ji(n),Xn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=er(Et(n.ib,n),6e3));if(1>=Zr(n.i)&&n.oa){try{n.oa()}catch(JT){}n.oa=void 0}}else qi(n,11)}else if((e.K||n.g==e)&&Vi(n),!Ot(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const l=u[5];null!=l&&"number"===typeof l&&0<l&&(r=1.5*l,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(ti(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Rr(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=Ki(r,r.J?r.pa:null,r.Y),s.K){ni(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(Tr(a),_r(a)),r.g=s}else Li(r);0<n.j.length&&Pi(n)}else"stop"!=u[0]&&"close"!=u[0]||qi(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?qi(n,7):Ni(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Jn()}catch(JT){}}function xr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(gt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(gt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(gt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(ht=hr.prototype).setTimeout=function(e){this.P=e},ht.nb=function(e){e=e.target;const t=this.M;t&&3==Ti(e)?t.l():this.Pa(e)},ht.Pa=function(e){try{if(e==this.g)e:{const l=Ti(this.g);var t=this.g.Ia();this.g.da();if(!(3>l)&&(3!=l||Vt||this.g&&(this.h.h||this.g.ja()||Si(this.g)))){this.J||4!=l||7==t||Jn(),Tr(this);var n=this.g.da();this.ca=n;t:if(yr(this)){var r=Si(this.g);e="";var i=r.length,o=4==Ti(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ir(this),Sr(this);var s="";break t}this.h.i=new mt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ot(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,Xn(12),Ir(this),Sr(this);break e}Kn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kr(this,n)}this.S?(wr(this,l,s),Vt&&this.i&&3==l&&(zn(this.U,this.V,"tick",this.mb),this.V.start())):(Kn(this.j,this.m,s,null),kr(this,s)),4==l&&Ir(this),this.i&&!this.J&&(4==l?Bi(this.l,this):(this.i=!1,_r(this)))}else(function(e){const t={};e=(e.g&&2<=Ti(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Ot(e[r]))continue;var n=Cn(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Xn(12)):(this.s=0,Xn(13)),Ir(this),Sr(this)}}}catch(FT){}},ht.mb=function(){if(this.g){var e=Ti(this.g),t=this.g.ja();this.o<t.length&&(Tr(this),wr(this,e,t),this.i&&4!=e&&_r(this))}},ht.cancel=function(){this.J=!0,Ir(this)},ht.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Jn(),Xn(17)),Ir(this),this.s=2,Sr(this)):Er(this,this.Y-e)};var Cr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nr(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Nr){this.h=e.h,Or(this,e.j),this.s=e.s,this.g=e.g,Pr(this,e.m),this.l=e.l;var t=e.i,n=new Wr;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Dr(this,n),this.o=e.o}else e&&(t=String(e).match(Cr))?(this.h=!1,Or(this,t[1]||"",!0),this.s=Lr(t[2]||""),this.g=Lr(t[3]||"",!0),Pr(this,t[4]),this.l=Lr(t[5]||"",!0),Dr(this,t[6]||"",!0),this.o=Lr(t[7]||"")):(this.h=!1,this.i=new Wr(null,this.h))}function Ar(e){return new Nr(e)}function Or(e,t,n){e.j=n?Lr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Pr(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Dr(e,t,n){t instanceof Wr?(e.i=t,function(e,t){t&&!e.j&&(Kr(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Hr(this,t),Qr(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=jr(t,zr)),e.i=new Wr(t,e.h))}function Rr(e,t,n){e.i.set(t,n)}function Mr(e){return Rr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Lr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jr(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Fr),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fr(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Nr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jr(t,Ur,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(jr(t,Ur,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(jr(n,"/"==n.charAt(0)?Br:Vr,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jr(n,qr)),e.join("")};var Ur=/[#\/\?@]/g,Vr=/[#\?:]/g,Br=/[#\?]/g,zr=/[#\?@]/g,qr=/#/g;function Wr(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Kr(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Hr(e,t){Kr(e),t=$r(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Gr(e,t){return Kr(e),t=$r(e,t),e.g.has(t)}function Qr(e,t,n){Hr(e,t),0<n.length&&(e.i=null,e.g.set($r(e,t),xt(n)),e.h+=n.length)}function $r(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(ht=Wr.prototype).add=function(e,t){Kr(this),this.i=null,e=$r(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ht.forEach=function(e,t){Kr(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},ht.ta=function(){Kr(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},ht.Z=function(e){Kr(this);let t=[];if("string"===typeof e)Gr(this,e)&&(t=t.concat(this.g.get($r(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},ht.set=function(e,t){return Kr(this),this.i=null,Gr(this,e=$r(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ht.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};function Jr(e){this.l=e||Yr,mt.PerformanceNavigationTiming?e=0<(e=mt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(mt.g&&mt.g.Ka&&mt.g.Ka()&&mt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Yr=10;function Xr(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Zr(e){return e.h?1:e.g?e.g.size:0}function ei(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ti(e,t){e.g?e.g.add(t):e.h=t}function ni(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ri(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return xt(e.i)}Jr.prototype.cancel=function(){if(this.i=ri(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};function ii(){this.g=new class{stringify(e){return mt.JSON.stringify(e,void 0)}parse(e){return mt.JSON.parse(e,void 0)}}}function oi(e,t,n){const r=n||"";try{xr(e,(function(e,n){let i=e;vt(e)&&(i=Sn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function si(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(VT){}}function ai(e){this.l=e.ec||null,this.j=e.ob||!1}function ci(e,t){_n.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ui,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}St(ai,rr),ai.prototype.g=function(){return new ci(this.l,this.j)},ai.prototype.i=function(e){return function(){return e}}({}),St(ci,_n);var ui=0;function li(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function hi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,di(e)}function di(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ht=ci.prototype).open=function(e,t){if(this.readyState!=ui)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,di(this)},ht.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||mt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hi(this)),this.readyState=ui},ht.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof mt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;li(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},ht.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hi(this):di(this),3==this.readyState&&li(this)}},ht.Za=function(e){this.g&&(this.response=this.responseText=e,hi(this))},ht.Ya=function(e){this.g&&(this.response=e,hi(this))},ht.ka=function(){this.g&&hi(this)},ht.setRequestHeader=function(e,t){this.v.append(e,t)},ht.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ht.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ci.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fi=mt.JSON.parse;function pi(e){_n.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=mi,this.L=this.M=!1}St(pi,_n);var mi="",gi=/^https?$/i,vi=["POST","PUT"];function yi(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,wi(e),_i(e)}function wi(e){e.F||(e.F=!0,En(e,"complete"),En(e,"error"))}function bi(e){if(e.h&&"undefined"!=typeof pt&&(!e.C[1]||4!=Ti(e)||2!=e.da()))if(e.v&&4==Ti(e))jn(e.La,0,e);else if(En(e,"readystatechange"),4==Ti(e)){e.h=!1;try{const s=e.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){var i=String(e.I).match(Cr)[1]||null;!i&&mt.self&&mt.self.location&&(i=mt.self.location.protocol.slice(0,-1)),r=!gi.test(i?i.toLowerCase():"")}n=r}if(n)En(e,"complete"),En(e,"success");else{e.m=6;try{var o=2<Ti(e)?e.g.statusText:""}catch(DT){o=""}e.j=o+" ["+e.da()+"]",wi(e)}}finally{_i(e)}}}function _i(e,t){if(e.g){Ei(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||En(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ei(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(mt.clearTimeout(e.A),e.A=null)}function Ti(e){return e.g?e.g.readyState:0}function Si(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case mi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Po){return null}}function Ii(e){let t="";return tn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ki(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ii(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Rr(e,t,n))}function xi(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ci(e){this.Ga=0,this.j=[],this.l=new Wn,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=xi("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=xi("baseRetryDelayMs",5e3,e),this.hb=xi("retryDelaySeedMs",1e4,e),this.eb=xi("forwardChannelMaxRetries",2,e),this.xa=xi("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Jr(e&&e.concurrentRequestLimit),this.Ja=new ii,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ni(e){if(Oi(e),3==e.H){var t=e.W++,n=Ar(e.I);if(Rr(n,"SID",e.K),Rr(n,"RID",t),Rr(n,"TYPE","terminate"),Ri(e,n),(t=new hr(e,e.l,t)).L=2,t.A=Mr(Ar(n)),n=!1,mt.navigator&&mt.navigator.sendBeacon)try{n=mt.navigator.sendBeacon(t.A.toString(),"")}catch(HT){}!n&&mt.Image&&((new Image).src=t.A,n=!0),n||(t.g=Hi(t.l,null),t.g.ha(t.A)),t.G=Date.now(),_r(t)}Wi(e)}function Ai(e){e.g&&(Fi(e),e.g.cancel(),e.g=null)}function Oi(e){Ai(e),e.u&&(mt.clearTimeout(e.u),e.u=null),Vi(e),e.i.cancel(),e.m&&("number"===typeof e.m&&mt.clearTimeout(e.m),e.m=null)}function Pi(e){if(!Xr(e.i)&&!e.m){e.m=!0;var t=e.Na;An||Dn(),On||(An(),On=!0),Pn.add(t,e),e.C=0}}function Di(e,t){var n;n=t?t.m:e.W++;const r=Ar(e.I);Rr(r,"SID",e.K),Rr(r,"RID",n),Rr(r,"AID",e.V),Ri(e,r),e.o&&e.s&&ki(r,e.o,e.s),n=new hr(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Mi(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ti(e.i,n),gr(n,r,t)}function Ri(e,t){e.na&&tn(e.na,(function(e,n){Rr(t,n,e)})),e.h&&xr({},(function(e,n){Rr(t,n,e)}))}function Mi(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Et(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{oi(a,e,"req"+n+"_")}catch(Qs){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Li(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;An||Dn(),On||(An(),On=!0),Pn.add(t,e),e.A=0}}function ji(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=er(Et(e.Ma,e),zi(e,e.A)),e.A++,!0)}function Fi(e){null!=e.B&&(mt.clearTimeout(e.B),e.B=null)}function Ui(e){e.g=new hr(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ar(e.wa);Rr(t,"RID","rpc"),Rr(t,"SID",e.K),Rr(t,"AID",e.V),Rr(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Rr(t,"TO",e.qa),Rr(t,"TYPE","xmlhttp"),Ri(e,t),e.o&&e.s&&ki(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Mr(Ar(t)),n.u=null,n.S=!0,vr(n,e)}function Vi(e){null!=e.v&&(mt.clearTimeout(e.v),e.v=null)}function Bi(e,t){var n=null;if(e.g==t){Vi(e),Fi(e),e.g=null;var r=2}else{if(!ei(e.i,t))return;n=t.F,ni(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;En(r=Qn(),new Zn(r,n)),Pi(e)}else Li(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Zr(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=er(Et(e.Na,e,t),zi(e,e.C)),e.C++,!0))}(e,t)||2==r&&ji(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:qi(e,5);break;case 4:qi(e,10);break;case 3:qi(e,6);break;default:qi(e,2)}}function zi(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function qi(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Et(e.pb,e);n||(n=new Nr("//www.google.com/images/cleardot.gif"),mt.location&&"http"==mt.location.protocol||Or(n,"https"),Mr(n)),function(e,t){const n=new Wn;if(mt.Image){const r=new Image;r.onload=Tt(si,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Tt(si,n,r,"TestLoadImage: error",!1,t),r.onabort=Tt(si,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Tt(si,n,r,"TestLoadImage: timeout",!1,t),mt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Xn(2);e.H=0,e.h&&e.h.za(t),Wi(e),Oi(e)}function Wi(e){if(e.H=0,e.ma=[],e.h){const t=ri(e.i);0==t.length&&0==e.j.length||(Ct(e.ma,t),Ct(e.ma,e.j),e.i.i.length=0,xt(e.j),e.j.length=0),e.h.ya()}}function Ki(e,t,n){var r=n instanceof Nr?Ar(n):new Nr(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Pr(r,r.m);else{var i=mt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new Nr(null);r&&Or(o,r),t&&(o.g=t),i&&Pr(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Rr(r,n,t),Rr(r,"VER",e.ra),Ri(e,r),r}function Hi(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new pi(new ai({ob:n})):new pi(e.va)).Oa(e.J),t}function Gi(){}function Qi(){if(Ft&&!(10<=Number(Qt)))throw Error("Environmental error: no available transport.")}function $i(e,t){_n.call(this),this.g=new Ci(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ot(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ot(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Xi(this)}function Ji(e){cr.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Yi(){ur.call(this),this.status=1}function Xi(e){this.g=e}function Zi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function eo(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function to(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(ht=pi.prototype).Oa=function(e){this.M=e},ht.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sr.g(),this.C=this.u?ir(this.u):ir(sr),this.g.onreadystatechange=Et(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(VT){return void yi(this,VT)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=mt.FormData&&e instanceof mt.FormData,!(0<=kt(vi,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ei(this),0<this.B&&((this.L=function(e){return Ft&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Et(this.ua,this)):this.A=jn(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(VT){yi(this,VT)}},ht.ua=function(){"undefined"!=typeof pt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,En(this,"timeout"),this.abort(8))},ht.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,En(this,"complete"),En(this,"abort"),_i(this))},ht.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_i(this,!0)),pi.$.N.call(this)},ht.La=function(){this.s||(this.G||this.v||this.l?bi(this):this.kb())},ht.kb=function(){bi(this)},ht.isActive=function(){return!!this.g},ht.da=function(){try{return 2<Ti(this)?this.g.status:-1}catch(UT){return-1}},ht.ja=function(){try{return this.g?this.g.responseText:""}catch(UT){return""}},ht.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fi(t)}},ht.Ia=function(){return this.m},ht.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(ht=Ci.prototype).ra=8,ht.H=1,ht.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new hr(this,this.l,e);let o=this.s;if(this.U&&(o?(o=nn(o),on(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Mi(this,i,t),Rr(n=Ar(this.I),"RID",e),Rr(n,"CVER",22),this.F&&Rr(n,"X-HTTP-Session-Id",this.F),Ri(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Ii(o)))+"&"+t:this.o&&ki(n,this.o,o)),ti(this.i,i),this.bb&&Rr(n,"TYPE","init"),this.P?(Rr(n,"$req",t),Rr(n,"SID","null"),i.aa=!0,gr(i,n,null)):gr(i,n,t),this.H=2}}else 3==this.H&&(e?Di(this,e):0==this.j.length||Xr(this.i)||Di(this))},ht.Ma=function(){if(this.u=null,Ui(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=er(Et(this.jb,this),e)}},ht.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xn(10),Ai(this),Ui(this))},ht.ib=function(){null!=this.v&&(this.v=null,Ai(this),ji(this),Xn(19))},ht.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Xn(2)):(this.l.info("Failed to ping google.com"),Xn(1))},ht.isActive=function(){return!!this.h&&this.h.isActive(this)},(ht=Gi.prototype).Ba=function(){},ht.Aa=function(){},ht.za=function(){},ht.ya=function(){},ht.isActive=function(){return!0},ht.Va=function(){},Qi.prototype.g=function(e,t){return new $i(e,t)},St($i,_n),$i.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Xn(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ki(e,null,e.Y),Pi(e)},$i.prototype.close=function(){Ni(this.g)},$i.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Sn(e),e=n);t.j.push(new class{constructor(e,t){this.g=e,this.map=t}}(t.fb++,e)),3==t.H&&Pi(t)},$i.prototype.N=function(){this.g.h=null,delete this.j,Ni(this.g),delete this.g,$i.$.N.call(this)},St(Ji,cr),St(Yi,ur),St(Xi,Gi),Xi.prototype.Ba=function(){En(this.g,"a")},Xi.prototype.Aa=function(e){En(this.g,new Ji(e))},Xi.prototype.za=function(e){En(this.g,new Yi)},Xi.prototype.ya=function(){En(this.g,"b")},St(Zi,(function(){this.blockSize=-1})),Zi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Zi.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)eo(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){eo(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){eo(this,r),i=0;break}}this.h=i,this.i+=t},Zi.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var no={};function ro(e){return-128<=e&&128>e?function(e,t){var n=no;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new to([0|e],0>e?-1:0)})):new to([0|e],0>e?-1:0)}function io(e){if(isNaN(e)||!isFinite(e))return so;if(0>e)return ho(io(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=oo;return new to(t,0)}var oo=4294967296,so=ro(0),ao=ro(1),co=ro(16777216);function uo(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function lo(e){return-1==e.h}function ho(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new to(n,~e.h).add(ao)}function fo(e,t){return e.add(ho(t))}function po(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function mo(e,t){this.g=e,this.h=t}function go(e,t){if(uo(t))throw Error("division by zero");if(uo(e))return new mo(so,so);if(lo(e))return t=go(ho(e),t),new mo(ho(t.g),ho(t.h));if(lo(t))return t=go(e,ho(t)),new mo(ho(t.g),t.h);if(30<e.g.length){if(lo(e)||lo(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ao,r=t;0>=r.X(e);)n=vo(n),r=vo(r);var i=yo(n,1),o=yo(r,1);for(r=yo(r,2),n=yo(n,2);!uo(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=yo(r,1),n=yo(n,1)}return t=fo(e,i.R(t)),new mo(i,t)}for(i=so;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=io(n)).R(t);lo(s)||0<s.X(e);)s=(o=io(n-=r)).R(t);uo(o)&&(o=ao),i=i.add(o),e=fo(e,s)}return new mo(i,e)}function vo(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new to(n,e.h)}function yo(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new to(i,e.h)}(ht=to.prototype).ea=function(){if(lo(this))return-ho(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:oo+r)*t,t*=oo}return e},ht.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(uo(this))return"0";if(lo(this))return"-"+ho(this).toString(e);for(var t=io(Math.pow(e,6)),n=this,r="";;){var i=go(n,t).g,o=((0<(n=fo(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(uo(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},ht.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},ht.X=function(e){return lo(e=fo(this,e))?-1:uo(e)?0:1},ht.abs=function(){return lo(this)?ho(this):this},ht.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new to(n,-2147483648&n[n.length-1]?-1:0)},ht.R=function(e){if(uo(this)||uo(e))return so;if(lo(this))return lo(e)?ho(this).R(ho(e)):ho(ho(this).R(e));if(lo(e))return ho(this.R(ho(e)));if(0>this.X(co)&&0>e.X(co))return io(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=s*c,po(n,2*r+2*i),n[2*r+2*i+1]+=o*c,po(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,po(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,po(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new to(n,0)},ht.gb=function(e){return go(this,e).h},ht.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new to(n,this.h&e.h)},ht.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new to(n,this.h|e.h)},ht.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new to(n,this.h^e.h)},Qi.prototype.createWebChannel=Qi.prototype.g,$i.prototype.send=$i.prototype.u,$i.prototype.open=$i.prototype.m,$i.prototype.close=$i.prototype.close,tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,nr.COMPLETE="complete",or.EventType=ar,ar.OPEN="a",ar.CLOSE="b",ar.ERROR="c",ar.MESSAGE="d",_n.prototype.listen=_n.prototype.O,pi.prototype.listenOnce=pi.prototype.P,pi.prototype.getLastError=pi.prototype.Sa,pi.prototype.getLastErrorCode=pi.prototype.Ia,pi.prototype.getStatus=pi.prototype.da,pi.prototype.getResponseJson=pi.prototype.Wa,pi.prototype.getResponseText=pi.prototype.ja,pi.prototype.send=pi.prototype.ha,pi.prototype.setWithCredentials=pi.prototype.Oa,Zi.prototype.digest=Zi.prototype.l,Zi.prototype.reset=Zi.prototype.reset,Zi.prototype.update=Zi.prototype.j,to.prototype.add=to.prototype.add,to.prototype.multiply=to.prototype.R,to.prototype.modulo=to.prototype.gb,to.prototype.compare=to.prototype.X,to.prototype.toNumber=to.prototype.ea,to.prototype.toString=to.prototype.toString,to.prototype.getBits=to.prototype.D,to.fromNumber=io,to.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ho(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=io(Math.pow(n,8)),i=so,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=io(Math.pow(n,s)),i=i.R(s).add(io(a))):i=(i=i.R(r)).add(io(a))}return i};var wo=ft.createWebChannelTransport=function(){return new Qi},bo=ft.getStatEventTarget=function(){return Qn()},_o=ft.ErrorCode=tr,Eo=ft.EventType=nr,To=ft.Event=Hn,So=ft.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Io=(ft.FetchXmlHttpFactory=ai,ft.WebChannel=or),ko=ft.XhrIo=pi,xo=ft.Md5=Zi,Co=ft.Integer=to;const No="@firebase/firestore";class Ao{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ao.UNAUTHENTICATED=new Ao(null),Ao.GOOGLE_CREDENTIALS=new Ao("google-credentials-uid"),Ao.FIRST_PARTY=new Ao("first-party-uid"),Ao.MOCK_USER=new Ao("mock-user");let Oo="10.10.0";const Po=new x("@firebase/firestore");function Do(){return Po.logLevel}function Ro(e){if(Po.logLevel<=E.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(jo);Po.debug("Firestore (".concat(Oo,"): ").concat(e),...i)}}function Mo(e){if(Po.logLevel<=E.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(jo);Po.error("Firestore (".concat(Oo,"): ").concat(e),...i)}}function Lo(e){if(Po.logLevel<=E.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(jo);Po.warn("Firestore (".concat(Oo,"): ").concat(e),...i)}}function jo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(MT){return e}}function Fo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Oo,") INTERNAL ASSERTION FAILED: ")+e;throw Mo(t),new Error(t)}function Uo(e,t){e||Fo()}function Vo(e,t){return e}const Bo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zo extends ot{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class qo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Wo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ko{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ao.UNAUTHENTICATED)))}shutdown(){}}class Ho{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Go{constructor(e){this.t=e,this.currentUser=Ao.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new qo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qo,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Ro("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Ro("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qo)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ro("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Uo("string"==typeof t.accessToken),new Wo(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Uo(null===e||"string"==typeof e),new Ao(e)}}class Qo{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ao.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $o{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Qo(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ao.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Jo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yo{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ro("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ro("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ro("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ro("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Uo("string"==typeof e.token),this.R=e.token,new Jo(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Xo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Zo{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Xo(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function es(e,t){return e<t?-1:e>t?1:0}function ts(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function ns(e){return e+"\0"}class rs{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new zo(Bo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new zo(Bo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new zo(Bo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new zo(Bo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rs.fromMillis(Date.now())}static fromDate(e){return rs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new rs(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?es(this.nanoseconds,e.nanoseconds):es(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class is{constructor(e){this.timestamp=e}static fromTimestamp(e){return new is(e)}static min(){return new is(new rs(0,0))}static max(){return new is(new rs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class os{constructor(e,t,n){void 0===t?t=0:t>e.length&&Fo(),void 0===n?n=e.length-t:n>e.length-t&&Fo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===os.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof os?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ss extends os{construct(e,t,n){return new ss(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new zo(Bo.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ss(e)}static emptyPath(){return new ss([])}}const as=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cs extends os{construct(e,t,n){return new cs(e,t,n)}static isValidIdentifier(e){return as.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cs(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new zo(Bo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new zo(Bo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new zo(Bo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new zo(Bo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cs(t)}static emptyPath(){return new cs([])}}class us{constructor(e){this.path=e}static fromPath(e){return new us(ss.fromString(e))}static fromName(e){return new us(ss.fromString(e).popFirst(5))}static empty(){return new us(ss.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ss.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ss.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new us(new ss(e.slice()))}}class ls{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function hs(e){return e.fields.find((e=>2===e.kind))}function ds(e){return e.fields.filter((e=>2!==e.kind))}ls.UNKNOWN_ID=-1;class fs{constructor(e,t){this.fieldPath=e,this.kind=t}}class ps{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ps(0,vs.min())}}function ms(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=is.fromTimestamp(1e9===r?new rs(n+1,0):new rs(n,r));return new vs(i,us.empty(),t)}function gs(e){return new vs(e.readTime,e.key,-1)}class vs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new vs(is.min(),us.empty(),-1)}static max(){return new vs(is.max(),us.empty(),-1)}}function ys(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=us.comparator(e.documentKey,t.documentKey),0!==n?n:es(e.largestBatchId,t.largestBatchId))}const ws="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bs{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function _s(e){if(e.code!==Bo.FAILED_PRECONDITION||e.message!==ws)throw e;Ro("LocalStore","Unexpectedly lost primary lease")}class Es{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Es(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Es?t:Es.resolve(t)}catch(e){return Es.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Es.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Es.reject(t)}static resolve(e){return new Es(((t,n)=>{t(e)}))}static reject(e){return new Es(((t,n)=>{n(e)}))}static waitFor(e){return new Es(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Es.resolve(!1);for(const n of e)t=t.next((e=>e?Es.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Es(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{o[c]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Es(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Ts{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new qo,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ks(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Os(t.target.error);this.V.reject(new ks(e,n))}}static open(e,t,n,r){try{return new Ts(t,e.transaction(r,n))}catch(e){throw new ks(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ro("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Cs(t)}}class Ss{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Ss.S(rt())&&Mo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ro("SimpleDb","Removing database:",e),Ns(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!function(){try{return"object"===typeof indexedDB}catch(e){return!1}}())return!1;if(Ss.C())return!0;const e=rt(),t=Ss.S(e),n=0<t&&t<10,r=Ss.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Ro("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new ks(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new zo(Bo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new zo(Bo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new ks(e,r))},r.onupgradeneeded=e=>{Ro("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Ro("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=Ts.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Es.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(Ro("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Is{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ns(this.k.delete())}}class ks extends zo{constructor(e,t){super(Bo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function xs(e){return"IndexedDbTransactionError"===e.name}class Cs{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ro("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ro("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ns(n)}add(e){return Ro("SimpleDb","ADD",this.store.name,e,e),Ns(this.store.add(e))}get(e){return Ns(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ro("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ro("SimpleDb","DELETE",this.store.name,e),Ns(this.store.delete(e))}count(){return Ro("SimpleDb","COUNT",this.store.name),Ns(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Es(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Es(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Ro("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new Es(((n,r)=>{t.onerror=e=>{const t=Os(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new Es(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new Is(i),s=t(i.primaryKey,i.value,o);if(s instanceof Es){const e=s.catch((e=>(o.done(),Es.reject(e))));n.push(e)}o.isDone?r():null===o.$?i.continue():i.continue(o.$)}})).next((()=>Es.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ns(e){return new Es(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Os(e.target.error);n(t)}}))}let As=!1;function Os(e){const t=Ss.S(rt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new zo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return As||(As=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ps{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Ro("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ro("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){xs(e)?Ro("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await _s(e)}await this.ee(6e4)}))}}class Ds{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return Es.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Ro("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Ro("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=gs(t);ys(r,n)>0&&(n=r)})),new vs(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Rs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ms(e){return null==e}function Ls(e){return 0===e&&1/e==-1/0}function js(e){return"number"==typeof e&&Number.isInteger(e)&&!Ls(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Fs(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Vs(t)),t=Us(e.get(n),t);return Vs(t)}function Us(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Vs(e){return e+"\x01\x01"}function Bs(e){const t=e.length;if(Uo(t>=2),2===t)return Uo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ss.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&Fo(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:Fo()}o=t+2}return new ss(r)}Rs._e=-1;const zs=["userId","batchId"];function qs(e,t){return[e,Fs(t)]}function Ws(e,t,n){return[e,Fs(t),n]}const Ks={},Hs=["prefixPath","collectionGroup","readTime","documentId"],Gs=["prefixPath","collectionGroup","documentId"],Qs=["collectionGroup","readTime","prefixPath","documentId"],$s=["canonicalId","targetId"],Js=["targetId","path"],Ys=["path","targetId"],Xs=["collectionId","parent"],Zs=["indexId","uid"],ea=["uid","sequenceNumber"],ta=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],na=["indexId","uid","orderedDocumentKey"],ra=["userId","collectionPath","documentId"],ia=["userId","collectionPath","largestBatchId"],oa=["userId","collectionGroup","largestBatchId"],sa=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aa=[...sa,"documentOverlays"],ca=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ua=ca,la=[...ua,"indexConfiguration","indexState","indexEntries"];class ha extends bs{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function da(e,t){const n=Vo(e);return Ss.M(n.ae,t)}function fa(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function pa(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ma(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ga{constructor(e,t){this.comparator=e,this.root=t||ya.EMPTY}insert(e,t){return new ga(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ya.BLACK,null,null))}remove(e){return new ga(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ya.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new va(this.root,e,this.comparator,!1)}getReverseIterator(){return new va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new va(this.root,e,this.comparator,!0)}}class va{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ya{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ya.RED,this.left=null!=r?r:ya.EMPTY,this.right=null!=i?i:ya.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ya(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ya.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ya.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ya.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ya.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fo();if(this.right.isRed())throw Fo();const e=this.left.check();if(e!==this.right.check())throw Fo();return e+(this.isRed()?0:1)}}ya.EMPTY=null,ya.RED=!0,ya.BLACK=!1,ya.EMPTY=new class{constructor(){this.size=0}get key(){throw Fo()}get value(){throw Fo()}get color(){throw Fo()}get left(){throw Fo()}get right(){throw Fo()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ya(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wa{constructor(e){this.comparator=e,this.data=new ga(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ba(this.data.getIterator())}getIteratorFrom(e){return new ba(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof wa))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new wa(this.comparator);return t.data=e,t}}class ba{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _a(e){return e.hasNext()?e.getNext():void 0}class Ea{constructor(e){this.fields=e,e.sort(cs.comparator)}static empty(){return new Ea([])}unionWith(e){let t=new wa(cs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ea(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ts(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ta extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sa{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ta("Invalid base64 string: "+e):e}}(e);return new Sa(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Sa(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return es(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sa.EMPTY_BYTE_STRING=new Sa("");const Ia=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ka(e){if(Uo(!!e),"string"==typeof e){let t=0;const n=Ia.exec(e);if(Uo(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xa(e.seconds),nanos:xa(e.nanos)}}function xa(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ca(e){return"string"==typeof e?Sa.fromBase64String(e):Sa.fromUint8Array(e)}function Na(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Aa(e){const t=e.mapValue.fields.__previous_value__;return Na(t)?Aa(t):t}function Oa(e){const t=ka(e.mapValue.fields.__local_write_time__.timestampValue);return new rs(t.seconds,t.nanos)}class Pa{constructor(e,t,n,r,i,o,s,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=c}}class Da{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Da("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}const Ra={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ma={nullValue:"NULL_VALUE"};function La(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Na(e)?4:Ja(e)?9007199254740991:10:Fo()}function ja(e,t){if(e===t)return!0;const n=La(e);if(n!==La(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Oa(e).isEqual(Oa(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ka(e.timestampValue),r=ka(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ca(e.bytesValue).isEqual(Ca(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xa(e.geoPointValue.latitude)===xa(t.geoPointValue.latitude)&&xa(e.geoPointValue.longitude)===xa(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xa(e.integerValue)===xa(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=xa(e.doubleValue),r=xa(t.doubleValue);return n===r?Ls(n)===Ls(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ts(e.arrayValue.values||[],t.arrayValue.values||[],ja);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(fa(n)!==fa(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ja(n[i],r[i])))return!1;return!0}(e,t);default:return Fo()}}function Fa(e,t){return void 0!==(e.values||[]).find((e=>ja(e,t)))}function Ua(e,t){if(e===t)return 0;const n=La(e),r=La(t);if(n!==r)return es(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return es(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=xa(e.integerValue||e.doubleValue),r=xa(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Va(e.timestampValue,t.timestampValue);case 4:return Va(Oa(e),Oa(t));case 5:return es(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ca(e),r=Ca(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=es(n[i],r[i]);if(0!==e)return e}return es(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=es(xa(e.latitude),xa(t.latitude));return 0!==n?n:es(xa(e.longitude),xa(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ua(n[i],r[i]);if(e)return e}return es(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ra.mapValue&&t===Ra.mapValue)return 0;if(e===Ra.mapValue)return 1;if(t===Ra.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=es(r[s],o[s]);if(0!==e)return e;const t=Ua(n[r[s]],i[o[s]]);if(0!==t)return t}return es(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Fo()}}function Va(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return es(e,t);const n=ka(e),r=ka(t),i=es(n.seconds,r.seconds);return 0!==i?i:es(n.nanos,r.nanos)}function Ba(e){return za(e)}function za(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ka(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ca(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return us.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=za(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(za(e.fields[i]));return n+"}"}(e.mapValue):Fo()}function qa(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Wa(e){return!!e&&"integerValue"in e}function Ka(e){return!!e&&"arrayValue"in e}function Ha(e){return!!e&&"nullValue"in e}function Ga(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qa(e){return!!e&&"mapValue"in e}function $a(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return pa(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=$a(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=$a(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ja(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ya(e){return"nullValue"in e?Ma:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?qa(Da.empty(),us.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Fo()}function Xa(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?qa(Da.empty(),us.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ra:Fo()}function Za(e,t){const n=Ua(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ec(e,t){const n=Ua(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class tc{constructor(e){this.value=e}static empty(){return new tc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Qa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$a(t)}setAll(e){let t=cs.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=$a(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Qa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ja(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Qa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){pa(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new tc($a(this.value))}}function nc(e){const t=[];return pa(e.fields,((e,n)=>{const r=new cs([e]);if(Qa(n)){const e=nc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ea(t)}class rc{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new rc(e,0,is.min(),is.min(),is.min(),tc.empty(),0)}static newFoundDocument(e,t,n,r){return new rc(e,1,t,is.min(),n,r,0)}static newNoDocument(e,t){return new rc(e,2,t,is.min(),is.min(),tc.empty(),0)}static newUnknownDocument(e,t){return new rc(e,3,t,is.min(),is.min(),tc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(is.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=is.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ic{constructor(e,t){this.position=e,this.inclusive=t}}function oc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?us.comparator(us.fromName(s.referenceValue),n.key):Ua(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function sc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ja(e.position[n],t.position[n]))return!1;return!0}class ac{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function cc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class uc{}class lc extends uc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new bc(e,t,n):"array-contains"===t?new Sc(e,n):"in"===t?new Ic(e,n):"not-in"===t?new kc(e,n):"array-contains-any"===t?new xc(e,n):new lc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new _c(e,n):new Ec(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ua(t,this.value)):null!==t&&La(this.value)===La(t)&&this.matchesComparison(Ua(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hc extends uc{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new hc(e,t)}matches(e){return dc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function dc(e){return"and"===e.op}function fc(e){return"or"===e.op}function pc(e){return mc(e)&&dc(e)}function mc(e){for(const t of e.filters)if(t instanceof hc)return!1;return!0}function gc(e){if(e instanceof lc)return e.field.canonicalString()+e.op.toString()+Ba(e.value);if(pc(e))return e.filters.map((e=>gc(e))).join(",");{const t=e.filters.map((e=>gc(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function vc(e,t){return e instanceof lc?function(e,t){return t instanceof lc&&e.op===t.op&&e.field.isEqual(t.field)&&ja(e.value,t.value)}(e,t):e instanceof hc?function(e,t){return t instanceof hc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&vc(n,t.filters[r])),!0)}(e,t):void Fo()}function yc(e,t){const n=e.filters.concat(t);return hc.create(n,e.op)}function wc(e){return e instanceof lc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ba(e.value))}(e):e instanceof hc?function(e){return e.op.toString()+" {"+e.getFilters().map(wc).join(" ,")+"}"}(e):"Filter"}class bc extends lc{constructor(e,t,n){super(e,t,n),this.key=us.fromName(n.referenceValue)}matches(e){const t=us.comparator(e.key,this.key);return this.matchesComparison(t)}}class _c extends lc{constructor(e,t){super(e,"in",t),this.keys=Tc("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ec extends lc{constructor(e,t){super(e,"not-in",t),this.keys=Tc("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Tc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>us.fromName(e.referenceValue)))}class Sc extends lc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ka(t)&&Fa(t.arrayValue,this.value)}}class Ic extends lc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fa(this.value.arrayValue,t)}}class kc extends lc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Fa(this.value.arrayValue,t)}}class xc extends lc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ka(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Fa(this.value.arrayValue,e)))}}class Cc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function Nc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Cc(e,t,n,r,i,o,s)}function Ac(e){const t=Vo(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>gc(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ms(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ba(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ba(e))).join(",")),t.ce=e}return t.ce}function Oc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!cc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sc(e.startAt,t.startAt)&&sc(e.endAt,t.endAt)}function Pc(e){return us.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Dc(e,t){return e.filters.filter((e=>e instanceof lc&&e.field.isEqual(t)))}function Rc(e,t,n){let r=Ma,i=!0;for(const o of Dc(e,t)){let e=Ma,t=!0;switch(o.op){case"<":case"<=":e=Ya(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=Ma}Za({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Za({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Mc(e,t,n){let r=Ra,i=!0;for(const o of Dc(e,t)){let e=Ra,t=!0;switch(o.op){case">=":case">":e=Xa(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=Ra}ec({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];ec({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Lc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function jc(e,t,n,r,i,o,s,a){return new Lc(e,t,n,r,i,o,s,a)}function Fc(e){return new Lc(e)}function Uc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Vc(e){return null!==e.collectionGroup}function Bc(e){const t=Vo(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new wa(cs.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new ac(r,n))})),e.has(cs.keyField().canonicalString())||t.le.push(new ac(cs.keyField(),n))}return t.le}function zc(e){const t=Vo(e);return t.he||(t.he=qc(t,Bc(e))),t.he}function qc(e,t){if("F"===e.limitType)return Nc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ac(e.field,t)}));const n=e.endAt?new ic(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ic(e.startAt.position,e.startAt.inclusive):null;return Nc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Wc(e,t){const n=e.filters.concat([t]);return new Lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Kc(e,t,n){return new Lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hc(e,t){return Oc(zc(e),zc(t))&&e.limitType===t.limitType}function Gc(e){return"".concat(Ac(zc(e)),"|lt:").concat(e.limitType)}function Qc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>wc(e))).join(", "),"]")),Ms(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ba(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ba(e))).join(",")),"Target(".concat(t,")")}(zc(e)),"; limitType=").concat(e.limitType,")")}function $c(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):us.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Bc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=oc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Bc(e),t))&&!(e.endAt&&!function(e,t,n){const r=oc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Bc(e),t))}(e,t)}function Jc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yc(e){return(t,n)=>{let r=!1;for(const i of Bc(e)){const e=Xc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Xc(e,t,n){const r=e.field.isKeyField()?us.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ua(r,i):Fo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Fo()}}class Zc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){pa(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ma(this.inner)}size(){return this.innerSize}}const eu=new ga(us.comparator);function tu(){return eu}const nu=new ga(us.comparator);function ru(){let e=nu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function iu(e){let t=nu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ou(){return au()}function su(){return au()}function au(){return new Zc((e=>e.toString()),((e,t)=>e.isEqual(t)))}const cu=new ga(us.comparator),uu=new wa(us.comparator);function lu(){let e=uu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const hu=new wa(es);function du(){return hu}function fu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ls(t)?"-0":t}}function pu(e){return{integerValue:""+e}}function mu(e,t){return js(t)?pu(t):fu(e,t)}class gu{constructor(){this._=void 0}}function vu(e,t,n){return e instanceof bu?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Na(t)&&(t=Aa(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof _u?Eu(e,t):e instanceof Tu?Su(e,t):function(e,t){const n=wu(e,t),r=ku(n)+ku(e.Ie);return Wa(n)&&Wa(e.Ie)?pu(r):fu(e.serializer,r)}(e,t)}function yu(e,t,n){return e instanceof _u?Eu(e,t):e instanceof Tu?Su(e,t):n}function wu(e,t){return e instanceof Iu?function(e){return Wa(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class bu extends gu{}class _u extends gu{constructor(e){super(),this.elements=e}}function Eu(e,t){const n=xu(t);for(const r of e.elements)n.some((e=>ja(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Tu extends gu{constructor(e){super(),this.elements=e}}function Su(e,t){let n=xu(t);for(const r of e.elements)n=n.filter((e=>!ja(e,r)));return{arrayValue:{values:n}}}class Iu extends gu{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function ku(e){return xa(e.integerValue||e.doubleValue)}function xu(e){return Ka(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cu{constructor(e,t){this.field=e,this.transform=t}}class Nu{constructor(e,t){this.version=e,this.transformResults=t}}class Au{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Au}static exists(e){return new Au(void 0,e)}static updateTime(e){return new Au(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ou(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Pu{}function Du(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qu(e.key,Au.none()):new Fu(e.key,e.data,Au.none());{const n=e.data,r=tc.empty();let i=new wa(cs.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Uu(e.key,r,new Ea(i.toArray()),Au.none())}}function Ru(e,t,n){e instanceof Fu?function(e,t,n){const r=e.value.clone(),i=Bu(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Uu?function(e,t,n){if(!Ou(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Bu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Vu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Mu(e,t,n,r){return e instanceof Fu?function(e,t,n,r){if(!Ou(e.precondition,t))return n;const i=e.value.clone(),o=zu(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Uu?function(e,t,n,r){if(!Ou(e.precondition,t))return n;const i=zu(e.fieldTransforms,r,t),o=t.data;return o.setAll(Vu(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Ou(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Lu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=wu(r.transform,e||null);null!=i&&(null===n&&(n=tc.empty()),n.set(r.field,i))}return n||null}function ju(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ts(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof _u&&t instanceof _u||e instanceof Tu&&t instanceof Tu?ts(e.elements,t.elements,ja):e instanceof Iu&&t instanceof Iu?ja(e.Ie,t.Ie):e instanceof bu&&t instanceof bu}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Fu extends Pu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Uu extends Pu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vu(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Bu(e,t,n){const r=new Map;Uo(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,yu(s,a,n[i]))}return r}function zu(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,vu(e,o,t))}return r}class qu extends Pu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wu extends Pu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ku{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ru(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Mu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Mu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=su();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Du(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(is.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),lu())}isEqual(e){return this.batchId===e.batchId&&ts(this.mutations,e.mutations,((e,t)=>ju(e,t)))&&ts(this.baseMutations,e.baseMutations,((e,t)=>ju(e,t)))}}class Hu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Uo(e.mutations.length===n.length);let r=cu;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Hu(e,t,n,r)}}class Gu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Qu{constructor(e,t){this.count=e,this.unchangedNames=t}}var $u,Ju;function Yu(e){switch(e){default:return Fo();case Bo.CANCELLED:case Bo.UNKNOWN:case Bo.DEADLINE_EXCEEDED:case Bo.RESOURCE_EXHAUSTED:case Bo.INTERNAL:case Bo.UNAVAILABLE:case Bo.UNAUTHENTICATED:return!1;case Bo.INVALID_ARGUMENT:case Bo.NOT_FOUND:case Bo.ALREADY_EXISTS:case Bo.PERMISSION_DENIED:case Bo.FAILED_PRECONDITION:case Bo.ABORTED:case Bo.OUT_OF_RANGE:case Bo.UNIMPLEMENTED:case Bo.DATA_LOSS:return!0}}function Xu(e){if(void 0===e)return Mo("GRPC error has no .code"),Bo.UNKNOWN;switch(e){case $u.OK:return Bo.OK;case $u.CANCELLED:return Bo.CANCELLED;case $u.UNKNOWN:return Bo.UNKNOWN;case $u.DEADLINE_EXCEEDED:return Bo.DEADLINE_EXCEEDED;case $u.RESOURCE_EXHAUSTED:return Bo.RESOURCE_EXHAUSTED;case $u.INTERNAL:return Bo.INTERNAL;case $u.UNAVAILABLE:return Bo.UNAVAILABLE;case $u.UNAUTHENTICATED:return Bo.UNAUTHENTICATED;case $u.INVALID_ARGUMENT:return Bo.INVALID_ARGUMENT;case $u.NOT_FOUND:return Bo.NOT_FOUND;case $u.ALREADY_EXISTS:return Bo.ALREADY_EXISTS;case $u.PERMISSION_DENIED:return Bo.PERMISSION_DENIED;case $u.FAILED_PRECONDITION:return Bo.FAILED_PRECONDITION;case $u.ABORTED:return Bo.ABORTED;case $u.OUT_OF_RANGE:return Bo.OUT_OF_RANGE;case $u.UNIMPLEMENTED:return Bo.UNIMPLEMENTED;case $u.DATA_LOSS:return Bo.DATA_LOSS;default:return Fo()}}(Ju=$u||($u={}))[Ju.OK=0]="OK",Ju[Ju.CANCELLED=1]="CANCELLED",Ju[Ju.UNKNOWN=2]="UNKNOWN",Ju[Ju.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ju[Ju.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ju[Ju.NOT_FOUND=5]="NOT_FOUND",Ju[Ju.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ju[Ju.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ju[Ju.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ju[Ju.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ju[Ju.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ju[Ju.ABORTED=10]="ABORTED",Ju[Ju.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ju[Ju.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ju[Ju.INTERNAL=13]="INTERNAL",Ju[Ju.UNAVAILABLE=14]="UNAVAILABLE",Ju[Ju.DATA_LOSS=15]="DATA_LOSS";let Zu=null;function el(){return new TextEncoder}const tl=new Co([4294967295,4294967295],0);function nl(e){const t=el().encode(e),n=new xo;return n.update(t),new Uint8Array(n.digest())}function rl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Co([n,r],0),new Co([i,o],0)]}class il{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ol("Invalid padding: ".concat(t));if(n<0)throw new ol("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ol("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ol("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Co.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Co.fromNumber(n)));return 1===r.compare(tl)&&(r=new Co([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=nl(e),[n,r]=rl(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new il(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=nl(e),[n,r]=rl(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sl{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new sl(is.min(),r,new ga(es),tu(),lu())}}class al{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new al(n,t,lu(),lu(),lu())}}class cl{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class ul{constructor(e,t){this.targetId=e,this.fe=t}}class ll{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sa.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class hl{constructor(){this.ge=0,this.pe=pl(),this.ye=Sa.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=lu(),t=lu(),n=lu();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Fo()}})),new al(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=pl()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Uo(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class dl{constructor(e){this.Be=e,this.ke=new Map,this.qe=tu(),this.Qe=fl(),this.Ke=new ga(es)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Fo()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Pc(i))if(0===n){const e=new us(i.path);this.We(t,e,rc.newNoDocument(e,is.min()))}else Uo(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Zu||Zu.tt(function(e,t,n,r,i){var o,s,a,c,u,l;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(c=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(l=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Be.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=Ca(n).toUint8Array()}catch(e){if(e instanceof Ta)return Lo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new il(o,r,i)}catch(e){return Lo(e instanceof ol?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Be.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Pc(i.target)){const t=new us(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,rc.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=lu();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new sl(e,t,this.Ke,this.qe,n);return this.qe=tu(),this.Qe=fl(),this.Ke=new ga(es),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new hl,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new wa(es),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Ro("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new hl),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function fl(){return new ga(us.comparator)}function pl(){return new ga(us.comparator)}const ml={asc:"ASCENDING",desc:"DESCENDING"},gl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vl={and:"AND",or:"OR"};class yl{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wl(e,t){return e.useProto3Json||Ms(t)?t:{value:t}}function bl(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function _l(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function El(e,t){return bl(e,t.toTimestamp())}function Tl(e){return Uo(!!e),is.fromTimestamp(function(e){const t=ka(e);return new rs(t.seconds,t.nanos)}(e))}function Sl(e,t){return Il(e,t).canonicalString()}function Il(e,t){const n=function(e){return new ss(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function kl(e){const t=ss.fromString(e);return Uo(Ql(t)),t}function xl(e,t){return Sl(e.databaseId,t.path)}function Cl(e,t){const n=kl(t);if(n.get(1)!==e.databaseId.projectId)throw new zo(Bo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new zo(Bo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new us(Pl(n))}function Nl(e,t){return Sl(e.databaseId,t)}function Al(e){const t=kl(e);return 4===t.length?ss.emptyPath():Pl(t)}function Ol(e){return new ss(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Pl(e){return Uo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Dl(e,t,n){return{name:xl(e,t),fields:n.value.mapValue.fields}}function Rl(e,t,n){const r=Cl(e,t.name),i=Tl(t.updateTime),o=t.createTime?Tl(t.createTime):is.min(),s=new tc({mapValue:{fields:t.fields}}),a=rc.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ml(e,t){let n;if(t instanceof Fu)n={update:Dl(e,t.key,t.value)};else if(t instanceof qu)n={delete:xl(e,t.key)};else if(t instanceof Uu)n={update:Dl(e,t.key,t.data),updateMask:Gl(t.fieldMask)};else{if(!(t instanceof Wu))return Fo();n={verify:xl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof bu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _u)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Tu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Iu)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Fo()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:El(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Fo()}(e,t.precondition)),n}function Ll(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Au.updateTime(Tl(e.updateTime)):void 0!==e.exists?Au.exists(e.exists):Au.none()}(t.currentDocument):Au.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Uo("REQUEST_TIME"===t.setToServerValue),n=new bu;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new _u(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Tu(e)}else"increment"in t?n=new Iu(e,t.increment):Fo();const r=cs.fromServerFormat(t.fieldPath);return new Cu(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Cl(e,t.update.name),o=new tc({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ea(t.map((e=>cs.fromServerFormat(e))))}(t.updateMask);return new Uu(i,o,e,n,r)}return new Fu(i,o,n,r)}if(t.delete){const r=Cl(e,t.delete);return new qu(r,n)}if(t.verify){const r=Cl(e,t.verify);return new Wu(r,n)}return Fo()}function jl(e,t){return{documents:[Nl(e,t.path)]}}function Fl(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Nl(e,i);const o=function(e){if(0!==e.length)return Hl(hc.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Wl(e.field),direction:Bl(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=wl(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Ul(e){let t=Al(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Uo(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Vl(e);return t instanceof hc&&pc(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new ac(Kl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ms(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new ic(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new ic(n,t)}(n.endAt)),jc(t,i,s,o,a,"F",c,u)}function Vl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Kl(e.unaryFilter.field);return lc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Kl(e.unaryFilter.field);return lc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Kl(e.unaryFilter.field);return lc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Kl(e.unaryFilter.field);return lc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fo()}}(e):void 0!==e.fieldFilter?function(e){return lc.create(Kl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return hc.create(e.compositeFilter.filters.map((e=>Vl(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Fo()}}(e.compositeFilter.op))}(e):Fo()}function Bl(e){return ml[e]}function zl(e){return gl[e]}function ql(e){return vl[e]}function Wl(e){return{fieldPath:e.canonicalString()}}function Kl(e){return cs.fromServerFormat(e.fieldPath)}function Hl(e){return e instanceof lc?function(e){if("=="===e.op){if(Ga(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NAN"}};if(Ha(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ga(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NOT_NAN"}};if(Ha(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wl(e.field),op:zl(e.op),value:e.value}}}(e):e instanceof hc?function(e){const t=e.getFilters().map((e=>Hl(e)));return 1===t.length?t[0]:{compositeFilter:{op:ql(e.op),filters:t}}}(e):Fo()}function Gl(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ql(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class $l{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:is.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:is.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sa.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new $l(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $l(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Jl{constructor(e){this.ct=e}}function Yl(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xl(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:xl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:bl(e,t.version.toTimestamp()),createTime:bl(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zl(t.version)};else{if(!t.isUnknownDocument())return Fo();r.unknownDocument={path:n.path.toArray(),version:Zl(t.version)}}return r}function Xl(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Zl(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function eh(e){const t=new rs(e.seconds,e.nanoseconds);return is.fromTimestamp(t)}function th(e,t){const n=(t.baseMutations||[]).map((t=>Ll(e.ct,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>Ll(e.ct,t))),i=rs.fromMillis(t.localWriteTimeMs);return new Ku(t.batchId,i,n,r)}function nh(e){const t=eh(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?eh(e.lastLimboFreeSnapshotVersion):is.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Uo(1===e.documents.length),zc(Fc(Al(e.documents[0])))}(e.query):function(e){return zc(Ul(e))}(e.query),new $l(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Sa.fromBase64String(e.resumeToken))}function rh(e,t){const n=Zl(t.snapshotVersion),r=Zl(t.lastLimboFreeSnapshotVersion);let i;i=Pc(t.target)?jl(e.ct,t.target):Fl(e.ct,t.target).ut;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ac(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ih(e){const t=Ul({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Kc(t,t.limit,"L"):t}function oh(e,t){return new Gu(t.largestBatchId,Ll(e.ct,t.overlayMutation))}function sh(e,t){const n=t.path.lastSegment();return[e,Fs(t.path.popLast()),n]}function ah(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Zl(r.readTime),documentKey:Fs(r.documentKey.path),largestBatchId:r.largestBatchId}}class ch{getBundleMetadata(e,t){return uh(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:eh(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return uh(e).put(function(e){return{bundleId:e.id,createTime:Zl(Tl(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return lh(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:ih(e.bundledQuery),readTime:eh(e.readTime)}}(e)}))}saveNamedQuery(e,t){return lh(e).put(function(e){return{name:e.name,readTime:Zl(Tl(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function uh(e){return da(e,"bundles")}function lh(e){return da(e,"namedQueries")}class hh{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new hh(e,n)}getOverlay(e,t){return dh(e).get(sh(this.userId,t)).next((e=>e?oh(this.serializer,e):null))}getOverlays(e,t){const n=ou();return Es.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new Gu(t,i);r.push(this.ht(e,o))})),Es.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Fs(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(dh(e).H("collectionPathOverlayIndex",r))})),Es.waitFor(i)}getOverlaysForCollection(e,t,n){const r=ou(),i=Fs(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return dh(e).W("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=oh(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=ou();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dh(e).Y({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=oh(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return dh(e).put(function(e,t,n){const[r,i,o]=sh(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ml(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function dh(e){return da(e,"documentOverlays")}class fh{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(xa(e.integerValue));else if("doubleValue"in e){const n=xa(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Ls(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ca(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Ja(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Fo()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),us.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function ph(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function mh(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=ph(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}fh.bt=new fh;class gh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=mh(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=mh(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class vh{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class yh{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class wh{constructor(){this.Gt=new gh,this.zt=new vh(this.Gt),this.jt=new yh(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class bh{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new bh(this.indexId,this.documentKey,this.arrayValue,n)}}function _h(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Eh(e.arrayValue,t.arrayValue),0!==n?n:(n=Eh(e.directionalValue,t.directionalValue),0!==n?n:us.comparator(e.documentKey,t.documentKey)))}function Eh(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Th{constructor(e){this.Yt=new wa(((e,t)=>cs.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Uo(e.collectionGroup===this.collectionId),this.en)return!1;const t=hs(e);if(void 0!==t&&!this.nn(t))return!1;const n=ds(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],e))return!1}return!0}on(){if(this.en)return null;let e=new wa(cs.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new fs(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new fs(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new fs(n.field,"asc"===n.dir?0:1)));return new ls(ls.UNKNOWN_ID,this.collectionId,t,ps.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Sh(e){var t,n;if(Uo(e instanceof lc||e instanceof hc),e instanceof lc){if(e instanceof Ic){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>lc.create(e.field,"==",t))))||[];return hc.create(r,"or")}return e}const r=e.filters.map((e=>Sh(e)));return hc.create(r,e.op)}function Ih(e){if(0===e.getFilters().length)return[];const t=Nh(Sh(e));return Uo(Ch(t)),kh(t)||xh(t)?[t]:t.getFilters()}function kh(e){return e instanceof lc}function xh(e){return e instanceof hc&&pc(e)}function Ch(e){return kh(e)||xh(e)||function(e){if(e instanceof hc&&fc(e)){for(const t of e.getFilters())if(!kh(t)&&!xh(t))return!1;return!0}return!1}(e)}function Nh(e){if(Uo(e instanceof lc||e instanceof hc),e instanceof lc)return e;if(1===e.filters.length)return Nh(e.filters[0]);const t=e.filters.map((e=>Nh(e)));let n=hc.create(t,e.op);return n=Ph(n),Ch(n)?n:(Uo(n instanceof hc),Uo(dc(n)),Uo(n.filters.length>1),n.filters.reduce(((e,t)=>Ah(e,t))))}function Ah(e,t){let n;return Uo(e instanceof lc||e instanceof hc),Uo(t instanceof lc||t instanceof hc),n=e instanceof lc?t instanceof lc?function(e,t){return hc.create([e,t],"and")}(e,t):Oh(e,t):t instanceof lc?Oh(t,e):function(e,t){if(Uo(e.filters.length>0&&t.filters.length>0),dc(e)&&dc(t))return yc(e,t.getFilters());const n=fc(e)?e:t,r=fc(e)?t:e,i=n.filters.map((e=>Ah(e,r)));return hc.create(i,"or")}(e,t),Ph(n)}function Oh(e,t){if(dc(t))return yc(t,e.getFilters());{const n=t.filters.map((t=>Ah(e,t)));return hc.create(n,"or")}}function Ph(e){if(Uo(e instanceof lc||e instanceof hc),e instanceof lc)return e;const t=e.getFilters();if(1===t.length)return Ph(t[0]);if(mc(e))return e;const n=t.map((e=>Ph(e))),r=[];return n.forEach((t=>{t instanceof lc?r.push(t):t instanceof hc&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:hc.create(r,e.op)}class Dh{constructor(){this._n=new Rh}addToCollectionParentIndex(e,t){return this._n.add(t),Es.resolve()}getCollectionParents(e,t){return Es.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Es.resolve()}deleteFieldIndex(e,t){return Es.resolve()}deleteAllFieldIndexes(e){return Es.resolve()}createTargetIndexes(e,t){return Es.resolve()}getDocumentsMatchingTarget(e,t){return Es.resolve(null)}getIndexType(e,t){return Es.resolve(0)}getFieldIndexes(e,t){return Es.resolve([])}getNextCollectionGroupToUpdate(e){return Es.resolve(null)}getMinOffset(e,t){return Es.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return Es.resolve(vs.min())}updateCollectionGroup(e,t,n){return Es.resolve()}updateIndexEntries(e,t){return Es.resolve()}}class Rh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new wa(ss.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new wa(ss.comparator)).toArray()}}const Mh=new Uint8Array(0);class Lh{constructor(e,t){this.databaseId=t,this.an=new Rh,this.un=new Zc((e=>Ac(e)),((e,t)=>Oc(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Fs(r)};return jh(e).put(i)}return Es.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[ns(t),""],!1,!0);return jh(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Bs(r.parent))}return n}))}addFieldIndex(e,t){const n=Uh(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Vh(e);return i.next((e=>{n.put(ah(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Uh(e),r=Vh(e),i=Fh(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Uh(e),n=Fh(e),r=Vh(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return Es.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Th(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Fh(e);let r=!0;const i=new Map;return Es.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=lu();const r=[];return Es.forEach(i,((i,o)=>{Ro("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Ac(t)));const s=function(e,t){const n=hs(t);if(void 0===n)return null;for(const r of Dc(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of ds(t))for(const t of Dc(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of ds(t)){const t=0===i.kind?Rc(e,i.fieldPath,e.startAt):Mc(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new ic(n,r)}(o,i),u=function(e,t){const n=[];let r=!0;for(const i of ds(t)){const t=0===i.kind?Mc(e,i.fieldPath,e.endAt):Rc(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new ic(n,r)}(o,i),l=this.hn(i,o,c),h=this.hn(i,o,u),d=this.Pn(i,o,a),f=this.In(i.indexId,s,l,c.inclusive,h,u.inclusive,d);return Es.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=us.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Es.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Ih(hc.create(e.filters,"and")).map((t=>Nc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),u=[];for(let l=0;l<a;++l){const a=t?this.Tn(t[l/c]):Mh,h=this.En(e,a,n[l%c],r),d=this.dn(e,a,i[l%c],o),f=s.map((t=>this.En(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}En(e,t,n,r){const i=new bh(e,us.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new bh(e,us.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Th(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Es.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new wa(cs.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new wh;for(const r of ds(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);fh.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new wh;return fh.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new wh;return fh.bt.Pt(qa(this.databaseId,t),n.Ht(function(e){const t=ds(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new wh);let i=0;for(const o of ds(e)){const e=n[i++];for(const n of r)if(this.Vn(t,o.fieldPath)&&Ka(e))r=this.mn(r,o,e);else{const t=n.Ht(o.kind);fh.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new wh;n.seed(e.Wt()),fh.bt.Pt(o,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof lc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Uh(e),r=Vh(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Es.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new ps(t.sequenceNumber,new vs(eh(t.readTime),new us(Bs(t.documentKey)),t.largestBatchId)):ps.empty(),r=e.fields.map((e=>{let[t,n]=e;return new fs(cs.fromServerFormat(t),n)}));return new ls(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:es(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Uh(e),i=Vh(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Es.forEach(t,(t=>i.put(ah(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Es.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Es.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Es.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?Es.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Fh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Fh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Fh(e);let i=new wa(_h);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new bh(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new wa(_h);const r=this.An(t,e);if(null==r)return n;const i=hs(t);if(null!=i){const o=e.data.field(i.fieldPath);if(Ka(o))for(const i of o.arrayValue.values||[])n=n.add(new bh(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new bh(t.indexId,e.key,Mh,r));return n}wn(e,t,n,r,i){Ro("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=_a(o),c=_a(s);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=_a(s)):t?(i(a),a=_a(o)):(a=_a(o),c=_a(s))}}(r,i,_h,(r=>{o.push(this.Sn(e,t,n,r))}),(r=>{o.push(this.bn(e,t,n,r))})),Es.waitFor(o)}gn(e){let t=1;return Vh(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>_h(e,t))).filter(((e,t,n)=>!t||0!==_h(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=_h(o,e),i=_h(o,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(o),r.push(o.Jt());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Mh,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Mh,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return _h(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Bh)}getMinOffset(e,t){return Es.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Fo())))).next(Bh)}}function jh(e){return da(e,"collectionParents")}function Fh(e){return da(e,"indexEntries")}function Uh(e){return da(e,"indexConfiguration")}function Vh(e){return da(e,"indexState")}function Bh(e){Uo(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;ys(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new vs(t.readTime,t.documentKey,n)}const zh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new qh(e,qh.DEFAULT_COLLECTION_PERCENTILE,qh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Wh(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:s},((e,t,n)=>(a++,n.delete())));o.push(c.next((()=>{Uo(1===a)})));const u=[];for(const l of n.mutations){const e=Ws(t,l.key.path,n.batchId);o.push(i.delete(e)),u.push(l.key)}return Es.waitFor(o).next((()=>u))}function Kh(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Fo();t=e.noDocument}return JSON.stringify(t).length}qh.DEFAULT_COLLECTION_PERCENTILE=10,qh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qh.DEFAULT=new qh(41943040,qh.DEFAULT_COLLECTION_PERCENTILE,qh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qh.DISABLED=new qh(-1,0,0);class Hh{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Uo(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Hh(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qh(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=$h(e),o=Qh(e);return o.add({}).next((s=>{Uo("number"==typeof s);const a=new Ku(s,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Ml(e.ct,t))),i=n.mutations.map((t=>Ml(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let l=new wa(((e,t)=>es(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Ws(this.userId,e.key.path,s);l=l.add(e.key.path.popLast()),u.push(o.put(c)),u.push(i.put(t,Ks))}return l.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[s]=a.keys()})),Es.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return Qh(e).get(t).next((e=>e?(Uo(e.userId===this.userId),th(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?Es.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Qh(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Uo(t.batchId>=n),i=th(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Qh(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qh(e).W("userMutationsIndex",t).next((e=>e.map((e=>th(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=qs(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return $h(e).Y({range:r},((n,r,o)=>{const[s,a,c]=n,u=Bs(a);if(s===this.userId&&t.path.isEqual(u))return Qh(e).get(c).next((e=>{if(!e)throw Fo();Uo(e.userId===this.userId),i.push(th(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wa(es);const r=[];return t.forEach((t=>{const i=qs(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=$h(e).Y({range:o},((e,r,i)=>{const[o,s,a]=e,c=Bs(s);o===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(s)})),Es.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=qs(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new wa(es);return $h(e).Y({range:o},((e,t,i)=>{const[o,a,c]=e,u=Bs(a);o===this.userId&&n.isPrefixOf(u)?u.length===r&&(s=s.add(c)):i.done()})).next((()=>this.Fn(e,s)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Qh(e).get(t).next((e=>{if(null===e)throw Fo();Uo(e.userId===this.userId),n.push(th(this.serializer,e))})))})),Es.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Wh(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),Es.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Es.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return $h(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Bs(e[1]);r.push(t)}else n.done()})).next((()=>{Uo(0===r.length)}))}))}containsKey(e,t){return Gh(e,this.userId,t)}xn(e){return Jh(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Gh(e,t,n){const r=qs(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return $h(e).Y({range:o,J:!0},((e,n,r)=>{const[o,a,c]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function Qh(e){return da(e,"mutations")}function $h(e){return da(e,"documentMutations")}function Jh(e){return da(e,"mutationQueues")}class Yh{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Yh(0)}static Ln(){return new Yh(-1)}}class Xh{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Yh(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>is.fromTimestamp(new rs(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Zh(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Uo(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Zh(e).Y(((o,s)=>{const a=nh(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Es.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Zh(e).Y(((e,n)=>{const r=nh(n);t(r)}))}Bn(e){return ed(e).get("targetGlobalKey").next((e=>(Uo(null!==e),e)))}kn(e,t){return ed(e).put("targetGlobalKey",t)}qn(e,t){return Zh(e).put(rh(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Ac(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Zh(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=nh(n);Oc(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=td(e);return t.forEach((t=>{const o=Fs(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),Es.waitFor(r)}removeMatchingKeys(e,t,n){const r=td(e);return Es.forEach(t,(t=>{const i=Fs(t.path);return Es.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=td(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=td(e);let i=lu();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Bs(e[1]),o=new us(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=Fs(t.path),r=IDBKeyRange.bound([n],[ns(n)],!1,!0);let i=0;return td(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Zh(e).get(t).next((e=>e?nh(e):null))}}function Zh(e){return da(e,"targets")}function ed(e){return da(e,"targetGlobal")}function td(e){return da(e,"targetDocuments")}function nd(e,t){let[n,r]=e,[i,o]=t;const s=es(n,i);return 0===s?es(r,o):s}class rd{constructor(e){this.Kn=e,this.buffer=new wa(nd),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();nd(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class id{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Ro("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){xs(e)?Ro("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await _s(e)}await this.zn(3e5)}))}}class od{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Es.resolve(Rs._e);const n=new rd(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ro("LruGarbageCollector","Garbage collection skipped; disabled"),Es.resolve(zh)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ro("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),zh):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,o,s,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ro("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Do()<=E.DEBUG&&Ro("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),Es.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function sd(e,t){return new od(e,t)}class ad{constructor(e,t){this.db=e,this.garbageCollector=sd(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return cd(e,n)}removeReference(e,t,n){return cd(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return cd(e,t)}er(e,t){return function(e,t){let n=!1;return Jh(e).Z((r=>Gh(e,r,t).next((e=>(e&&(n=!0),Es.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((o,s)=>{if(s<=t){const t=this.er(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,is.min()),td(e).delete(function(e){return[0,Fs(e.path)]}(o)))))}));r.push(t)}})).next((()=>Es.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return cd(e,t)}Xn(e,t){const n=td(e);let r,i=Rs._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:c}=n;0===o?(i!==Rs._e&&t(new us(Bs(r)),i),i=c,r=a):i=Rs._e})).next((()=>{i!==Rs._e&&t(new us(Bs(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cd(e,t){return td(e).put(function(e,t){return{targetId:0,path:Fs(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ud{constructor(){this.changes=new Zc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Es.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ld{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return pd(e).put(n)}removeEntry(e,t,n){return pd(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Xl(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=rc.newInvalidDocument(t);return pd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(md(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:rc.newInvalidDocument(t)};return pd(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(md(t))},((e,r)=>{n={document:this.nr(t,r),size:Kh(r)}})).next((()=>n))}getEntries(e,t){let n=tu();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=tu(),r=new ga(us.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Kh(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return Es.resolve();let r=new wa(vd);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(md(r.first()),md(r.last())),o=r.getIterator();let s=o.getNext();return pd(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=us.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&vd(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.U(md(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),Xl(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pd(e).W(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=tu();for(const i of e){const e=this.nr(us.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&($c(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=tu();const o=gd(t,n),s=gd(t,vs.max());return pd(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.nr(us.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new dd(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return fd(e).get("remoteDocumentGlobalKey").next((e=>(Uo(!!e),e)))}tr(e,t){return fd(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Rl(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=us.fromSegments(t.noDocument.path),r=eh(t.noDocument.readTime);n=rc.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Fo();{const e=us.fromSegments(t.unknownDocument.path),r=eh(t.unknownDocument.version);n=rc.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new rs(e[0],e[1]);return is.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(is.min()))return e}return rc.newInvalidDocument(e)}}function hd(e){return new ld(e)}class dd extends ud{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Zc((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new wa(((e,t)=>es(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=Yl(this.ar.serializer,o);r=r.add(i.path.popLast());const c=Kh(a);n+=c-s.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=Yl(this.ar.serializer,o.convertToNoDocument(is.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),Es.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function fd(e){return da(e,"remoteDocumentGlobal")}function pd(e){return da(e,"remoteDocumentsV14")}function md(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gd(e,t){const n=t.documentKey.path.toArray();return[e,Xl(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function vd(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=es(n[o],r[o]),i)return i;return i=es(n.length,r.length),i||(i=es(n[n.length-2],r[r.length-2]),i||es(n[n.length-1],r[r.length-1]))}class yd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wd{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Mu(n.mutation,e,Ea.empty(),rs.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,lu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lu();const r=ou();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=ru();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=ou();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,lu())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=tu();const o=au(),s=au();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Uu)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Mu(s.mutation,t,s.mutation.getFieldMask(),rs.now())):o.set(t.key,Ea.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new yd(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=au();let r=new ga(((e,t)=>e-t)),i=lu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Ea.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||lu()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,c=r.value,u=su();c.forEach((e=>{if(!i.has(e)){const r=Du(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Es.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return us.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Vc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Es.resolve(ou());let s=-1,a=i;return o.next((t=>Es.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Es.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,lu()))).next((e=>({batchId:s,changes:iu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new us(t)).next((e=>{let t=ru();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=ru();return this.indexManager.getCollectionParents(e,i).next((s=>Es.forEach(s,(s=>{const a=function(e,t){return new Lc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,rc.newInvalidDocument(r)))}));let n=ru();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&Mu(o.mutation,r,Ea.empty(),rs.now()),$c(t,r)&&(n=n.insert(e,r))})),n}))}}class bd{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Es.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Tl(e.createTime)}}(t)),Es.resolve()}getNamedQuery(e,t){return Es.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:ih(e.bundledQuery),readTime:Tl(e.readTime)}}(t)),Es.resolve()}}class _d{constructor(){this.overlays=new ga(us.comparator),this.hr=new Map}getOverlay(e,t){return Es.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ou();return Es.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Es.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Es.resolve()}getOverlaysForCollection(e,t,n){const r=ou(),i=t.length+1,o=new us(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Es.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ga(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ou(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=ou(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Es.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Gu(t,n));let i=this.hr.get(t);void 0===i&&(i=lu(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Ed{constructor(){this.Pr=new wa(Td.Ir),this.Tr=new wa(Td.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Td(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Td(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new us(new ss([])),n=new Td(t,e),r=new Td(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new us(new ss([])),n=new Td(t,e),r=new Td(t,e+1);let i=lu();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Td(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Td{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return us.comparator(e.key,t.key)||es(e.pr,t.pr)}static Er(e,t){return es(e.pr,t.pr)||us.comparator(e.key,t.key)}}class Sd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new wa(Td.Ir)}checkEmpty(e){return Es.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ku(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.wr=this.wr.add(new Td(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Es.resolve(o)}lookupMutationBatch(e,t){return Es.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return Es.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Es.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Es.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Td(t,0),r=new Td(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),Es.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wa(es);return t.forEach((e=>{const t=new Td(e,0),r=new Td(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),Es.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;us.isDocumentKey(i)||(i=i.child(""));const o=new Td(new us(i),0);let s=new wa(es);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.pr)),!0)}),o),Es.resolve(this.Dr(s))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Uo(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Es.forEach(t.mutations,(r=>{const i=new Td(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Td(t,0),r=this.wr.firstAfterOrEqual(n);return Es.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Es.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Id{constructor(e){this.vr=e,this.docs=new ga(us.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Es.resolve(n?n.document.mutableCopy():rc.newInvalidDocument(t))}getEntries(e,t){let n=tu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():rc.newInvalidDocument(e))})),Es.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=tu();const o=t.path,s=new us(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||ys(gs(s),n)<=0||(r.has(s.key)||$c(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Es.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Fo()}Fr(e,t){return Es.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new kd(this)}getSize(e){return Es.resolve(this.size)}}class kd extends ud{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),Es.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class xd{constructor(e){this.persistence=e,this.Mr=new Zc((e=>Ac(e)),Oc),this.lastRemoteSnapshotVersion=is.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Ed,this.targetCount=0,this.Lr=Yh.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Es.resolve()}getLastRemoteSnapshotVersion(e){return Es.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Es.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Es.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Es.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Yh(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Es.resolve()}updateTargetData(e,t){return this.qn(t),Es.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Es.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Es.waitFor(i).next((()=>r))}getTargetCount(e){return Es.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Es.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Es.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Es.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Es.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Es.resolve(n)}containsKey(e,t){return Es.resolve(this.Nr.containsKey(t))}}class Cd{constructor(e,t){this.Br={},this.overlays={},this.kr=new Rs(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new xd(this),this.indexManager=new Dh,this.remoteDocumentCache=function(e){return new Id(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Jl(t),this.$r=new bd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _d,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Sd(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Ro("MemoryPersistence","Starting transaction:",e);const r=new Nd(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return Es.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Nd extends bs{constructor(e){super(),this.currentSequenceNumber=e}}class Ad{constructor(e){this.persistence=e,this.zr=new Ed,this.jr=null}static Hr(e){return new Ad(e)}get Jr(){if(this.jr)return this.jr;throw Fo()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Es.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Es.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Es.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Es.forEach(this.Jr,(n=>{const r=us.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,is.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Es.or([()=>Es.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Od{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Ts("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zs,{unique:!0}),e.createObjectStore("documentMutations")}(e),Pd(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=Es.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Pd(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:is.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zs,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Es.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Xr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(o=o.next((()=>this.ti(i)))),n<8&&r>=8&&(o=o.next((()=>this.ni(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ri(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:ra});t.createIndex("collectionPathOverlayIndex",ia,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",oa,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Hs});t.createIndex("documentKeyIndex",Gs),t.createIndex("collectionGroupIndex",Qs)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Zs}).createIndex("sequenceNumberIndex",ea,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ta}).createIndex("documentKeyIndex",na,{unique:!1})}(e)))),o}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Kh(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Es.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Es.forEach(n,(n=>{Uo(n.userId===t.userId);const r=th(this.serializer,n);return Wh(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const o=new ss(n),s=function(e){return[0,Fs(e)]}(o);r.push(t.get(s).next((n=>n?Es.resolve():(n=>t.put({targetId:0,path:Fs(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>Es.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Xs});const n=t.store("collectionParents"),r=new Rh,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Fs(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new ss(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,o]=e;const s=Bs(r);return i(s.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=nh(n),i=rh(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new us(ss.fromString(e.document.name).popFirst(5)):e.noDocument?us.fromSegments(e.noDocument.path):e.unknownDocument?us.fromSegments(e.unknownDocument.path):Fo()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>Es.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=hd(this.serializer),i=new Cd(Ad.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:lu();th(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Es.forEach(n,((e,n)=>{const o=new Ao(n),s=hh.lt(this.serializer,o),a=i.getIndexManager(o),c=Hh.lt(o,this.serializer,a,i.referenceDelegate);return new wd(r,c,s,a).recalculateAndSaveOverlaysForDocumentKeys(new ha(t,Rs._e),e).next()}))}))}}function Pd(e){e.createObjectStore("targetDocuments",{keyPath:Js}).createIndex("documentTargetsIndex",Ys,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$s,{unique:!0}),e.createObjectStore("targetGlobal")}const Dd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Rd{constructor(e,t,n,r,i,o,s,a,c,u){let l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=o,this.document=s,this._i=c,this.ai=u,this.ui=l,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Rd.D())throw new zo(Bo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ad(this,r),this.Ti=t+"main",this.serializer=new Jl(a),this.Ei=new Ss(this.Ti,this.ui,new Od(this.serializer)),this.Qr=new Xh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hd(this.serializer),this.$r=new ch,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&Mo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new zo(Bo.FAILED_PRECONDITION,Dd);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Rs(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ld(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(xs(e))return Ro("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ro("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Md(e).get("owner").next((e=>Es.resolve(this.Si(e))))}bi(e){return Ld(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=da(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Es.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Es.resolve(!0):Md(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new zo(Bo.FAILED_PRECONDITION,Dd);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ld(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ro("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new ha(e,Rs._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Ld(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Hh.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Lh(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hh.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Ro("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?la:14===e?ua:13===e?ca:12===e?aa:11===e?sa:void Fo()}(this.ui);let o;return this.Ei.runTransaction(e,r,i,(r=>(o=new ha(r,this.kr?this.kr.next():Rs._e),"readwrite-primary"===t?this.gi(o).next((e=>!!e||this.pi(o))).next((t=>{if(!t)throw Mo("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new zo(Bo.FAILED_PRECONDITION,ws);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ki(e){return Md(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new zo(Bo.FAILED_PRECONDITION,Dd)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Md(e).put("owner",t)}static D(){return Ss.D()}yi(e){const t=Md(e);return t.get("owner").next((e=>this.Si(e)?(Ro("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Es.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Mo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;it()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ro("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Mo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Mo("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Md(e){return da(e,"owner")}function Ld(e){return da(e,"clientMetadata")}function jd(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Fd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=lu(),r=lu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Fd(e,t.fromCache,n,r)}}class Ud{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Vd{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=it()?8:Ss.v(rt())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Ud;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Do()<=E.DEBUG&&Ro("QueryEngine","SDK will not create cache indexes for query:",Qc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Es.resolve()):(Do()<=E.DEBUG&&Ro("QueryEngine","Query:",Qc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Do()<=E.DEBUG&&Ro("QueryEngine","The SDK decides to create cache indexes for query:",Qc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zc(t))):Es.resolve())}ji(e,t){if(Uc(t))return Es.resolve(null);let n=zc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Kc(t,null,"F"),n=zc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=lu(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,Kc(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return Uc(t)||r.isEqual(is.min())?Es.resolve(null):this.zi.getDocuments(e,n).next((i=>{const o=this.Zi(t,i);return this.Xi(t,o,n,r)?Es.resolve(null):(Do()<=E.DEBUG&&Ro("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qc(t)),this.es(e,o,t,ms(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new wa(Yc(e));return t.forEach(((t,r)=>{$c(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Do()<=E.DEBUG&&Ro("QueryEngine","Using full collection scan to execute query:",Qc(t)),this.zi.getDocumentsMatchingQuery(e,t,vs.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Bd{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new ga(es),this.rs=new Zc((e=>Ac(e)),Oc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wd(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function zd(e,t,n,r){return new Bd(e,t,n,r)}async function qd(e,t){const n=Vo(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=lu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Wd(e){const t=Vo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Kd(e,t,n){let r=lu(),i=lu();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=tu();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(is.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Ro("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function Hd(e,t){const n=Vo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Gd(e,t){const n=Vo(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,Es.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new $l(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Qd(e,t,n){const r=Vo(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!xs(e))throw e;Ro("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function $d(e,t,n){const r=Vo(e);let i=is.min(),o=lu();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Vo(e),i=r.rs.get(n);return void 0!==i?Es.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,zc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:is.min(),n?o:lu()))).next((e=>(Xd(r,Jc(t),e),{documents:e,hs:o})))))}function Jd(e,t){const n=Vo(e),r=Vo(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Yd(e,t){const n=Vo(e),r=n.ss.get(t)||is.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,ms(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Xd(n,t,e),e)))}function Xd(e,t,n){let r=e.ss.get(t)||is.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Zd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lu();const r=await Gd(e,zc(ih(t.bundledQuery))),i=Vo(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=Tl(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(e,t);const s=r.withResumeToken(Sa.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(s.targetId,s),i.Qr.updateTargetData(e,s).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function ef(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function tf(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function nf(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class rf{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new zo(r.error.code,r.error.message))),o?new rf(e,t,r.state,i):(Mo("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class of{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new zo(n.error.code,n.error.message))),i?new of(e,n.state,r):(Mo("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=du();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=js(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new sf(e,i):(Mo("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class af{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new af(t.clientId,t.onlineState):(Mo("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class cf{constructor(){this.activeTargetIds=du()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uf{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ga(es),this.started=!1,this.ys=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=ef(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new cf),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(ef(this.persistenceKey,n));if(e){const t=sf.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(nf(this.persistenceKey,e));if(n){const r=of.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nf(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ro("SharedClientState","READ",e,t),t}setItem(e,t){Ro("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ro("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Ro("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Mo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Rs._e;if(null!=e)try{const n=JSON.parse(e);Uo("number"==typeof n),t=n}catch(e){Mo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Rs._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new rf(this.currentUser,e,t,n),i=tf(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=tf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=nf(this.persistenceKey,e),i=new of(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return sf.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rf.Es(new Ao(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return of.Es(r,t)}xs(e){return af.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Ro("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.eo(o,s).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=du();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class lf{constructor(){this.no=new cf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new cf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hf{io(e){}shutdown(){}}class df{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ro("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ro("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ff=null;function pf(){return null===ff?ff=268435456+Math.round(2147483648*Math.random()):ff++,"0x"+ff.toString(16)}const mf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gf{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const vf="WebChannelConnection";class yf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const o=pf(),s=this.bo(e,t.toUriEncodedString());Ro("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,s,a,n).then((t=>(Ro("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Lo("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Oo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=mf[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=pf();return new Promise(((o,s)=>{const a=new ko;a.setWithCredentials(!0),a.listenOnce(Eo.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case _o.NO_ERROR:const t=a.getResponseJson();Ro(vf,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case _o.TIMEOUT:Ro(vf,"RPC '".concat(e,"' ").concat(i," timed out")),s(new zo(Bo.DEADLINE_EXCEEDED,"Request time out"));break;case _o.HTTP_ERROR:const n=a.getStatus();if(Ro(vf,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Bo).indexOf(t)>=0?t:Bo.UNKNOWN}(t.status);s(new zo(e,t.message))}else s(new zo(Bo.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new zo(Bo.UNAVAILABLE,"Connection failed."));break;default:Fo()}}finally{Ro(vf,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Ro(vf,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=pf(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wo(),s=bo(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Ro(vf,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const l=o.createWebChannel(u,a);let h=!1,d=!1;const f=new gf({lo:t=>{d?Ro(vf,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Ro(vf,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),Ro(vf,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},ho:()=>l.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(l,Io.EventType.OPEN,(()=>{d||Ro(vf,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Io.EventType.CLOSE,(()=>{d||(d=!0,Ro(vf,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(l,Io.EventType.ERROR,(t=>{d||(d=!0,Lo(vf,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new zo(Bo.UNAVAILABLE,"The operation could not be completed")))})),p(l,Io.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Uo(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Ro(vf,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=$u[e];if(void 0!==t)return Xu(t)}(t),i=s.message;void 0===n&&(n=Bo.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.Vo(new zo(n,i)),l.close()}else Ro(vf,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(s,To.STAT_EVENT,(t=>{t.stat===So.PROXY?Ro(vf,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===So.NOPROXY&&Ro(vf,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function wf(){return"undefined"!=typeof window?window:null}function bf(){return"undefined"!=typeof document?document:null}function _f(e){return new yl(e,!0)}class Ef{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Ro("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class Tf{constructor(e,t,n,r,i,o,s,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Ef(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Bo.RESOURCE_EXHAUSTED?(Mo(t.toString()),Mo("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Bo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new zo(Bo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Ro("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Ro("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Sf extends Tf{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Fo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Uo(void 0===t||"string"==typeof t),Sa.fromBase64String(t||"")):(Uo(void 0===t||t instanceof Uint8Array),Sa.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Bo.UNKNOWN:Xu(e.code);return new zo(t,e.message||"")}(s);n=new ll(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cl(e,r.document.name),o=Tl(r.document.updateTime),s=r.document.createTime?Tl(r.document.createTime):is.min(),a=new tc({mapValue:{fields:r.document.fields}}),c=rc.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new cl(u,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Cl(e,r.document),o=r.readTime?Tl(r.readTime):is.min(),s=rc.newNoDocument(i,o),a=r.removedTargetIds||[];n=new cl([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Cl(e,r.document),o=r.removedTargetIds||[];n=new cl([],o,i,null)}else{if(!("filter"in t))return Fo();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Qu(r,i),s=e.targetId;n=new ul(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return is.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?is.min():t.readTime?Tl(t.readTime):is.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Ol(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Pc(r)?{documents:jl(e,r)}:{query:Fl(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=_l(e,t.resumeToken);const r=wl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(is.min())>0){n.readTime=bl(e,t.snapshotVersion.toTimestamp());const r=wl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Ol(this.serializer),t.removeTarget=e,this.t_(t)}}class If extends Tf{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Uo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Uo(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Tl(e.updateTime):Tl(t);return n.isEqual(is.min())&&(n=Tl(t)),new Nu(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Tl(e.commitTime);return this.listener.T_(n,t)}return Uo(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Ol(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Ml(this.serializer,e)))};this.t_(t)}}class kf extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new zo(Bo.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.So(e,Il(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Bo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zo(Bo.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.vo(e,Il(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Bo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new zo(Bo.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class xf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Mo(t),this.g_=!1):Ro("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Cf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{jf(this)&&(Ro("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Vo(e);t.v_.add(4),await Af(t),t.x_.set("Unknown"),t.v_.delete(4),await Nf(t)}(this))}))})),this.x_=new xf(n,r)}}async function Nf(e){if(jf(e))for(const t of e.F_)await t(!0)}async function Af(e){for(const t of e.F_)await t(!1)}function Of(e,t){const n=Vo(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Lf(n)?Mf(n):tp(n).Jo()&&Df(n,t))}function Pf(e,t){const n=Vo(e),r=tp(n);n.C_.delete(t),r.Jo()&&Rf(n,t),0===n.C_.size&&(r.Jo()?r.Xo():jf(n)&&n.x_.set("Unknown"))}function Df(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(is.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}tp(e).c_(t)}function Rf(e,t){e.O_.Oe(t),tp(e).l_(t)}function Mf(e){e.O_=new dl({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),tp(e).start(),e.x_.p_()}function Lf(e){return jf(e)&&!tp(e).Ho()&&e.C_.size>0}function jf(e){return 0===Vo(e).v_.size}function Ff(e){e.O_=void 0}async function Uf(e){e.C_.forEach(((t,n)=>{Df(e,t)}))}async function Vf(e,t){Ff(e),Lf(e)?(e.x_.S_(t),Mf(e)):e.x_.set("Unknown")}async function Bf(e,t,n){if(e.x_.set("Online"),t instanceof ll&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Ro("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await zf(e,n)}else if(t instanceof cl?e.O_.$e(t):t instanceof ul?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(is.min()))try{const t=await Wd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Sa.EMPTY_BYTE_STRING,r.snapshotVersion)),Rf(e,t);const i=new $l(r.target,t,n,r.sequenceNumber);Df(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ro("RemoteStore","Failed to raise snapshot:",t),await zf(e,t)}}async function zf(e,t,n){if(!xs(t))throw t;e.v_.add(1),await Af(e),e.x_.set("Offline"),n||(n=()=>Wd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ro("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Nf(e)}))}function qf(e,t){return t().catch((n=>zf(e,n,t)))}async function Wf(e){const t=Vo(e),n=np(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Kf(t);)try{const e=await Hd(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,Hf(t,e)}catch(e){await zf(t,e)}Gf(t)&&Qf(t)}function Kf(e){return jf(e)&&e.D_.length<10}function Hf(e,t){e.D_.push(t);const n=np(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Gf(e){return jf(e)&&!np(e).Ho()&&e.D_.length>0}function Qf(e){np(e).start()}async function $f(e){np(e).d_()}async function Jf(e){const t=np(e);for(const n of e.D_)t.I_(n.mutations)}async function Yf(e,t,n){const r=e.D_.shift(),i=Hu.from(r,t,n);await qf(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Wf(e)}async function Xf(e,t){t&&np(e).P_&&await async function(e,t){if(function(e){return Yu(e)&&e!==Bo.ABORTED}(t.code)){const n=e.D_.shift();np(e).Zo(),await qf(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Wf(e)}}(e,t),Gf(e)&&Qf(e)}async function Zf(e,t){const n=Vo(e);n.asyncQueue.verifyOperationInProgress(),Ro("RemoteStore","RemoteStore received new credentials");const r=jf(n);n.v_.add(3),await Af(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Nf(n)}async function ep(e,t){const n=Vo(e);t?(n.v_.delete(2),await Nf(n)):t||(n.v_.add(2),await Af(n),n.x_.set("Unknown"))}function tp(e){return e.N_||(e.N_=function(e,t,n){const r=Vo(e);return r.R_(),new Sf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Uf.bind(null,e),To:Vf.bind(null,e),u_:Bf.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Lf(e)?Mf(e):e.x_.set("Unknown")):(await e.N_.stop(),Ff(e))}))),e.N_}function np(e){return e.L_||(e.L_=function(e,t,n){const r=Vo(e);return r.R_(),new If(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:$f.bind(null,e),To:Xf.bind(null,e),E_:Jf.bind(null,e),T_:Yf.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await Wf(e)):(await e.L_.stop(),e.D_.length>0&&(Ro("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class rp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new qo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new rp(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zo(Bo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ip(e,t){if(Mo("AsyncQueue","".concat(t,": ").concat(e)),xs(e))return new zo(Bo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class op{constructor(e){this.comparator=e?(t,n)=>e(t,n)||us.comparator(t.key,n.key):(e,t)=>us.comparator(e.key,t.key),this.keyedMap=ru(),this.sortedSet=new ga(this.comparator)}static emptySet(e){return new op(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof op))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new op;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class sp{constructor(){this.B_=new ga(us.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Fo():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class ap{constructor(e,t,n,r,i,o,s,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new ap(e,t,op.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class cp{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class up{constructor(){this.queries=new Zc((e=>Gc(e)),Hc),this.onlineState="Unknown",this.W_=new Set}}async function lp(e,t){const n=Vo(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.K_()&&t.U_()&&(r=2):(o=new cp,r=t.U_()?0:1);try{switch(r){case 0:o.q_=await n.onListen(i,!0);break;case 1:o.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=ip(e,"Initialization of query '".concat(Qc(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Q_.push(t),t.G_(n.onlineState),o.q_&&t.z_(o.q_)&&pp(n)}async function hp(e,t){const n=Vo(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Q_.indexOf(t);e>=0&&(o.Q_.splice(e,1),0===o.Q_.length?i=t.U_()?0:1:!o.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dp(e,t){const n=Vo(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.z_(i)&&(r=!0);t.q_=i}}r&&pp(n)}function fp(e,t,n){const r=Vo(e),i=r.queries.get(t);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(t)}function pp(e){e.W_.forEach((e=>{e.next()}))}var mp,gp;(gp=mp||(mp={})).j_="default",gp.Cache="cache";class vp{constructor(e,t,n){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ap(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=ap.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==mp.Cache}}class yp{constructor(e,t){this.na=e,this.byteLength=t}ra(){return"metadata"in this.na}}class wp{constructor(e){this.serializer=e}Ps(e){return Cl(this.serializer,e)}Is(e){return e.metadata.exists?Rl(this.serializer,e.document,!1):rc.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Tl(e)}}class bp{constructor(e,t,n){this.ia=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_p(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;const n=ss.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}oa(e){const t=new Map,n=new wp(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||lu()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Vo(e);let o=lu(),s=tu();for(const u of n){const e=t.Ps(u.metadata.name);u.document&&(o=o.add(e));const n=t.Is(u);n.setReadTime(t.Ts(u.metadata.readTime)),s=s.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await Gd(i,function(e){return zc(Fc(ss.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Kd(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,o,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new wp(this.serializer),this.documents,this.ia.id),t=this.oa(this.documents);for(const n of this.queries)await Zd(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function _p(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Ep{constructor(e){this.key=e}}class Tp{constructor(e){this.key=e}}class Sp{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=lu(),this.mutatedKeys=lu(),this.ha=Yc(e),this.Pa=new op(this.ha)}get Ia(){return this.ua}Ta(e,t){const n=t?t.Ea:new sp,r=t?t.Pa:this.Pa;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),l=$c(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.da(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.ha(l,a)>0||c&&this.ha(l,c)<0)&&(s=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(s=!0)),f&&(l?(o=o.add(l),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Pa:o,Ea:n,Xi:s,mutatedKeys:i}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fo()}};return n(e)-n(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(n),r=null!=r&&r;const s=t&&!r?this.Ra():[],a=0===this.la.size&&this.current&&!r?1:0,c=a!==this.ca;return this.ca=a,0!==o.length||c?{snapshot:new ap(this.query,e.Pa,i,o,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:s}:{Va:s}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new sp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=lu(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new Tp(e))})),this.la.forEach((n=>{e.has(n)||t.push(new Ep(n))})),t}fa(e){this.ua=e.hs,this.la=lu();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return ap.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class Ip{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class kp{constructor(e){this.key=e,this.pa=!1}}class xp{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Zc((e=>Gc(e)),Hc),this.Sa=new Map,this.ba=new Set,this.Da=new ga(us.comparator),this.Ca=new Map,this.va=new Ed,this.Fa={},this.Ma=new Map,this.xa=Yh.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function Cp(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=rm(e);let i;const o=r.wa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=await Ap(r,t,n,!0),i}async function Np(e,t){const n=rm(e);await Ap(n,t,!0,!1)}async function Ap(e,t,n,r){const i=await Gd(e.localStore,zc(t)),o=i.targetId,s=n?e.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=await Op(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&Of(e.remoteStore,i),a}async function Op(e,t,n,r,i){e.Na=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ta(n);i.Xi&&(i=await $d(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ta(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return qp(e,t.targetId,a.Va),a.snapshot}(e,t,n,r);const o=await $d(e.localStore,t,!0),s=new Sp(t,o.hs),a=s.Ta(o.documents),c=al.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=s.applyChanges(a,e.isPrimaryClient,c);qp(e,n,u.Va);const l=new Ip(t,n,s);return e.wa.set(t,l),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),u.snapshot}async function Pp(e,t,n){const r=Vo(e),i=r.wa.get(t),o=r.Sa.get(i.targetId);if(o.length>1)return r.Sa.set(i.targetId,o.filter((e=>!Hc(e,t)))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qd(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Pf(r.remoteStore,i.targetId),Bp(r,i.targetId)})).catch(_s)):(Bp(r,i.targetId),await Qd(r.localStore,i.targetId,!0))}async function Dp(e,t){const n=Vo(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pf(n.remoteStore,r.targetId))}async function Rp(e,t){const n=Vo(e);try{const e=await function(e,t){const n=Vo(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const s=[];t.targetChanges.forEach(((o,a)=>{const c=i.get(a);if(!c)return;s.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,a))));let u=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Sa.EMPTY_BYTE_STRING,is.min()).withLastLimboFreeSnapshotVersion(is.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,o)&&s.push(n.Qr.updateTargetData(e,u))}));let a=tu(),c=lu();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Kd(e,o,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(is.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Es.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ca.get(t);r&&(Uo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.pa=!0:e.modifiedDocuments.size>0?Uo(r.pa):e.removedDocuments.size>0&&(Uo(r.pa),r.pa=!1))})),await Hp(n,e,t)}catch(e){await _s(e)}}function Mp(e,t,n){const r=Vo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wa.forEach(((n,r)=>{const i=r.view.G_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Vo(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.G_(t)&&(r=!0)})),r&&pp(n)}(r.eventManager,t),e.length&&r.ya.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Lp(e,t,n){const r=Vo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),o=i&&i.key;if(o){let e=new ga(us.comparator);e=e.insert(o,rc.newNoDocument(o,is.min()));const n=lu().add(o),i=new sl(is.min(),new Map,new ga(es),e,n);await Rp(r,i),r.Da=r.Da.remove(o),r.Ca.delete(t),Kp(r)}else await Qd(r.localStore,t,!1).then((()=>Bp(r,t,n))).catch(_s)}async function jp(e,t){const n=Vo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Vo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Es.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Uo(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=lu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Vp(n,r,null),Up(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hp(n,e)}catch(e){await _s(e)}}async function Fp(e,t,n){const r=Vo(e);try{const e=await function(e,t){const n=Vo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Uo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Vp(r,t,n),Up(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Hp(r,e)}catch(n){await _s(n)}}function Up(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function Vp(e,t,n){const r=Vo(e);let i=r.Fa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function Bp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||zp(e,t)}))}function zp(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);null!==n&&(Pf(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),Kp(e))}function qp(e,t,n){for(const r of n)r instanceof Ep?(e.va.addReference(r.key,t),Wp(e,r)):r instanceof Tp?(Ro("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||zp(e,r.key)):Fo()}function Wp(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(Ro("SyncEngine","New document in limbo: "+n),e.ba.add(r),Kp(e))}function Kp(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new us(ss.fromString(t)),r=e.xa.next();e.Ca.set(r,new kp(n)),e.Da=e.Da.insert(n,r),Of(e.remoteStore,new $l(zc(Fc(n.path)),r,"TargetPurposeLimboResolution",Rs._e))}}async function Hp(e,t,n){const r=Vo(e),i=[],o=[],s=[];r.wa.isEmpty()||(r.wa.forEach(((e,a)=>{s.push(r.Na(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Fd.Ki(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.ya.u_(i),await async function(e,t){const n=Vo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Es.forEach(t,(t=>Es.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Es.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!xs(e))throw e;Ro("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function Gp(e,t){const n=Vo(e);if(!n.currentUser.isEqual(t)){Ro("SyncEngine","User change. New user:",t.toKey());const e=await qd(n.localStore,t);n.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new zo(Bo.CANCELLED,t))}))})),e.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Hp(n,e.us)}}function Qp(e,t){const n=Vo(e),r=n.Ca.get(t);if(r&&r.pa)return lu().add(r.key);{let e=lu();const r=n.Sa.get(t);if(!r)return e;for(const t of r){const r=n.wa.get(t);e=e.unionWith(r.view.Ia)}return e}}async function $p(e,t){const n=Vo(e),r=await $d(n.localStore,t.query,!0),i=t.view.fa(r);return n.isPrimaryClient&&qp(n,t.targetId,i.Va),i}async function Jp(e,t){const n=Vo(e);return Yd(n.localStore,t).then((e=>Hp(n,e)))}async function Yp(e,t,n,r){const i=Vo(e),o=await function(e,t){const n=Vo(e),r=Vo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Es.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await Wf(i.remoteStore):"acknowledged"===n||"rejected"===n?(Vp(i,t,r||null),Up(i,t),function(e,t){Vo(Vo(e).mutationQueue).Mn(t)}(i.localStore,t)):Fo(),await Hp(i,o)):Ro("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Xp(e,t,n){const r=Vo(e),i=[],o=[];for(const s of t){let e;const t=r.Sa.get(s);if(t&&0!==t.length){e=await Gd(r.localStore,zc(t[0]));for(const e of t){const t=r.wa.get(e),n=await $p(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await Jd(r.localStore,s);e=await Gd(r.localStore,t),await Op(r,Zp(t),s,!1,e.resumeToken)}i.push(e)}return r.ya.u_(o),i}function Zp(e){return jc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function em(e){return function(e){return Vo(Vo(e).persistence).Bi()}(Vo(e).localStore)}async function tm(e,t,n,r){const i=Vo(e);if(i.Oa)return void Ro("SyncEngine","Ignoring unexpected query state notification.");const o=i.Sa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await Yd(i.localStore,Jc(o[0])),r=sl.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Sa.EMPTY_BYTE_STRING);await Hp(i,e,r);break}case"rejected":await Qd(i.localStore,t,!0),Bp(i,t,r);break;default:Fo()}}async function nm(e,t,n){const r=rm(e);if(r.Oa){for(const e of t){if(r.Sa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Ro("SyncEngine","Adding an already active target "+e);continue}const t=await Jd(r.localStore,e),n=await Gd(r.localStore,t);await Op(r,Zp(t),n.targetId,!1,n.resumeToken),Of(r.remoteStore,n)}for(const e of n)r.Sa.has(e)&&await Qd(r.localStore,e,!1).then((()=>{Pf(r.remoteStore,e),Bp(r,e)})).catch(_s)}}function rm(e){const t=Vo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Rp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lp.bind(null,t),t.ya.u_=dp.bind(null,t.eventManager),t.ya.La=fp.bind(null,t.eventManager),t}function im(e){const t=Vo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Fp.bind(null,t),t}class om{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return zd(this.persistence,new Vd,e.initialUser,this.serializer)}createPersistence(e){return new Cd(Ad.Hr,this.serializer)}createSharedClientState(e){return new lf}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sm extends om{constructor(e,t,n){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await im(this.ka.syncEngine),await Wf(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return zd(this.persistence,new Vd,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new id(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Ds(t,this.persistence);return new Ps(e.asyncQueue,n)}createPersistence(e){const t=jd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?qh.withCacheSize(this.cacheSizeBytes):qh.DEFAULT;return new Rd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,wf(),bf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new lf}}class am extends sm{constructor(e,t){super(e,t,!1),this.ka=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ka.syncEngine;this.sharedClientState instanceof uf&&(this.sharedClientState.syncEngine={Zs:Yp.bind(null,t),Xs:tm.bind(null,t),eo:nm.bind(null,t),Bi:em.bind(null,t),Ys:Jp.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Vo(e);if(rm(n),im(n),!0===t&&!0!==n.Oa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Xp(n,e.toArray());n.Oa=!0,await ep(n.remoteStore,!0);for(const r of t)Of(n.remoteStore,r)}else if(!1===t&&!1!==n.Oa){const e=[];let t=Promise.resolve();n.Sa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Bp(n,i),Qd(n.localStore,i,!0)))),Pf(n.remoteStore,i)})),await t,await Xp(n,e),function(e){const t=Vo(e);t.Ca.forEach(((e,n)=>{Pf(t.remoteStore,n)})),t.va.mr(),t.Ca=new Map,t.Da=new ga(us.comparator)}(n),n.Oa=!1,await ep(n.remoteStore,!1)}}(this.ka.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=wf();if(!uf.D(t))throw new zo(Bo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=jd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uf(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class cm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Mp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gp.bind(null,this.syncEngine),await ep(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new up}createDatastore(e){const t=_f(e.databaseInfo.databaseId),n=function(e){return new yf(e)}(e.databaseInfo);return function(e,t,n,r){return new kf(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Cf(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Mp(this.syncEngine,e,0)),df.D()?new df:new hf)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new xp(e,t,n,r,i,o);return s&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Vo(e);Ro("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Af(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function um(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class lm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Mo("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class hm{constructor(e,t){this.Ka=e,this.serializer=t,this.metadata=new qo,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((e=>{e&&e.ra()?this.metadata.resolve(e.na.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.na))))}),(e=>this.metadata.reject(e)))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(null===e)return null;const t=this.$a.decode(e),n=Number(t);isNaN(n)&&this.Ga("length string (".concat(t,") is not valid number"));const r=await this.za(n);return new yp(JSON.parse(r),e.length+n)}ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(0===this.buffer.length)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const t=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ga(e){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ha(){const e=await this.Ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class dm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new zo(Bo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Vo(e),r={documents:t.map((e=>xl(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,ss.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Uo(!!t.found),t.found.name,t.found.updateTime;const n=Cl(e,t.found.name),r=Tl(t.found.updateTime),i=t.found.createTime?Tl(t.found.createTime):is.min(),o=new tc({mapValue:{fields:t.found.fields}});return rc.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){Uo(!!t.missing),Uo(!!t.readTime);const n=Cl(e,t.missing),r=Tl(t.readTime);return rc.newNoDocument(n,r)}(e,t):Fo()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());Uo(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new qu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=us.fromPath(t);this.mutations.push(new Wu(n,this.precondition(n)))})),await async function(e,t){const n=Vo(e),r={writes:t.map((e=>Ml(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,ss.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Fo();t=is.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new zo(Bo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(is.min())?Au.exists(!1):Au.updateTime(t):Au.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(is.min()))throw new zo(Bo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Au.updateTime(t)}return Au.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class fm{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Ja=n.maxAttempts,this.jo=new Ef(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo((async()=>{const e=new dm(this.datastore),t=this.Xa(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.eu(e)}))))})).catch((e=>{this.eu(e)}))}))}Xa(e){try{const t=this.updateFunction(e);return!Ms(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((()=>(this.Za(),Promise.resolve())))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Yu(t)}return!1}}class pm{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ao.UNAUTHENTICATED,this.clientId=Zo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ro("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ro("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zo(Bo.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(MT){const n=ip(MT,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function mm(e,t){e.asyncQueue.verifyOperationInProgress(),Ro("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await qd(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function gm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ym(e);Ro("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Zf(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Zf(t.remoteStore,n))),e._onlineComponents=t}function vm(e){return"FirebaseError"===e.name?e.code===Bo.FAILED_PRECONDITION||e.code===Bo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function ym(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ro("FirestoreClient","Using user provided OfflineComponentProvider");try{await mm(e,e._uninitializedComponentsProvider._offline)}catch(MT){const n=MT;if(!vm(n))throw n;Lo("Error using user provided cache. Falling back to memory cache: "+n),await mm(e,new om)}}else Ro("FirestoreClient","Using default OfflineComponentProvider"),await mm(e,new om);return e._offlineComponents}async function wm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ro("FirestoreClient","Using user provided OnlineComponentProvider"),await gm(e,e._uninitializedComponentsProvider._online)):(Ro("FirestoreClient","Using default OnlineComponentProvider"),await gm(e,new cm))),e._onlineComponents}function bm(e){return ym(e).then((e=>e.persistence))}function _m(e){return ym(e).then((e=>e.localStore))}function Em(e){return wm(e).then((e=>e.remoteStore))}function Tm(e){return wm(e).then((e=>e.syncEngine))}function Sm(e){return wm(e).then((e=>e.datastore))}async function Im(e){const t=await wm(e),n=t.eventManager;return n.onListen=Cp.bind(null,t.syncEngine),n.onUnlisten=Pp.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Np.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Dp.bind(null,t.syncEngine),n}function km(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new qo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new lm({next:o=>{t.enqueueAndForget((()=>hp(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new zo(Bo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new zo(Bo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new vp(Fc(n.path),o,{includeMetadataChanges:!0,ta:!0});return lp(e,s)}(await Im(e),e.asyncQueue,t,n,r))),r.promise}function xm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new qo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new lm({next:n=>{t.enqueueAndForget((()=>hp(e,s))),n.fromCache&&"server"===r.source?i.reject(new zo(Bo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new vp(n,o,{includeMetadataChanges:!0,ta:!0});return lp(e,s)}(await Im(e),e.asyncQueue,t,n,r))),r.promise}function Cm(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?el().encode(e):e,function(e,t){return new hm(e,t)}(function(e,t){if(e instanceof Uint8Array)return um(e,t);if(e instanceof ArrayBuffer)return um(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,_f(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Vo(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Vo(e),r=Tl(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(_p(r));const i=new bp(r,e.localStore,t.serializer);let o=await t.Ba();for(;o;){const e=await i.sa(o);e&&n._updateProgress(e),o=await t.Ba()}const s=await i.complete();return await Hp(e,s.aa,void 0),await function(e,t){const n=Vo(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s._a)}catch(e){return Lo("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Tm(e),i,r)}))}function Nm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Am=new Map;function Om(e,t,n){if(!n)throw new zo(Bo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Pm(e,t,n,r){if(!0===t&&!0===r)throw new zo(Bo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Dm(e){if(!us.isDocumentKey(e))throw new zo(Bo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Rm(e){if(us.isDocumentKey(e))throw new zo(Bo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Mm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Fo()}function Lm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new zo(Bo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mm(e);throw new zo(Bo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function jm(e,t){if(t<=0)throw new zo(Bo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Fm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new zo(Bo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new zo(Bo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new zo(Bo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new zo(Bo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new zo(Bo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Um{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new zo(Bo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new zo(Bo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ko;switch(e.type){case"firstParty":return new $o(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new zo(Bo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Am.get(e);t&&(Ro("ComponentProvider","Removing Datastore"),Am.delete(e),t.terminate())}(this),Promise.resolve()}}function Vm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=Lm(e,Um))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ao.MOCK_USER;else{t=nt(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new zo(Bo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ao(o)}e._authCredentials=new Ho(new Wo(t,n))}}class Bm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Bm(this.firestore,e,this._query)}}class zm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zm(this.firestore,e,this._key)}}class qm extends Bm{constructor(e,t,n){super(e,t,Fc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zm(this.firestore,null,new us(e))}withConverter(e){return new qm(this.firestore,e,this._path)}}function Wm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=lt(e),Om("collection","path",t),e instanceof Um){const n=ss.fromString(t,...r);return Rm(n),new qm(e,null,n)}{if(!(e instanceof zm||e instanceof qm))throw new zo(Bo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ss.fromString(t,...r));return Rm(n),new qm(e.firestore,null,n)}}function Km(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=lt(e),1===arguments.length&&(t=Zo.newId()),Om("doc","path",t),e instanceof Um){const n=ss.fromString(t,...r);return Dm(n),new zm(e,null,new us(n))}{if(!(e instanceof zm||e instanceof qm))throw new zo(Bo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ss.fromString(t,...r));return Dm(n),new zm(e.firestore,e instanceof qm?e.converter:null,new us(n))}}function Hm(e,t){return e=lt(e),t=lt(t),(e instanceof zm||e instanceof qm)&&(t instanceof zm||t instanceof qm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Gm(e,t){return e=lt(e),t=lt(t),e instanceof Bm&&t instanceof Bm&&e.firestore===t.firestore&&Hc(e._query,t._query)&&e.converter===t.converter}class Qm{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Ef(this,"async_queue_retry"),this.cu=()=>{const e=bf();e&&Ro("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=bf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=bf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new qo;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!xs(e))throw e;Ro("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Mo("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=rp.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&Fo()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function $m(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Jm{constructor(){this._progressObserver={},this._taskCompletionResolver=new qo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ym extends Um{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Qm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||eg(this),this._firestoreClient.terminate()}}function Xm(e,t){const n="string"==typeof e?e:t||"(default)",r=me("object"==typeof e?e:ke(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=tt("firestore");e&&Vm(r,...e)}return r}function Zm(e){return e._firestoreClient||eg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function eg(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Pa(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Nm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new pm(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function tg(e,t,n){const r=new qo;return e.asyncQueue.enqueue((async()=>{try{await mm(e,n),await gm(e,t),r.resolve()}catch(e){const n=e;if(!vm(n))throw n;Lo("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function ng(e){return function(e){const t=new qo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Vo(e);jf(n.remoteStore)||Ro("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Vo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ma.get(e)||[];r.push(t),n.Ma.set(e,r)}catch(e){const n=ip(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Tm(e),t))),t.promise}(Zm(e=Lm(e,Ym)))}function rg(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await bm(e),n=await Em(e);return t.setNetworkEnabled(!0),function(e){const t=Vo(e);return t.v_.delete(0),Nf(t)}(n)}))}(Zm(e=Lm(e,Ym)))}function ig(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await bm(e),n=await Em(e);return t.setNetworkEnabled(!1),async function(e){const t=Vo(e);t.v_.add(0),await Af(t),t.x_.set("Offline")}(n)}))}(Zm(e=Lm(e,Ym)))}function og(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Vo(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await _m(e),t)))}(Zm(e=Lm(e,Ym)),t).then((t=>t?new Bm(e,null,t.query):null))}function sg(e){if(e._initialized||e._terminated)throw new zo(Bo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ag{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ag(Sa.fromBase64String(e))}catch(e){throw new zo(Bo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ag(Sa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new zo(Bo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ug{constructor(e){this._methodName=e}}class lg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new zo(Bo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new zo(Bo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return es(this._lat,e._lat)||es(this._long,e._long)}}const hg=/^__.*__$/;class dg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fu(e,this.data,t,this.fieldTransforms)}}class fg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Uu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fo()}}class mg{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new mg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}yu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Mg(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(pg(this.Vu)&&hg.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class gg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||_f(e)}Cu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new mg({Vu:e,methodName:t,Du:n,path:cs.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vg(e){const t=e._freezeSettings(),n=_f(e._databaseId);return new gg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function yg(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Cu(o.merge||o.mergeFields?2:0,t,n,i);Og("Data must be an object, but it was:",s,r);const a=Ng(r,s);let c,u;if(o.merge)c=new Ea(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Pg(t,r,n);if(!s.contains(i))throw new zo(Bo.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Lg(e,i)||e.push(i)}c=new Ea(e),u=s.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,u=s.fieldTransforms;return new dg(new tc(a),c,u)}class wg extends ug{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wg}}function bg(e,t,n){return new mg({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class _g extends ug{_toFieldTransform(e){return new Cu(e.path,new bu)}isEqual(e){return e instanceof _g}}class Eg extends ug{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=bg(this,e,!0),n=this.vu.map((e=>Cg(e,t))),r=new _u(n);return new Cu(e.path,r)}isEqual(e){return e instanceof Eg&&ct(this.vu,e.vu)}}class Tg extends ug{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=bg(this,e,!0),n=this.vu.map((e=>Cg(e,t))),r=new Tu(n);return new Cu(e.path,r)}isEqual(e){return e instanceof Tg&&ct(this.vu,e.vu)}}class Sg extends ug{constructor(e,t){super(e),this.Fu=t}_toFieldTransform(e){const t=new Iu(e.serializer,mu(e.serializer,this.Fu));return new Cu(e.path,t)}isEqual(e){return e instanceof Sg&&this.Fu===e.Fu}}function Ig(e,t,n,r){const i=e.Cu(1,t,n);Og("Data must be an object, but it was:",i,r);const o=[],s=tc.empty();pa(r,((e,r)=>{const a=Rg(t,e,n);r=lt(r);const c=i.yu(a);if(r instanceof wg)o.push(a);else{const e=Cg(r,c);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Ea(o);return new fg(s,a,i.fieldTransforms)}function kg(e,t,n,r,i,o){const s=e.Cu(1,t,n),a=[Pg(t,r,n)],c=[i];if(o.length%2!=0)throw new zo(Bo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(Pg(t,o[d])),c.push(o[d+1]);const u=[],l=tc.empty();for(let d=a.length-1;d>=0;--d)if(!Lg(u,a[d])){const e=a[d];let t=c[d];t=lt(t);const n=s.yu(e);if(t instanceof wg)u.push(e);else{const r=Cg(t,n);null!=r&&(u.push(e),l.set(e,r))}}const h=new Ea(u);return new fg(l,h,s.fieldTransforms)}function xg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Cg(n,e.Cu(r?4:3,t))}function Cg(e,t){if(Ag(e=lt(e)))return Og("Unsupported field value:",t,e),Ng(e,t);if(e instanceof ug)return function(e,t){if(!pg(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Cg(i,t.wu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=lt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=rs.fromDate(e);return{timestampValue:bl(t.serializer,n)}}if(e instanceof rs){const n=new rs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bl(t.serializer,n)}}if(e instanceof lg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ag)return{bytesValue:_l(t.serializer,e._byteString)};if(e instanceof zm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Su("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Sl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(Mm(e)))}(e,t)}function Ng(e,t){const n={};return ma(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pa(e,((e,r)=>{const i=Cg(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ag(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof rs||e instanceof lg||e instanceof ag||e instanceof zm||e instanceof ug)}function Og(e,t,n){if(!Ag(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Mm(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function Pg(e,t,n){if((t=lt(t))instanceof cg)return t._internalPath;if("string"==typeof t)return Rg(e,t);throw Mg("Field path arguments must be of type string or ",e,!1,void 0,n)}const Dg=new RegExp("[~\\*/\\[\\]]");function Rg(e,t,n){if(t.search(Dg)>=0)throw Mg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new cg(...t.split("."))._internalPath}catch(St){throw Mg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Mg(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=" in field ".concat(r)),s&&(c+=" in document ".concat(i)),c+=")"),new zo(Bo.INVALID_ARGUMENT,a+e+c)}function Lg(e,t){return e.some((e=>e.isEqual(t)))}class jg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new zm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ug("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fg extends jg{data(){return super.data()}}function Ug(e,t){return"string"==typeof t?Rg(e,t):t instanceof cg?t._internalPath:t._delegate._internalPath}function Vg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new zo(Bo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bg{}class zg extends Bg{}function qg(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Bg&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Kg)).length,n=e.filter((e=>e instanceof Wg)).length;if(t>1||t>0&&n>0)throw new zo(Bo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class Wg extends zg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Wg(e,t,n)}_apply(e){const t=this._parse(e);return Zg(e._query,t),new Bm(e.firestore,e.converter,Wc(e._query,t))}_parse(e){const t=vg(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new zo(Bo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Xg(s,o);const t=[];for(const n of s)t.push(Yg(r,e,n));a={arrayValue:{values:t}}}else a=Yg(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Xg(s,o),a=xg(n,t,s,"in"===o||"not-in"===o);return lc.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Kg extends Bg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Kg(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:hc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Zg(n,i),n=Wc(n,i)}(e._query,t),new Bm(e.firestore,e.converter,Wc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Hg extends zg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hg(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new zo(Bo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new zo(Bo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ac(t,n)}(e._query,this._field,this._direction);return new Bm(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Lc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Gg extends zg{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Gg(e,t,n)}_apply(e){return new Bm(e.firestore,e.converter,Kc(e._query,this._limit,this._limitType))}}class Qg extends zg{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Qg(e,t,n)}_apply(e){const t=Jg(e,this.type,this._docOrFields,this._inclusive);return new Bm(e.firestore,e.converter,function(e,t){return new Lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class $g extends zg{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new $g(e,t,n)}_apply(e){const t=Jg(e,this.type,this._docOrFields,this._inclusive);return new Bm(e.firestore,e.converter,function(e,t){return new Lc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Jg(e,t,n,r){if(n[0]=lt(n[0]),n[0]instanceof jg)return function(e,t,n,r,i){if(!r)throw new zo(Bo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of Bc(e))if(s.field.isKeyField())o.push(qa(t,r.key));else{const e=r.data.field(s.field);if(Na(e))throw new zo(Bo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new zo(Bo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new ic(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=vg(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new zo(Bo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const o=i[c];if(s[c].field.isKeyField()){if("string"!=typeof o)throw new zo(Bo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!Vc(e)&&-1!==o.indexOf("/"))throw new zo(Bo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(ss.fromString(o));if(!us.isDocumentKey(n))throw new zo(Bo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new us(n);a.push(qa(t,i))}else{const e=xg(n,r,o);a.push(e)}}return new ic(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Yg(e,t,n){if("string"==typeof(n=lt(n))){if(""===n)throw new zo(Bo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vc(t)&&-1!==n.indexOf("/"))throw new zo(Bo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ss.fromString(n));if(!us.isDocumentKey(r))throw new zo(Bo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return qa(e,new us(r))}if(n instanceof zm)return qa(e,n._key);throw new zo(Bo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Mm(n),"."))}function Xg(e,t){if(!Array.isArray(e)||0===e.length)throw new zo(Bo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Zg(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new zo(Bo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new zo(Bo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ev{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(La(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xa(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ca(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fo()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return pa(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new lg(xa(e.latitude),xa(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Aa(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Oa(e));default:return null}}convertTimestamp(e){const t=ka(e);return new rs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ss.fromString(e);Uo(Ql(n));const r=new Da(n.get(1),n.get(3)),i=new us(n.popFirst(5));return r.isEqual(t)||Mo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function tv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class nv extends ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new ag(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zm(this.firestore,null,t)}}class rv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iv extends jg{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ov(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ug("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class ov extends iv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class sv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new rv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ov(this._firestore,this._userDataWriter,n.key,n,new rv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zo(Bo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new ov(e._firestore,e._userDataWriter,n.doc.key,n.doc,new rv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new ov(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:av(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function av(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fo()}}function cv(e,t){return e instanceof iv&&t instanceof iv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof sv&&t instanceof sv&&e._firestore===t._firestore&&Gm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class uv extends ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new ag(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zm(this.firestore,null,t)}}function lv(e){e=Lm(e,zm);const t=Lm(e.firestore,Ym),n=Zm(t),r=new uv(t);return function(e,t){const n=new qo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Vo(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new zo(Bo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=ip(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await _m(e),t,n))),n.promise}(n,e._key).then((n=>new iv(t,r,e._key,n,new rv(null!==n&&n.hasLocalMutations,!0),e.converter)))}function hv(e){e=Lm(e,Bm);const t=Lm(e.firestore,Ym),n=Zm(t),r=new uv(t);return function(e,t){const n=new qo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await $d(e,t,!0),i=new Sp(t,r.hs),o=i.Ta(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=ip(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await _m(e),t,n))),n.promise}(n,e._query).then((n=>new sv(t,r,e,n)))}function dv(e,t,n){e=Lm(e,zm);const r=Lm(e.firestore,Ym),i=tv(e.converter,t,n);return vv(r,[yg(vg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Au.none())])}function fv(e,t,n){e=Lm(e,zm);const r=Lm(e.firestore,Ym),i=vg(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),c=3;c<s;c++)a[c-3]=arguments[c];return o="string"==typeof(t=lt(t))||t instanceof cg?kg(i,"updateDoc",e._key,t,n,a):Ig(i,"updateDoc",e._key,t),vv(r,[o.toMutation(e._key,Au.exists(!0))])}function pv(e,t){const n=Lm(e.firestore,Ym),r=Km(e),i=tv(e.converter,t);return vv(n,[yg(vg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Au.exists(!1))]).then((()=>r))}function mv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=lt(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||$m(n[c])||(a=n[c],c++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if($m(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[c+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let l,h,d;if(e instanceof zm)h=Lm(e.firestore,Ym),d=Fc(e._key.path),l={next:t=>{n[c]&&n[c](yv(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Lm(e,Bm);h=Lm(t.firestore,Ym),d=t._query;const r=new uv(h);l={next:e=>{n[c]&&n[c](new sv(h,r,t,e))},error:n[c+1],complete:n[c+2]},Vg(e._query)}return function(e,t,n,r){const i=new lm(r),o=new vp(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>lp(await Im(e),o))),()=>{i.Qa(),e.asyncQueue.enqueueAndForget((async()=>hp(await Im(e),o)))}}(Zm(h),d,u,l)}function gv(e,t){return function(e,t){const n=new lm(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Vo(e).W_.add(t),t.next()}(await Im(e),n))),()=>{n.Qa(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Vo(e).W_.delete(t)}(await Im(e),n)))}}(Zm(e=Lm(e,Ym)),$m(t)?t:{next:t})}function vv(e,t){return function(e,t){const n=new qo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=im(e);try{const e=await function(e,t){const n=Vo(e),r=rs.now(),i=t.reduce(((e,t)=>e.add(t.key)),lu());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=tu(),c=lu();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Lu(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Uu(e.key,t,nc(t.value.mapValue),Au.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:iu(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Fa[e.currentUser.toKey()];r||(r=new ga(es)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Hp(r,e.changes),await Wf(r.remoteStore)}catch(e){const t=ip(e,"Failed to persist write");n.reject(t)}}(await Tm(e),t,n))),n.promise}(Zm(e),t)}function yv(e,t,n){const r=n.docs.get(t._key),i=new uv(e);return new iv(e,i,t._key,r,new rv(n.hasPendingWrites,n.fromCache),t.converter)}const wv={maxAttempts:5};class bv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vg(e)}set(e,t,n){this._verifyNotCommitted();const r=_v(e,this._firestore),i=tv(r.converter,t,n),o=yg(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Au.none())),this}update(e,t,n){this._verifyNotCommitted();const r=_v(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=lt(t))||t instanceof cg?kg(this._dataReader,"WriteBatch.update",r._key,t,n,s):Ig(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Au.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_v(e,this._firestore);return this._mutations=this._mutations.concat(new qu(t._key,Au.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new zo(Bo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _v(e,t){if((e=lt(e)).firestore!==t)throw new zo(Bo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Ev extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=vg(e)}get(e){const t=_v(e,this._firestore),n=new nv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Fo();const r=e[0];if(r.isFoundDocument())return new jg(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new jg(this._firestore,n,t._key,null,t.converter);throw Fo()}))}set(e,t,n){const r=_v(e,this._firestore),i=tv(r.converter,t,n),o=yg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=_v(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=lt(t))||t instanceof cg?kg(this._dataReader,"Transaction.update",r._key,t,n,s):Ig(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=_v(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_v(e,this._firestore),n=new uv(this._firestore);return super.get(e).then((e=>new iv(this._firestore,n,t._key,e._document,new rv(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Oo=e}(Te),pe(new v("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new Ym(new Go(e.getProvider("auth-internal")),new Yo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new zo(Bo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Ne(No,"4.5.1",e),Ne(No,"4.5.1","esm2017")}();const Tv=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,u=t>>2,l=(3&t)<<4|s>>4;let h=(15&s)<<2|c>>6,d=63&c;a||(d=64,o||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Tv(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Iv;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Iv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kv=function(e){try{return Sv.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const xv=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Cv=()=>{try{return xv()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&kv(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}};function Nv(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Av(){var e;const t=null===(e=Cv())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Ov(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Pv(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Dv(){const e=Nv();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Rv(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Mv extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Mv.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lv.prototype.create)}}class Lv{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(jv,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Mv(n,o,t)}}const jv=/\{\$([^}]+)}/g;function Fv(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Uv(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Vv(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Bv{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=zv),void 0===r.error&&(r.error=zv),void 0===r.complete&&(r.complete=zv);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function zv(){}function qv(e){return e&&e._delegate?e._delegate:e}function Wv(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Kv="facebook.com",Hv="github.com",Gv="google.com",Qv="password",$v="twitter.com",Jv="EMAIL_SIGNIN",Yv="PASSWORD_RESET",Xv="RECOVER_EMAIL",Zv="REVERT_SECOND_FACTOR_ADDITION",ey="VERIFY_AND_CHANGE_EMAIL",ty="VERIFY_EMAIL";function ny(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ry=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},iy=ny,oy=new Lv("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),sy=new x("@firebase/auth");function ay(e){if(sy.logLevel<=E.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];sy.error("Auth (".concat(Te,"): ").concat(e),...n)}}function cy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw fy(e,...n)}function uy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fy(e,...n)}function ly(e,t,n){const r=Object.assign(Object.assign({},iy()),{[t]:n});return new Lv("auth","Firebase",r).create(t,{appName:e.name})}function hy(e){return ly(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dy(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&cy(e,"argument-error"),ly(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function fy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return oy.create(e,...n)}function py(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw fy(t,...r)}}function my(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ay(t),new Error(t)}function gy(e,t){e||my(t)}function vy(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yy(){return"http:"===wy()||"https:"===wy()}function wy(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class by{constructor(e,t){this.shortDelay=e,this.longDelay=t,gy(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nv())||Pv()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yy()||Ov()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function _y(e,t){gy(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ey{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void my("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void my("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void my("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ty={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Sy=new by(3e4,6e4);function Iy(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ky(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return xy(e,i,(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=Fv(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Ey.fetch()(Ny(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function xy(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ty),t);try{const t=new Oy(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Py(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Py(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Py(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Py(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw ly(e,a,s);cy(e,a)}}catch(i){if(i instanceof Mv)throw i;cy(e,"network-request-failed",{message:String(i)})}}async function Cy(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await ky(e,t,n,r,i);return"mfaPendingCredential"in o&&cy(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Ny(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?_y(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Ay(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Oy{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(uy(this.auth,"network-request-failed"))),Sy.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Py(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=uy(e,t,r);return i.customData._tokenResponse=n,i}function Dy(e){return void 0!==e&&void 0!==e.getResponse}function Ry(e){return void 0!==e&&void 0!==e.enterprise}class My{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ay(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ly(e,t){return ky(e,"GET","/v2/recaptchaConfig",Iy(e,t))}async function jy(e,t){return ky(e,"POST","/v1/accounts:lookup",t)}function Fy(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Uy(e){return 1e3*Number(e)}function Vy(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ay("JWT malformed, contained fewer than 3 sections"),null;try{const e=kv(n);return e?JSON.parse(e):(ay("Failed to decode base64 JWT payload"),null)}catch(i){return ay("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function By(e){const t=Vy(e);return py(t,"internal-error"),py("undefined"!==typeof t.exp,"internal-error"),py("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function zy(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return t;try{return await t}catch(r){throw r instanceof Mv&&qy(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function qy(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}class Wy{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ky{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fy(this.lastLoginAt),this.creationTime=Fy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Hy(e){var t;const n=e.auth,r=await e.getIdToken(),i=await zy(e,jy(n,{idToken:r}));py(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?Gy(o.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,s),c=e.isAnonymous,u=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),l=!!c&&u,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ky(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(e,h)}function Gy(e){return e.map((e=>{var{providerId:t}=e,n=Wv(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Qy{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){py(e.idToken,"internal-error"),py("undefined"!==typeof e.idToken,"internal-error"),py("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):By(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){py(0!==e.length,"internal-error");const t=By(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(py(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await xy(e,{},(async()=>{const n=Fv({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Ny(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Ey.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Qy;return n&&(py("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(py("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(py("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qy,this.toJSON())}_performRefresh(){return my("not implemented")}}function $y(e,t){py("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Jy{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Wv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ky(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await zy(this,this.stsTokenManager.getToken(this.auth,e));return py(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=qv(e),r=await n.getIdToken(t),i=Vy(r);py(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Fy(Uy(i.auth_time)),issuedAtTime:Fy(Uy(i.iat)),expirationTime:Fy(Uy(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=qv(e);await Hy(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(py(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jy(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){py(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Hy(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ye(this.auth.app))return Promise.reject(hy(this.auth));const e=await this.getIdToken();return await zy(this,async function(e,t){return ky(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;py(y&&E,e,"internal-error");const T=Qy.fromJSON(this.name,E);py("string"===typeof y,e,"internal-error"),$y(l,e.name),$y(h,e.name),py("boolean"===typeof w,e,"internal-error"),py("boolean"===typeof b,e,"internal-error"),$y(d,e.name),$y(f,e.name),$y(p,e.name),$y(m,e.name),$y(g,e.name),$y(v,e.name);const S=new Jy({uid:y,auth:e,email:h,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Qy;r.updateFromServerResponse(t);const i=new Jy({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Hy(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];py(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Gy(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new Qy;s.updateFromIdToken(n);const a=new Jy({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ky(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,c),a}}const Yy=new Map;function Xy(e){gy(e instanceof Function,"Expected a class definition");let t=Yy.get(e);return t?(gy(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Yy.set(e,t),t)}class Zy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Zy.type="NONE";const ew=Zy;function tw(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class nw{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=tw(this.userKey,r.apiKey,i),this.fullPersistenceKey=tw("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jy._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new nw(Xy(ew),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Xy(ew);const o=tw(n,e.config.apiKey,e.name);let s=null;for(const u of t)try{const t=await u._get(o);if(t){const n=Jy._fromJSON(e,t);u!==i&&(s=n),i=u;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(c){}}))),new nw(i,e,n)):new nw(i,e,n)}}function rw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(aw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(iw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(uw(t))return"Blackberry";if(lw(t))return"Webos";if(ow(t))return"Safari";if((t.includes("chrome/")||sw(t))&&!t.includes("edge/"))return"Chrome";if(cw(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function iw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return/firefox\//i.test(e)}function ow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function sw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return/crios\//i.test(e)}function aw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return/iemobile/i.test(e)}function cw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return/android/i.test(e)}function uw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return/blackberry/i.test(e)}function lw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return/webos/i.test(e)}function hw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function dw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();var t;return hw(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}function fw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return hw(e)||cw(e)||lw(e)||uw(e)||/windows phone/i.test(e)||aw(e)}function pw(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=rw(Nv());break;case"Worker":t="".concat(rw(Nv()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Te,"/").concat(r)}class mw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(YT){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class gw{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class vw{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ww(this),this.idTokenSubscription=new ww(this),this.beforeStateQueue=new mw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xy(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await nw.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await jy(this,{idToken:e}),n=await Jy._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ye(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return py(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hy(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ye(this.app))return Promise.reject(hy(this));const t=e?qv(e):null;return t&&py(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&py(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ye(this.app)?Promise.reject(hy(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ye(this.app)?Promise.reject(hy(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Xy(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ky(e,"GET","/v2/passwordPolicy",Iy(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new gw(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Lv("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ky(e,"POST","/v2/accounts:revokeToken",Iy(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xy(e)||this._popupRedirectResolver;py(t,this,"argument-error"),this.redirectPersistenceManager=await nw.create(this,[Xy(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(py(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return py(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(sy.logLevel<=E.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];sy.warn("Auth (".concat(Te,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function yw(e){return qv(e)}class ww{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Bv(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return py(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _w(e){return bw.loadJS(e)}function Ew(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Tw{constructor(e){this.type="recaptcha-enterprise",this.auth=yw(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ry(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ly(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new My(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Ry(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=bw.recaptchaEnterpriseScript;0!==t.length&&(t+=i),_w(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Sw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Tw(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Iw(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Sw(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Sw(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function kw(e,t,n){const r=yw(e);py(r._canInitEmulator,r,"emulator-config-failed"),py(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=xw(t),{host:s,port:a}=function(e){const t=xw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Cw(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Cw(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function xw(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Cw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Nw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return my("not implemented")}_getIdTokenResponse(e){return my("not implemented")}_linkToIdToken(e,t){return my("not implemented")}_getReauthenticationResolver(e){return my("not implemented")}}async function Aw(e,t){return ky(e,"POST","/v1/accounts:resetPassword",Iy(e,t))}async function Ow(e,t){return ky(e,"POST","/v1/accounts:signUp",t)}async function Pw(e,t){return Cy(e,"POST","/v1/accounts:signInWithPassword",Iy(e,t))}async function Dw(e,t){return ky(e,"POST","/v1/accounts:sendOobCode",Iy(e,t))}async function Rw(e,t){return Dw(e,t)}async function Mw(e,t){return Dw(e,t)}class Lw extends Nw{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Lw(e,t,"password")}static _fromEmailAndCode(e,t){return new Lw(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Iw(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Pw);case"emailLink":return async function(e,t){return Cy(e,"POST","/v1/accounts:signInWithEmailLink",Iy(e,t))}(e,{email:this._email,oobCode:this._password});default:cy(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Iw(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ow);case"emailLink":return async function(e,t){return Cy(e,"POST","/v1/accounts:signInWithEmailLink",Iy(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:cy(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function jw(e,t){return Cy(e,"POST","/v1/accounts:signInWithIdp",Iy(e,t))}class Fw extends Nw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fw(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cy("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Wv(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Fw(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return jw(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,jw(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jw(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fv(t)}return e}}const Uw={USER_NOT_FOUND:"user-not-found"};class Vw extends Nw{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Vw({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Vw({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Cy(e,"POST","/v1/accounts:signInWithPhoneNumber",Iy(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Cy(e,"POST","/v1/accounts:signInWithPhoneNumber",Iy(e,t));if(n.temporaryProof)throw Py(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Cy(e,"POST","/v1/accounts:signInWithPhoneNumber",Iy(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Uw)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Vw({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Bw{constructor(e){var t,n,r,i,o,s;const a=Uv(Vv(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);py(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=Uv(Vv(e)).link,n=t?Uv(Vv(t)).deep_link_id:null,r=Uv(Vv(e)).deep_link_id;return(r?Uv(Vv(r)).link:null)||r||n||t||e}(e);try{return new Bw(t)}catch(n){return null}}}class zw{constructor(){this.providerId=zw.PROVIDER_ID}static credential(e,t){return Lw._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Bw.parseLink(t);return py(n,"argument-error"),Lw._fromEmailAndCode(e,n.code,n.tenantId)}}zw.PROVIDER_ID="password",zw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",zw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class qw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ww extends qw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Kw extends Ww{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return py("providerId"in t&&"signInMethod"in t,"argument-error"),Fw._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return py(e.idToken||e.accessToken,"argument-error"),Fw._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Kw.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Kw.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=t;if(!r&&!i&&!n&&!o)return null;if(!a)return null;try{return new Kw(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch(c){return null}}}class Hw extends Ww{constructor(){super("facebook.com")}static credential(e){return Fw._fromParams({providerId:Hw.PROVIDER_ID,signInMethod:Hw.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hw.credentialFromTaggedObject(e)}static credentialFromError(e){return Hw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Hw.credential(t.oauthAccessToken)}catch(n){return null}}}Hw.FACEBOOK_SIGN_IN_METHOD="facebook.com",Hw.PROVIDER_ID="facebook.com";class Gw extends Ww{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fw._fromParams({providerId:Gw.PROVIDER_ID,signInMethod:Gw.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gw.credentialFromTaggedObject(e)}static credentialFromError(e){return Gw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Gw.credential(n,r)}catch(i){return null}}}Gw.GOOGLE_SIGN_IN_METHOD="google.com",Gw.PROVIDER_ID="google.com";class Qw extends Ww{constructor(){super("github.com")}static credential(e){return Fw._fromParams({providerId:Qw.PROVIDER_ID,signInMethod:Qw.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qw.credentialFromTaggedObject(e)}static credentialFromError(e){return Qw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qw.credential(t.oauthAccessToken)}catch(n){return null}}}Qw.GITHUB_SIGN_IN_METHOD="github.com",Qw.PROVIDER_ID="github.com";class $w extends Nw{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return jw(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,jw(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jw(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new $w(n,i):null}static _create(e,t){return new $w(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Jw extends qw{constructor(e){py(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Jw.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Jw.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=$w.fromJSON(e);return py(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return $w._create(r,n)}catch(i){return null}}}class Yw extends Ww{constructor(){super("twitter.com")}static credential(e,t){return Fw._fromParams({providerId:Yw.PROVIDER_ID,signInMethod:Yw.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yw.credentialFromTaggedObject(e)}static credentialFromError(e){return Yw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Yw.credential(n,r)}catch(i){return null}}}async function Xw(e,t){return Cy(e,"POST","/v1/accounts:signUp",Iy(e,t))}Yw.TWITTER_SIGN_IN_METHOD="twitter.com",Yw.PROVIDER_ID="twitter.com";class Zw{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Jy._fromIdTokenResponse(e,n,r),o=eb(n);return new Zw({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=eb(n);return new Zw({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function eb(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class tb extends Mv{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,tb.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new tb(e,t,n,r)}}function nb(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw tb._fromErrorAndOperation(e,n,t,r);throw n}))}function rb(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function ib(e,t){const n=qv(e);await sb(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return ky(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=rb(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ob(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await zy(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Zw._forOperation(e,"link",r)}async function sb(e,t,n){await Hy(t);const r=!1===e?"provider-already-linked":"no-such-provider";py(rb(t.providerData).has(n)===e,t.auth,r)}async function ab(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ye(r.app))return Promise.reject(hy(r));const i="reauthenticate";try{const o=await zy(e,nb(r,i,t,e),n);py(o.idToken,r,"internal-error");const s=Vy(o.idToken);py(s,r,"internal-error");const{sub:a}=s;return py(e.uid===a,r,"user-mismatch"),Zw._forOperation(e,i,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&cy(r,"user-mismatch"),o}}async function cb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ye(e.app))return Promise.reject(hy(e));const r="signIn",i=await nb(e,r,t),o=await Zw._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function ub(e,t){return cb(yw(e),t)}async function lb(e,t){const n=qv(e);return await sb(!1,n,t.providerId),ob(n,t)}async function hb(e,t){return ab(qv(e),t)}async function db(e,t){if(ye(e.app))return Promise.reject(hy(e));const n=yw(e),r=await async function(e,t){return Cy(e,"POST","/v1/accounts:signInWithCustomToken",Iy(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Zw._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class fb{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?pb._fromServerResponse(e,t):"totpInfo"in t?mb._fromServerResponse(e,t):cy(e,"internal-error")}}class pb extends fb{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new pb(t)}}class mb extends fb{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new mb(t)}}function gb(e,t,n){var r;py((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),py("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(py(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(py(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function vb(e){const t=yw(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function yb(e,t){await async function(e,t){return ky(e,"POST","/v1/accounts:update",Iy(e,t))}(qv(e),{oobCode:t})}async function wb(e,t){const n=qv(e),r=await Aw(n,{oobCode:t}),i=r.requestType;switch(py(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":py(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":py(r.mfaInfo,n,"internal-error");default:py(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=fb._fromServerResponse(yw(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function bb(e,t){const n={identifier:t,continueUri:yy()?vy():"http://localhost"},{signinMethods:r}=await async function(e,t){return ky(e,"POST","/v1/accounts:createAuthUri",Iy(e,t))}(qv(e),n);return r||[]}async function _b(e,t){const n=qv(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&gb(n.auth,r,t);const{email:i}=await async function(e,t){return Dw(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Eb(e,t,n){const r=qv(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&gb(r.auth,i,n);const{email:o}=await async function(e,t){return Dw(e,t)}(r.auth,i);o!==e.email&&await e.reload()}async function Tb(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=qv(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await zy(i,async function(e,t){return ky(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function Sb(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await zy(e,async function(e,t){return ky(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}class Ib{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class kb extends Ib{constructor(e,t,n,r){super(e,t,n),this.username=r}}class xb extends Ib{constructor(e,t){super(e,"facebook.com",t)}}class Cb extends kb{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Nb extends Ib{constructor(e,t){super(e,"google.com",t)}}class Ab extends kb{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ob(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Vy(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Ib(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new xb(o,i);case"github.com":return new Cb(o,i);case"google.com":return new Nb(o,i);case"twitter.com":return new Ab(o,i,e.screenName||null);case"custom":case"anonymous":return new Ib(o,null);default:return new Ib(o,r,i)}}(n)}class Pb{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Pb("enroll",e,t)}static _fromMfaPendingCredential(e){return new Pb("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Pb._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Pb._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Db{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=yw(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>fb._fromServerResponse(n,e)));py(r.mfaPendingCredential,n,"internal-error");const o=Pb._fromMfaPendingCredential(r.mfaPendingCredential);return new Db(o,i,(async e=>{const i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Zw._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return py(t.user,n,"internal-error"),Zw._forOperation(t.user,t.operationType,s);default:cy(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Rb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>fb._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Rb(e)}async getSession(){return Pb._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await zy(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await zy(this.user,function(e,t){return ky(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Iy(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const Mb=new WeakMap;const Lb="__sak";class jb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lb,"1"),this.storage.removeItem(Lb),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Fb extends jb{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Nv();return ow(e)||hw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=fw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Dv()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fb.type="LOCAL";const Ub=Fb;class Vb extends jb{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Vb.type="SESSION";const Bb=Vb;class zb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new zb(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function qb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}zb.receivers=[];class Wb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const c=qb("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function Kb(){return window}function Hb(){return"undefined"!==typeof Kb().WorkerGlobalScope&&"function"===typeof Kb().importScripts}const Gb="firebaseLocalStorageDb",Qb="firebaseLocalStorage",$b="fbase_key";class Jb{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Yb(e,t){return e.transaction([Qb],t?"readwrite":"readonly").objectStore(Qb)}function Xb(){const e=indexedDB.open(Gb,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Qb,{keyPath:$b})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Qb)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Gb);return new Jb(e).toPromise()}(),t(await Xb()))}))}))}async function Zb(e,t,n){const r=Yb(e,!0).put({[$b]:t,value:n});return new Jb(r).toPromise()}function e_(e,t){const n=Yb(e,!0).delete(t);return new Jb(n).toPromise()}class t_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Xb()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zb._getInstance(Hb()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Wb(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xb();return await Zb(e,Lb,"1"),await e_(e,Lb),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Zb(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Yb(e,!1).get(t),r=await new Jb(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>e_(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Yb(e,!1).getAll();return new Jb(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}t_.type="LOCAL";const n_=t_;const r_=1e12;class i_{constructor(e){this.auth=e,this.counter=r_,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new o_(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||r_;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||r_;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||r_;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class o_{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;py(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const s_=Ew("rcb"),a_=new by(3e4,6e4);class c_{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Kb().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return py(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Dy(Kb().grecaptcha)?Promise.resolve(Kb().grecaptcha):new Promise(((n,r)=>{const i=Kb().setTimeout((()=>{r(uy(e,"network-request-failed"))}),a_.get());Kb()[s_]=()=>{Kb().clearTimeout(i),delete Kb()[s_];const o=Kb().grecaptcha;if(!o||!Dy(o))return void r(uy(e,"internal-error"));const s=o.render;o.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};_w("".concat(bw.recaptchaV2Script,"?").concat(Fv({onload:s_,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(uy(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Kb().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class u_{async load(e){return new i_(e)}clearedOneInstance(){}}const l_="recaptcha",h_={theme:"light",type:"image"};class d_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},h_);this.parameters=n,this.type=l_,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yw(e),this.isInvisible="invisible"===this.parameters.size,py("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;py(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new u_:new c_,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){py(!this.parameters.sitekey,this.auth,"argument-error"),py(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),py("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Kb()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){py(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){py(yy()&&!Hb(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await ky(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);py(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return py(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class f_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Vw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function p_(e,t,n){var r;const i=await n.verify();try{let o;if(py("string"===typeof i,e,"argument-error"),py(n.type===l_,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){py("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ky(e,"POST","/v2/accounts/mfaEnrollment:start",Iy(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{py("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;py(n,e,"missing-multi-factor-info");const s=await function(e,t){return ky(e,"POST","/v2/accounts/mfaSignIn:start",Iy(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ky(e,"POST","/v1/accounts:sendVerificationCode",Iy(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class m_{constructor(e){this.providerId=m_.PROVIDER_ID,this.auth=yw(e)}verifyPhoneNumber(e,t){return p_(this.auth,e,qv(t))}static credential(e,t){return Vw._fromVerification(e,t)}static credentialFromResult(e){const t=e;return m_.credentialFromTaggedObject(t)}static credentialFromError(e){return m_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Vw._fromTokenResponse(n,r):null}}function g_(e,t){return t?Xy(t):(py(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}m_.PROVIDER_ID="phone",m_.PHONE_SIGN_IN_METHOD="phone";class v_ extends Nw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jw(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function y_(e){return cb(e.auth,new v_(e),e.bypassAuthState)}function w_(e){const{auth:t,user:n}=e;return py(n,t,"internal-error"),ab(n,new v_(e),e.bypassAuthState)}async function b_(e){const{auth:t,user:n}=e;return py(n,t,"internal-error"),ob(n,new v_(e),e.bypassAuthState)}class __{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return y_;case"linkViaPopup":case"linkViaRedirect":return b_;case"reauthViaPopup":case"reauthViaRedirect":return w_;default:cy(this.auth,"internal-error")}}resolve(e){gy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const E_=new by(2e3,1e4);class T_ extends __{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,T_.currentPopupAction&&T_.currentPopupAction.cancel(),T_.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return py(e,this.auth,"internal-error"),e}async onExecution(){gy(1===this.filter.length,"Popup operations only handle one event");const e=qb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(uy(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(uy(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T_.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(uy(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,E_.get())};e()}}T_.currentPopupAction=null;const S_=new Map;class I_ extends __{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=S_.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=N_(t),r=C_(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}S_.set(this.auth._key(),e)}return this.bypassAuthState||S_.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function k_(e,t){return C_(e)._set(N_(t),"true")}function x_(e,t){S_.set(e._key(),t)}function C_(e){return Xy(e._redirectPersistence)}function N_(e){return tw("pendingRedirect",e.config.apiKey,e.name)}function A_(e,t,n){return async function(e,t,n){if(ye(e.app))return Promise.reject(hy(e));const r=yw(e);dy(e,t,qw),await r._initializationPromise;const i=g_(r,n);return await k_(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function O_(e,t,n){return async function(e,t,n){const r=qv(e);if(dy(r.auth,t,qw),ye(r.auth.app))return Promise.reject(hy(r.auth));await r.auth._initializationPromise;const i=g_(r.auth,n);await k_(i,r.auth);const o=await R_(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)}(e,t,n)}function P_(e,t,n){return async function(e,t,n){const r=qv(e);dy(r.auth,t,qw),await r.auth._initializationPromise;const i=g_(r.auth,n);await sb(!1,r,t.providerId),await k_(i,r.auth);const o=await R_(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}async function D_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ye(e.app))return Promise.reject(hy(e));const r=yw(e),i=g_(r,t),o=new I_(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}async function R_(e){const t=qb("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class M_{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j_(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!j_(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(uy(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(L_(e))}saveEventToCache(e){this.cachedEventUids.add(L_(e)),this.lastProcessedEventTime=Date.now()}}function L_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function j_(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function F_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ky(e,"GET","/v1/projects",t)}const U_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V_=/^https?/;function B_(e){const t=vy(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!V_.test(n))return!1;if(U_.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const z_=new by(3e4,6e4);function q_(){const e=Kb().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function W_(e){return new Promise(((t,n)=>{var r,i,o;function s(){q_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{q_(),n(uy(e,"network-request-failed"))},timeout:z_.get()})}if(null===(i=null===(r=Kb().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Kb().gapi)||void 0===o?void 0:o.load)){const t=Ew("iframefcb");return Kb()[t]=()=>{gapi.load?s():n(uy(e,"network-request-failed"))},_w("".concat(bw.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw K_=null,e}))}let K_=null;const H_=new by(5e3,15e3),G_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $_(e){const t=e.config;py(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_y(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Te},i=Q_.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(Fv(r).slice(1))}async function J_(e){const t=await function(e){return K_=K_||W_(e),K_}(e),n=Kb().gapi;return py(n,e,"internal-error"),t.open({where:document.body,url:$_(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G_,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=uy(e,"network-request-failed"),o=Kb().setTimeout((()=>{r(i)}),H_.get());function s(){Kb().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const Y_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X_="_blank",Z_="http://localhost";class eE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function tE(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const nE="__/auth/handler",rE="emulator/auth/handler",iE=encodeURIComponent("fac");async function oE(e,t,n,r,i,o){py(e.config.authDomain,e,"auth-domain-config-required"),py(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Te,eventId:i};if(t instanceof qw){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Ww){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=await e._getAppCheckToken(),u=c?"#".concat(iE,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(nE);return _y(t,rE)}(e),"?").concat(Fv(a).slice(1)).concat(u)}const sE="webStorageSupport";const aE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bb,this._completeRedirectFn=D_,this._overrideRedirectResult=x_}async _openPopup(e,t,n,r){var i;gy(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Y_),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Nv().toLowerCase();n&&(a=sw(u)?X_:n),iw(u)&&(t=t||Z_,c.scrollbars="yes");const l=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(dw(u)&&"_self"!==a)return tE(t||"",a),new eE(null);const h=window.open(t||"",a,l);py(h,e,"popup-blocked");try{h.focus()}catch(d){}return new eE(h)}(e,await oE(e,t,n,vy(),r),qb())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Kb().location.href=e}(await oE(e,t,n,vy(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(gy(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await J_(e),n=new M_(e);return t.register("authEvent",(t=>{py(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sE,{type:sE},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),cy(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await F_(e);for(const r of t)try{if(B_(r))return}catch(n){}cy(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fw()||ow()||hw()}};class cE{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return my("unexpected MultiFactorSessionType")}}}class uE extends cE{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new uE(e)}_finalizeEnroll(e,t,n){return function(e,t){return ky(e,"POST","/v2/accounts/mfaEnrollment:finalize",Iy(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return ky(e,"POST","/v2/accounts/mfaSignIn:finalize",Iy(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class lE{constructor(){}static assertion(e){return uE._fromCredential(e)}}lE.FACTOR_ID="phone";var hE="@firebase/auth",dE="1.7.0";class fE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){py(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Cv())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var pE;function mE(){return window}!function(e){bw=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=uy("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),pE="Browser",pe(new v("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;py(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:a,clientPlatform:pE,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pw(pE)},u=new vw(r,i,o,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xy);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),pe(new v("auth-internal",(e=>(e=>new fE(e))(yw(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ne(hE,dE,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(pE)),Ne(hE,dE,"esm2017");async function gE(e,t,n){var r;const{BuildInfo:i}=mE();gy(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if(gy(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),s={};return hw()?s.ibi=i.packageName:cw()?s.apn=i.packageName:cy(e,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,oE(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,s)}function vE(e){const{cordova:t}=mE();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}class yE extends M_{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function wE(e){const t=await EE()._get(TE(e));return t&&await EE()._remove(TE(e)),t}function bE(e,t){var n,r;const i=function(e){const t=SE(e),n=t.link?decodeURIComponent(t.link):void 0,r=SE(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return SE(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=SE(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=s?uy(s):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function _E(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function EE(){return Xy(Ub)}function TE(e){return tw("authEvent",e.config.apiKey,e.name)}function SE(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Uv(n.join("?"))}const IE=class{constructor(){this._redirectPersistence=Bb,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=D_,this._overrideRedirectResult=x_}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new yE(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){cy(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o,s,a,c,u,l;const h=mE();py("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),py("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),py("function"===typeof(null===(o=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),py("function"===typeof(null===(c=null===(a=null===(s=null===h||void 0===h?void 0:h.cordova)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),py("function"===typeof(null===(l=null===(u=null===h||void 0===h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),S_.clear(),await this._originValidation(e);const o=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:_E(),postBody:null,tenantId:e.tenantId,error:uy(e,"no-auth-event")}}(e,n,r);await function(e,t){return EE()._set(TE(e),t)}(e,o);const s=await gE(e,o,t);return async function(e,t,n){const{cordova:r}=mE();let i=()=>{};try{await new Promise(((o,s)=>{let a=null;function c(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout((()=>{s(uy(e,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(c),document.addEventListener("resume",u,!1),cw()&&document.addEventListener("visibilitychange",l,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await vE(s))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=mE(),n={};hw()?n.iosBundleId=t.packageName:cw()?n.androidPackageName=t.packageName:cy(e,"operation-not-supported-in-this-environment"),await F_(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=mE(),o=setTimeout((async()=>{await wE(e),t.onEvent(kE())}),500),s=async n=>{clearTimeout(o);const r=await wE(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=bE(r,n.url)),t.onEvent(i||kE())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,s);const a=r,c="".concat(i.packageName.toLowerCase(),"://");mE().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&s({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function kE(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:uy("no-auth-event")}}function xE(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function CE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return!("file:"!==xE()&&"ionic:"!==xE()&&"capacitor:"!==xE()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function NE(){return Dv()&&11===(null===document||void 0===document?void 0:document.documentMode)}function AE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return/Edge\/\d+/.test(e)}function OE(){try{const e=self.localStorage,t=qb();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nv();return NE()||AE(e)}()||Rv()}catch(e){return PE()&&Rv()}return!1}function PE(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function DE(){return("http:"===xE()||"https:"===xE()||Ov()||CE())&&!(Pv()||Av())&&OE()&&!PE()}function RE(){return CE()&&"undefined"!==typeof document}const ME={LOCAL:"local",NONE:"none",SESSION:"session"},LE=py,jE="persistence";async function FE(e){await e._initializationPromise;const t=UE(),n=tw(jE,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function UE(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const VE=py;class BE{constructor(){this.browserResolver=Xy(aE),this.cordovaResolver=Xy(IE),this.underlyingResolver=null,this._redirectPersistence=Bb,this._completeRedirectFn=D_,this._overrideRedirectResult=x_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return RE()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return VE(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!RE()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function zE(e){return e.unwrap()}function qE(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new GE(e,function(e,t){var n;const r=qv(e),i=t;return py(t.customData.operationType,r,"argument-error"),py(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Db._fromError(r,i)}(e,t))}else if(r){const e=WE(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function WE(e){const{_tokenResponse:t}=e instanceof Mv?e.customData:e;if(!t)return null;if(!(e instanceof Mv)&&"temporaryProof"in t&&"phoneNumber"in t)return m_.credentialFromResult(e);const n=t.providerId;if(!n||n===Qv)return null;let r;switch(n){case Gv:r=Gw;break;case Kv:r=Hw;break;case Hv:r=Qw;break;case $v:r=Yw;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:s,nonce:a}=t;return i||o||e||s?s?n.startsWith("saml.")?$w._create(n,s):Fw._fromParams({providerId:n,signInMethod:n,pendingToken:s,idToken:e,accessToken:i}):new Kw(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Mv?r.credentialFromError(e):r.credentialFromResult(e)}function KE(e,t){return t.catch((t=>{throw t instanceof Mv&&qE(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,WE(r)),additionalUserInfo:Ob(e),user:QE.getOrCreate(n)};var r}))}async function HE(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>KE(e,n.confirm(t))}}class GE{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return KE(zE(this.auth),this.resolver.resolveSignIn(e))}}class QE{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=qv(e);return Mb.has(t)||Mb.set(t,Rb._fromUser(t)),Mb.get(t)}(e)}static getOrCreate(e){return QE.USER_MAP.has(e)||QE.USER_MAP.set(e,new QE(e)),QE.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return KE(this.auth,lb(this._delegate,e))}async linkWithPhoneNumber(e,t){return HE(this.auth,async function(e,t,n){const r=qv(e);await sb(!1,r,"phone");const i=await p_(r.auth,t,qv(n));return new f_(i,(e=>lb(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return KE(this.auth,async function(e,t,n){const r=qv(e);dy(r.auth,t,qw);const i=g_(r.auth,n);return new T_(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,BE))}async linkWithRedirect(e){return await FE(yw(this.auth)),P_(this._delegate,e,BE)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return KE(this.auth,hb(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return HE(this.auth,async function(e,t,n){const r=qv(e);if(ye(r.auth.app))return Promise.reject(hy(r.auth));const i=await p_(r.auth,t,qv(n));return new f_(i,(e=>hb(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return KE(this.auth,async function(e,t,n){const r=qv(e);if(ye(r.auth.app))return Promise.reject(uy(r.auth,"operation-not-supported-in-this-environment"));dy(r.auth,t,qw);const i=g_(r.auth,n);return new T_(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,BE))}async reauthenticateWithRedirect(e){return await FE(yw(this.auth)),O_(this._delegate,e,BE)}sendEmailVerification(e){return _b(this._delegate,e)}async unlink(e){return await ib(this._delegate,e),this}updateEmail(e){return function(e,t){const n=qv(e);return ye(n.auth.app)?Promise.reject(hy(n.auth)):Sb(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Sb(qv(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=qv(e);if(ye(n.auth.app))return Promise.reject(hy(n.auth));await ob(n,t)}(this._delegate,e)}updateProfile(e){return Tb(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Eb(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}QE.USER_MAP=new WeakMap;const $E=py;class JE{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;$E(n,"invalid-api-key",{appName:e.name}),$E(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?BE:void 0;this._delegate=t.initialize({options:{persistence:XE(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(ry),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?QE.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){kw(this._delegate,e,t)}applyActionCode(e){return yb(this._delegate,e)}checkActionCode(e){return wb(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Aw(qv(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&vb(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return KE(this._delegate,async function(e,t,n){if(ye(e.app))return Promise.reject(hy(e));const r=yw(e),i=Iw(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xw),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&vb(e),t})),s=await Zw._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return bb(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Bw.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){$E(DE(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await yw(e)._initializationPromise,D_(e,t,!1)}(this._delegate,BE);return e?KE(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){yw(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:o}=YE(e,t,n);return this._delegate.onAuthStateChanged(r,i,o)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:o}=YE(e,t,n);return this._delegate.onIdTokenChanged(r,i,o)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=yw(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){py(t.handleCodeInApp,r,"argument-error"),t&&gb(r,e,t)}(i,n),await Iw(r,i,"getOobCode",Mw)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=yw(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&gb(r,i,n),await Iw(r,i,"getOobCode",Rw)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){LE(Object.values(ME).includes(t),e,"invalid-persistence-type"),Pv()?LE(t!==ME.SESSION,e,"unsupported-persistence-type"):Av()?LE(t===ME.NONE,e,"unsupported-persistence-type"):PE()?LE(t===ME.NONE||t===ME.LOCAL&&Rv(),e,"unsupported-persistence-type"):LE(t===ME.NONE||OE(),e,"unsupported-persistence-type")}(this._delegate,e),e){case ME.SESSION:t=Bb;break;case ME.LOCAL:t=await Xy(n_)._isAvailable()?n_:Ub;break;case ME.NONE:t=ew;break;default:return cy("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return KE(this._delegate,async function(e){var t;if(ye(e.app))return Promise.reject(hy(e));const n=yw(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Zw({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Xw(n,{returnSecureToken:!0}),i=await Zw._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return KE(this._delegate,ub(this._delegate,e))}signInWithCustomToken(e){return KE(this._delegate,db(this._delegate,e))}signInWithEmailAndPassword(e,t){return KE(this._delegate,function(e,t,n){return ye(e.app)?Promise.reject(hy(e)):ub(qv(e),zw.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&vb(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return KE(this._delegate,async function(e,t,n){if(ye(e.app))return Promise.reject(hy(e));const r=qv(e),i=zw.credentialWithLink(t,n||vy());return py(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ub(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return HE(this._delegate,async function(e,t,n){if(ye(e.app))return Promise.reject(hy(e));const r=yw(e),i=await p_(r,t,qv(n));return new f_(i,(e=>ub(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return $E(DE(),this._delegate,"operation-not-supported-in-this-environment"),KE(this._delegate,async function(e,t,n){if(ye(e.app))return Promise.reject(uy(e,"operation-not-supported-in-this-environment"));const r=yw(e);dy(e,t,qw);const i=g_(r,n);return new T_(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,BE))}async signInWithRedirect(e){return $E(DE(),this._delegate,"operation-not-supported-in-this-environment"),await FE(this._delegate),A_(this._delegate,e,BE)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await wb(qv(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function YE(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&QE.getOrCreate(e)),error:t,complete:n}}function XE(e,t){const n=function(e,t){const n=UE();if(!n)return[];const r=tw(jE,e,t);switch(n.getItem(r)){case ME.NONE:return[ew];case ME.LOCAL:return[n_,Bb];case ME.SESSION:return[Bb];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(n_)||n.push(n_),"undefined"!==typeof window)for(const r of[Ub,Bb])n.includes(r)||n.push(r);return n.includes(ew)||n.push(ew),n}JE.Persistence=ME;class ZE{constructor(){this.providerId="phone",this._delegate=new m_(zE(Ge.auth()))}static credential(e,t){return m_.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}ZE.PHONE_SIGN_IN_METHOD=m_.PHONE_SIGN_IN_METHOD,ZE.PROVIDER_ID=m_.PROVIDER_ID;const eT=py;class tT{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ge.app();var r;eT(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new d_(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var nT;(nT=Ge).INTERNAL.registerComponent(new v("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new JE(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Jv,PASSWORD_RESET:Yv,RECOVER_EMAIL:Xv,REVERT_SECOND_FACTOR_ADDITION:Zv,VERIFY_AND_CHANGE_EMAIL:ey,VERIFY_EMAIL:ty}},EmailAuthProvider:zw,FacebookAuthProvider:Hw,GithubAuthProvider:Qw,GoogleAuthProvider:Gw,OAuthProvider:Kw,SAMLAuthProvider:Jw,PhoneAuthProvider:ZE,PhoneMultiFactorGenerator:lE,RecaptchaVerifier:tT,TwitterAuthProvider:Yw,Auth:JE,AuthCredential:Nw,Error:Mv}).setInstantiationMode("LAZY").setMultipleInstances(!1)),nT.registerVersion("@firebase/auth-compat","0.5.5");const rT=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t};class iT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}class oT extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,oT.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,node_modules_firebase_util_dist_index_esm2017_ErrorFactory.prototype.create)}}function sT(e){return e&&e._delegate?e._delegate:e}function aT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new zo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function cT(){if("undefined"===typeof Uint8Array)throw new zo("unimplemented","Uint8Arrays are not available in this environment.")}function uT(){if("undefined"==typeof atob)throw new zo("unimplemented","Blobs are unavailable in Firestore in this environment.")}class lT{constructor(e){this._delegate=e}static fromBase64String(e){return uT(),new lT(ag.fromBase64String(e))}static fromUint8Array(e){return cT(),new lT(ag.fromUint8Array(e))}toBase64(){return uT(),this._delegate.toBase64()}toUint8Array(){return cT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function hT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class dT{enableIndexedDbPersistence(e,t){return function(e,t){sg(e=Lm(e,Ym));const n=Zm(e);if(n._uninitializedComponentsProvider)throw new zo(Bo.FAILED_PRECONDITION,"SDK cache is already specified.");Lo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new cm;return tg(n,i,new sm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){sg(e=Lm(e,Ym));const t=Zm(e);if(t._uninitializedComponentsProvider)throw new zo(Bo.FAILED_PRECONDITION,"SDK cache is already specified.");Lo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new cm;return tg(t,r,new am(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new zo(Bo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new qo;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ss.D())return Promise.resolve();const t=e+"main";await Ss.delete(t)}(jd(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class fT{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Da||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Lo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Vm(this._delegate,e,t,n)}enableNetwork(){return rg(this._delegate)}disableNetwork(){return ig(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Pm("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ng(this._delegate)}onSnapshotsInSync(e){return gv(this._delegate,e)}get app(){if(!this._appCompat)throw new zo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xT(this,Wm(this._delegate,e))}catch(t){throw wT(t,"collection()","Firestore.collection()")}}doc(e){try{return new yT(this,Km(this._delegate,e))}catch(t){throw wT(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ST(this,function(e,t){if(e=Lm(e,Um),Om("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new zo(Bo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Bm(e,null,function(e){return new Lc(ss.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw wT(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Lm(e,Ym);const r=Object.assign(Object.assign({},wv),n);return function(e){if(e.maxAttempts<1)throw new zo(Bo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new qo;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Sm(e);new fm(e.asyncQueue,i,n,t,r).Ya()})),r.promise}(Zm(e),(n=>t(new Ev(e,n))),r)}(this._delegate,(t=>e(new mT(this,t))))}batch(){return Zm(this._delegate),new gT(new bv(this._delegate,(e=>vv(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Zm(e=Lm(e,Ym)),r=new Jm;return Cm(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return og(this._delegate,e).then((e=>e?new ST(this,e):null))}}class pT extends ev{constructor(e){super(),this.firestore=e}convertBytes(e){return new lT(new ag(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return yT.forKey(t,this.firestore,null)}}class mT{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pT(e)}get(e){const t=CT(e);return this._delegate.get(t).then((e=>new ET(this._firestore,new iv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=CT(e);return n?(aT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=CT(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=CT(e);return this._delegate.delete(t),this}}class gT{constructor(e){this._delegate=e}set(e,t,n){const r=CT(e);return n?(aT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=CT(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=CT(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vT{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new ov(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new TT(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=vT.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new vT(e,new pT(e),t),r.set(t,i)),i}}vT.INSTANCES=new WeakMap;class yT{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pT(e)}static forPath(e,t,n){if(e.length%2!==0)throw new zo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new yT(t,new zm(t._delegate,n,new us(e)))}static forKey(e,t,n){return new yT(t,new zm(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new xT(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xT(this.firestore,Wm(this._delegate,e))}catch(t){throw wT(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=sT(e))instanceof zm&&Hm(this._delegate,e)}set(e,t){t=aT("DocumentReference.set",t);try{return t?dv(this._delegate,e,t):dv(this._delegate,e)}catch(n){throw wT(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?fv(this._delegate,e):fv(this._delegate,e,t,...r)}catch(o){throw wT(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return vv(Lm(e.firestore,Ym),[new qu(e._key,Au.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=bT(t),i=_T(t,(e=>new ET(this.firestore,new iv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return mv(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?lv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Lm(e,zm);const t=Lm(e.firestore,Ym);return km(Zm(t),e._key,{source:"server"}).then((n=>yv(t,e,n)))}(this._delegate):function(e){e=Lm(e,zm);const t=Lm(e.firestore,Ym);return km(Zm(t),e._key).then((n=>yv(t,e,n)))}(this._delegate),t.then((e=>new ET(this.firestore,new iv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new yT(this.firestore,e?this._delegate.withConverter(vT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wT(e,t,n){return e.message=e.message.replace(t,n),e}function bT(e){for(const t of e)if("object"===typeof t&&!hT(t))return t;return{}}function _T(e,t){var n,r;let i;return i=hT(e[0])?e[0]:hT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ET{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new yT(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return cv(this._delegate,e._delegate)}}class TT extends ET{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||Fo()}(void 0!==t),t}}class ST{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pT(e)}where(e,t,n){try{return new ST(this.firestore,qg(this._delegate,function(e,t,n){const r=t,i=Ug("where",e);return Wg._create(i,r,n)}(e,t,n)))}catch(r){throw wT(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ST(this.firestore,qg(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ug("orderBy",e);return Hg._create(n,t)}(e,t)))}catch(n){throw wT(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ST(this.firestore,qg(this._delegate,function(e){return jm("limit",e),Gg._create("limit",e,"F")}(e)))}catch(t){throw wT(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ST(this.firestore,qg(this._delegate,function(e){return jm("limitToLast",e),Gg._create("limitToLast",e,"L")}(e)))}catch(t){throw wT(t,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new ST(this.firestore,qg(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qg._create("startAt",t,!0)}(...arguments)))}catch(e){throw wT(e,"startAt()","Query.startAt()")}}startAfter(){try{return new ST(this.firestore,qg(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qg._create("startAfter",t,!1)}(...arguments)))}catch(e){throw wT(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new ST(this.firestore,qg(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $g._create("endBefore",t,!1)}(...arguments)))}catch(e){throw wT(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new ST(this.firestore,qg(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $g._create("endAt",t,!0)}(...arguments)))}catch(e){throw wT(e,"endAt()","Query.endAt()")}}isEqual(e){return Gm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?hv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Lm(e,Bm);const t=Lm(e.firestore,Ym),n=Zm(t),r=new uv(t);return xm(n,e._query,{source:"server"}).then((n=>new sv(t,r,e,n)))}(this._delegate):function(e){e=Lm(e,Bm);const t=Lm(e.firestore,Ym),n=Zm(t),r=new uv(t);return Vg(e._query),xm(n,e._query).then((n=>new sv(t,r,e,n)))}(this._delegate),t.then((e=>new kT(this.firestore,new sv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=bT(t),i=_T(t,(e=>new kT(this.firestore,new sv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return mv(this._delegate,r,i)}withConverter(e){return new ST(this.firestore,e?this._delegate.withConverter(vT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class IT{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new TT(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ST(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new TT(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new IT(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new TT(this._firestore,n))}))}isEqual(e){return cv(this._delegate,e._delegate)}}class xT extends ST{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new yT(this.firestore,e):null}doc(e){try{return new yT(this.firestore,void 0===e?Km(this._delegate):Km(this._delegate,e))}catch(t){throw wT(t,"doc()","CollectionReference.doc()")}}add(e){return pv(this._delegate,e).then((e=>new yT(this.firestore,e)))}isEqual(e){return Hm(this._delegate,e._delegate)}withConverter(e){return new xT(this.firestore,e?this._delegate.withConverter(vT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function CT(e){return Lm(e,zm)}class NT{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new cg(...t)}static documentId(){return new NT(cs.keyField().canonicalString())}isEqual(e){return(e=sT(e))instanceof cg&&this._delegate._internalPath.isEqual(e._internalPath)}}class AT{constructor(e){this._delegate=e}static serverTimestamp(){const e=new _g("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new AT(e)}static delete(){const e=new wg("deleteField");return e._methodName="FieldValue.delete",new AT(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Eg("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new AT(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Tg("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new AT(e)}static increment(e){const t=function(e){return new Sg("increment",e)}(e);return t._methodName="FieldValue.increment",new AT(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OT={Firestore:fT,GeoPoint:lg,Timestamp:rs,Blob:lT,Transaction:mT,WriteBatch:gT,DocumentReference:yT,DocumentSnapshot:ET,Query:ST,QueryDocumentSnapshot:TT,QuerySnapshot:kT,CollectionReference:xT,FieldPath:NT,FieldValue:AT,setLogLevel:function(e){!function(e){Po.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new v("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},OT)))}(e,((e,t)=>new fT(e,t,new dT))),e.registerVersion("@firebase/firestore-compat","0.3.28")}(Ge);var PT=n(2791);function DT(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function RT(e){return!!e&&!!e[TS]}function MT(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===SS}(e)||Array.isArray(e)||!!e[ES]||!!e.constructor[ES]||zT(e)||qT(e))}function LT(e,t,n){void 0===n&&(n=!1),0===jT(e)?(n?Object.keys:IS)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function jT(e){var t=e[TS];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:zT(e)?2:qT(e)?3:0}function FT(e,t){return 2===jT(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function UT(e,t){return 2===jT(e)?e.get(t):e[t]}function VT(e,t,n){var r=jT(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function BT(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function zT(e){return yS&&e instanceof Map}function qT(e){return wS&&e instanceof Set}function WT(e){return e.o||e.t}function KT(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=kS(e);delete t[TS];for(var n=IS(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function HT(e,t){return void 0===t&&(t=!1),QT(e)||RT(e)||!MT(e)||(jT(e)>1&&(e.set=e.add=e.clear=e.delete=GT),Object.freeze(e),t&&LT(e,(function(e,t){return HT(t,!0)}),!0)),e}function GT(){DT(2)}function QT(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function $T(e){var t=xS[e];return t||DT(18,e),t}function JT(e,t){xS[e]||(xS[e]=t)}function YT(){return gS}function XT(e,t){t&&($T("Patches"),e.u=[],e.s=[],e.v=t)}function ZT(e){eS(e),e.p.forEach(nS),e.p=null}function eS(e){e===gS&&(gS=e.l)}function tS(e){return gS={p:[],l:gS,h:e,m:!0,_:0}}function nS(e){var t=e[TS];0===t.i||1===t.i?t.j():t.O=!0}function rS(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||$T("ES5").S(t,e,r),r?(n[TS].P&&(ZT(t),DT(4)),MT(e)&&(e=iS(t,e),t.l||sS(t,e)),t.u&&$T("Patches").M(n[TS].t,e,t.u,t.s)):e=iS(t,n,[]),ZT(t),t.u&&t.v(t.u,t.s),e!==_S?e:void 0}function iS(e,t,n){if(QT(t))return t;var r=t[TS];if(!r)return LT(t,(function(i,o){return oS(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return sS(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=KT(r.k):r.o;LT(3===r.i?new Set(i):i,(function(t,o){return oS(e,r,i,t,o,n)})),sS(e,i,!1),n&&e.u&&$T("Patches").R(r,n,e.u,e.s)}return r.o}function oS(e,t,n,r,i,o){if(RT(i)){var s=iS(e,i,o&&t&&3!==t.i&&!FT(t.D,r)?o.concat(r):void 0);if(VT(n,r,s),!RT(s))return;e.m=!1}if(MT(i)&&!QT(i)){if(!e.h.F&&e._<1)return;iS(e,i),t&&t.A.l||sS(e,i)}}function sS(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&HT(t,n)}function aS(e,t){var n=e[TS];return(n?WT(n):e)[t]}function cS(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function uS(e){e.P||(e.P=!0,e.l&&uS(e.l))}function lS(e){e.o||(e.o=KT(e.t))}function hS(e,t,n){var r=zT(t)?$T("MapSet").N(t,n):qT(t)?$T("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:YT(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=CS;n&&(i=[r],o=NS);var s=Proxy.revocable(i,o),a=s.revoke,c=s.proxy;return r.k=c,r.j=a,c}(t,n):$T("ES5").J(t,n);return(n?n.A:YT()).p.push(r),r}function dS(e){return RT(e)||DT(22,e),function e(t){if(!MT(t))return t;var n,r=t[TS],i=jT(t);if(r){if(!r.P&&(r.i<4||!$T("ES5").K(r)))return r.t;r.I=!0,n=fS(t,i),r.I=!1}else n=fS(t,i);return LT(n,(function(t,i){r&&UT(r.t,t)===i||VT(n,t,e(i))})),3===i?new Set(n):n}(e)}function fS(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return KT(e)}function pS(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[TS];return CS.get(t,e)},set:function(t){var n=this[TS];CS.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][TS];if(!i.P)switch(i.i){case 5:r(i)&&uS(i);break;case 4:n(i)&&uS(i)}}}function n(e){for(var t=e.t,n=e.k,r=IS(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==TS){var s=t[o];if(void 0===s&&!FT(t,o))return!0;var a=n[o],c=a&&a[TS];if(c?c.t!==s:!BT(a,s))return!0}}var u=!!t[TS];return r.length!==IS(t).length+(u?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};JT("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=kS(n);delete o[TS];for(var s=IS(o),a=0;a<s.length;a++){var c=s[a];o[c]=e(c,t||!!o[c].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:YT(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,TS,{value:o,writable:!0}),i},S:function(e,n,i){i?RT(n)&&n[TS].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[TS];if(n){var i=n.t,o=n.k,s=n.D,a=n.i;if(4===a)LT(o,(function(t){t!==TS&&(void 0!==i[t]||FT(i,t)?s[t]||e(o[t]):(s[t]=!0,uS(n)))})),LT(i,(function(e){void 0!==o[e]||FT(o,e)||(s[e]=!1,uS(n))}));else if(5===a){if(r(n)&&(uS(n),s.length=!0),o.length<i.length)for(var c=o.length;c<i.length;c++)s[c]=!1;else for(var u=i.length;u<o.length;u++)s[u]=!0;for(var l=Math.min(o.length,i.length),h=0;h<l;h++)o.hasOwnProperty(h)||(s[h]=!0),void 0===s[h]&&e(o[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var mS,gS,vS="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),yS="undefined"!=typeof Map,wS="undefined"!=typeof Set,bS="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,_S=vS?Symbol.for("immer-nothing"):((mS={})["immer-nothing"]=!0,mS),ES=vS?Symbol.for("immer-draftable"):"__$immer_draftable",TS=vS?Symbol.for("immer-state"):"__$immer_state",SS=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),IS="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,kS=Object.getOwnPropertyDescriptors||function(e){var t={};return IS(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},xS={},CS={get:function(e,t){if(t===TS)return e;var n=WT(e);if(!FT(n,t))return function(e,t,n){var r,i=cS(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!MT(r)?r:r===aS(e.t,t)?(lS(e),e.o[t]=hS(e.A.h,r,e)):r},has:function(e,t){return t in WT(e)},ownKeys:function(e){return Reflect.ownKeys(WT(e))},set:function(e,t,n){var r=cS(WT(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=aS(WT(e),t),o=null==i?void 0:i[TS];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(BT(n,i)&&(void 0!==n||FT(e.t,t)))return!0;lS(e),uS(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==aS(e.t,t)||t in e.t?(e.D[t]=!1,lS(e),uS(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=WT(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){DT(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){DT(12)}},NS={};LT(CS,(function(e,t){NS[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),NS.deleteProperty=function(e,t){return NS.set.call(this,e,t,void 0)},NS.set=function(e,t,n){return CS.set.call(this,e[0],t,n,e[0])};var AS=function(){function e(e){var t=this;this.g=bS,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,s=Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(s))}))}}var s;if("function"!=typeof n&&DT(6),void 0!==r&&"function"!=typeof r&&DT(7),MT(e)){var a=tS(t),c=hS(t,e,void 0),u=!0;try{s=n(c),u=!1}finally{u?ZT(a):eS(a)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return XT(a,r),rS(e,a)}),(function(e){throw ZT(a),e})):(XT(a,r),rS(s,a))}if(!e||"object"!=typeof e){if(void 0===(s=n(e))&&(s=e),s===_S&&(s=void 0),t.F&&HT(s,!0),r){var l=[],h=[];$T("Patches").M(e,s,l,h),r(l,h)}return s}DT(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){MT(e)||DT(8),RT(e)&&(e=dS(e));var t=tS(this),n=hS(this,e,void 0);return n[TS].C=!0,eS(t),n},t.finishDraft=function(e,t){var n=(e&&e[TS]).A;return XT(n,t),rS(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!bS&&DT(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=$T("Patches").$;return RT(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),OS=new AS,PS=OS.produce;OS.produceWithPatches.bind(OS),OS.setAutoFreeze.bind(OS),OS.setUseProxies.bind(OS),OS.applyPatches.bind(OS),OS.createDraft.bind(OS),OS.finishDraft.bind(OS);const DS=PS;function RS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MS(Object(n),!0).forEach((function(t){RS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jS(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var FS="function"===typeof Symbol&&Symbol.observable||"@@observable",US=function(){return Math.random().toString(36).substring(7).split("").join(".")},VS={INIT:"@@redux/INIT"+US(),REPLACE:"@@redux/REPLACE"+US(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+US()}};function BS(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function zS(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(jS(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(jS(1));return n(zS)(e,t)}if("function"!==typeof e)throw new Error(jS(2));var i=e,o=t,s=[],a=s,c=!1;function u(){a===s&&(a=s.slice())}function l(){if(c)throw new Error(jS(3));return o}function h(e){if("function"!==typeof e)throw new Error(jS(4));if(c)throw new Error(jS(5));var t=!0;return u(),a.push(e),function(){if(t){if(c)throw new Error(jS(6));t=!1,u();var n=a.indexOf(e);a.splice(n,1),s=null}}}function d(e){if(!BS(e))throw new Error(jS(7));if("undefined"===typeof e.type)throw new Error(jS(8));if(c)throw new Error(jS(9));try{c=!0,o=i(o,e)}finally{c=!1}for(var t=s=a,n=0;n<t.length;n++){(0,t[n])()}return e}function f(e){if("function"!==typeof e)throw new Error(jS(10));i=e,d({type:VS.REPLACE})}function p(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(jS(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[FS]=function(){return this},e}return d({type:VS.INIT}),(r={dispatch:d,subscribe:h,getState:l,replaceReducer:f})[FS]=p,r}function qS(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:VS.INIT}))throw new Error(jS(12));if("undefined"===typeof n(void 0,{type:VS.PROBE_UNKNOWN_ACTION()}))throw new Error(jS(13))}))}(n)}catch(a){o=a}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},a=0;a<s.length;a++){var c=s[a],u=n[c],l=e[c],h=u(l,t);if("undefined"===typeof h){t&&t.type;throw new Error(jS(14))}i[c]=h,r=r||h!==l}return(r=r||s.length!==Object.keys(e).length)?i:e}}function WS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function KS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(jS(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=WS.apply(void 0,o)(n.dispatch),LS(LS({},n),{},{dispatch:r})}}}function HS(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var GS=HS();GS.withExtraArgument=HS;const QS=GS;var $S=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),JS=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},YS=Object.defineProperty,XS=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),ZS=Object.prototype.hasOwnProperty,eI=Object.prototype.propertyIsEnumerable,tI=function(e,t,n){return t in e?YS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},nI=function(e,t){for(var n in t||(t={}))ZS.call(t,n)&&tI(e,n,t[n]);if(XS)for(var r=0,i=XS(t);r<i.length;r++){n=i[r];eI.call(t,n)&&tI(e,n,t[n])}return e},rI="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?WS:WS.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function iI(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var oI=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return $S(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,JS([void 0],e[0].concat(this)))):new(t.bind.apply(t,JS([void 0],e.concat(this))))},t}(Array);function sI(e){return MT(e)?DS(e,(function(){})):e}function aI(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new oI);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(QS.withExtraArgument(n.extraArgument)):r.push(QS));0;return r}(e)}}function cI(e){var t,n=aI(),r=e||{},i=r.reducer,o=void 0===i?void 0:i,s=r.middleware,a=void 0===s?n():s,c=r.devTools,u=void 0===c||c,l=r.preloadedState,h=void 0===l?void 0:l,d=r.enhancers,f=void 0===d?void 0:d;if("function"===typeof o)t=o;else{if(!iI(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=qS(o)}var p=a;"function"===typeof p&&(p=p(n));var m=KS.apply(void 0,p),g=WS;u&&(g=rI(nI({trace:!1},"object"===typeof u&&u)));var v=[m];return Array.isArray(f)?v=JS([m],f):"function"===typeof f&&(v=f(v)),zS(t,h,g.apply(void 0,v))}function uI(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return nI(nI({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function lI(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}Object.assign;var hI="listenerMiddleware";uI(hI+"/add"),uI(hI+"/removeAll"),uI(hI+"/remove");pS();const dI=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:sI(e.initialState),i=e.reducers||{},o=Object.keys(i),s={},a={},c={};function u(){var t="function"===typeof e.extraReducers?lI(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,o=t[1],s=void 0===o?[]:o,c=t[2],u=void 0===c?void 0:c,l=nI(nI({},i),a);return function(e,t,n,r){void 0===n&&(n=[]);var i,o="function"===typeof t?lI(t):[t,n,r],s=o[0],a=o[1],c=o[2];if(function(e){return"function"===typeof e}(e))i=function(){return sI(e())};else{var u=sI(e);i=function(){return u}}function l(e,t){void 0===e&&(e=i());var n=JS([s[t.type]],a.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var r;if(RT(e))return"undefined"===typeof(r=n(e,t))?e:r;if(MT(e))return DS(e,(function(e){return n(e,t)}));if("undefined"===typeof(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,l,s,u)}return o.forEach((function(e){var n,r,o=i[e],u=t+"/"+e;"reducer"in o?(n=o.reducer,r=o.prepare):n=o,s[e]=n,a[u]=n,c[e]=r?uI(u,r):uI(u)})),{name:t,reducer:function(e,t){return n||(n=u()),n(e,t)},actions:c,caseReducers:s,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}({name:"user",initialState:{loading:!0,user:{}},reducers:{setUser:(e,t)=>({...e,user:t.payload,loading:!1}),updateUser:(e,t)=>({...e,...t.payload}),updateNickname:(e,t)=>{e.user.nickname=t.payload},logOut:e=>({loading:!1,user:{}})}}),{updateUser:fI,updateNickname:pI,logOut:mI,setUser:gI}=dI.actions,vI=dI.reducer;function yI(e,t){return yI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yI(e,t)}function wI(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,yI(e,t)}function bI(){return bI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bI.apply(this,arguments)}function _I(e){return"/"===e.charAt(0)}function EI(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const TI=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&_I(e),s=t&&_I(t),a=o||s;if(e&&_I(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var c=i[i.length-1];n="."===c||".."===c||""===c}else n=!1;for(var u=0,l=i.length;l>=0;l--){var h=i[l];"."===h?EI(i,l):".."===h?(EI(i,l),u++):u&&(EI(i,l),u--)}if(!a)for(;u--;u)i.unshift("..");!a||""===i[0]||i[0]&&_I(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};var SI="Invariant failed";function II(e,t){if(!e)throw new Error(SI)}function kI(e){return"/"===e.charAt(0)?e:"/"+e}function xI(e){return"/"===e.charAt(0)?e.substr(1):e}function CI(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function NI(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function AI(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function OI(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=bI({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=TI(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function PI(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var DI=!("undefined"===typeof window||!window.document||!window.document.createElement);function RI(e,t){t(window.confirm(e))}var MI="popstate",LI="hashchange";function jI(){try{return window.history.state||{}}catch(e){return{}}}function FI(e){void 0===e&&(e={}),DI||II(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,o=i.forceRefresh,s=void 0!==o&&o,a=i.getUserConfirmation,c=void 0===a?RI:a,u=i.keyLength,l=void 0===u?6:u,h=e.basename?NI(kI(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return h&&(o=CI(o,h)),OI(o,r,n)}function f(){return Math.random().toString(36).substr(2,l)}var p=PI();function m(e){bI(x,e),x.length=t.length,p.notifyListeners(x.location,x.action)}function g(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||w(d(e.state))}function v(){w(d(jI()))}var y=!1;function w(e){if(y)y=!1,m();else{p.confirmTransitionTo(e,"POP",c,(function(t){t?m({action:"POP",location:e}):function(e){var t=x.location,n=_.indexOf(t.key);-1===n&&(n=0);var r=_.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(y=!0,T(i))}(e)}))}}var b=d(jI()),_=[b.key];function E(e){return h+AI(e)}function T(e){t.go(e)}var S=0;function I(e){1===(S+=e)&&1===e?(window.addEventListener(MI,g),r&&window.addEventListener(LI,v)):0===S&&(window.removeEventListener(MI,g),r&&window.removeEventListener(LI,v))}var k=!1;var x={length:t.length,action:"POP",location:b,createHref:E,push:function(e,r){var i="PUSH",o=OI(e,r,f(),x.location);p.confirmTransitionTo(o,i,c,(function(e){if(e){var r=E(o),a=o.key,c=o.state;if(n)if(t.pushState({key:a,state:c},null,r),s)window.location.href=r;else{var u=_.indexOf(x.location.key),l=_.slice(0,u+1);l.push(o.key),_=l,m({action:i,location:o})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",o=OI(e,r,f(),x.location);p.confirmTransitionTo(o,i,c,(function(e){if(e){var r=E(o),a=o.key,c=o.state;if(n)if(t.replaceState({key:a,state:c},null,r),s)window.location.replace(r);else{var u=_.indexOf(x.location.key);-1!==u&&(_[u]=o.key),m({action:i,location:o})}else window.location.replace(r)}}))},go:T,goBack:function(){T(-1)},goForward:function(){T(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return k||(I(1),k=!0),function(){return k&&(k=!1,I(-1)),t()}},listen:function(e){var t=p.appendListener(e);return I(1),function(){I(-1),t()}}};return x}var UI="hashchange",VI={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+xI(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:xI,decodePath:kI},slash:{encodePath:kI,decodePath:kI}};function BI(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function zI(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function qI(e){window.location.replace(BI(window.location.href)+"#"+e)}function WI(e){void 0===e&&{},DI||II(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?RI:r,o=n.hashType,s=void 0===o?"slash":o,a=e.basename?NI(kI(e.basename)):"",c=VI[s],u=c.encodePath,l=c.decodePath;function h(){var e=l(zI());return a&&CI(e,a),OI(e)}var d=PI();function f(e){bI(I,e),I.length=t.length,d.notifyListeners(I.location,I.action)}var p=!1,m=null;function g(){var e=zI(),t=u(e);if(e!==t)qI(t);else{var n=h(),r=I.location;if(!p&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(m===AI(n))return;null,function(e){if(p)!1,f();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?f({action:t,location:e}):function(e){var t=I.location,n=b.lastIndexOf(AI(t));-1===n&&0;var r=b.lastIndexOf(AI(e));-1===r&&0;var i=n-r;i&&(!0,_(i))}(e)}))}}(n)}}var v=zI(),y=u(v);v!==y&&qI(y);var w=h(),b=[AI(w)];function _(e){t.go(e)}var E=0;function T(e){1===(E+=e)&&1===e?window.addEventListener(UI,g):0===E&&window.removeEventListener(UI,g)}var S=!1;var I={length:t.length,action:"POP",location:w,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&BI(window.location.href),n+"#"+u(a+AI(e))},push:function(e,t){var n="PUSH",r=OI(e,void 0,void 0,I.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=AI(r),i=u(a+t);if(zI()!==i){t,function(e){window.location.hash=e}(i);var o=b.lastIndexOf(AI(I.location)),s=b.slice(0,o+1);s.push(t),s,f({action:n,location:r})}else f()}}))},replace:function(e,t){var n="REPLACE",r=OI(e,void 0,void 0,I.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=AI(r),i=u(a+t);zI()!==i&&(t,qI(i));var o=b.indexOf(AI(I.location));-1!==o&&(b[o]=t),f({action:n,location:r})}}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},block:function(e){void 0===e&&!1;var t=d.setPrompt(e);return S||(T(1),!0),function(){return S&&(!1,T(-1)),t()}},listen:function(e){var t=d.appendListener(e);return T(1),function(){T(-1),t()}}};return I}function KI(e,t,n){return Math.min(Math.max(e,t),n)}function HI(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,o=t.initialIndex,s=void 0===o?0:o,a=t.keyLength,c=void 0===a?6:a,u=PI();function l(e){bI(g,e),g.length=g.entries.length,u.notifyListeners(g.location,g.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=KI(s,0,i.length-1),f=i.map((function(e){return OI(e,void 0,"string"===typeof e?h():e.key||h())})),p=AI;function m(e){var t=KI(g.index+e,0,g.entries.length-1),r=g.entries[t];u.confirmTransitionTo(r,"POP",n,(function(e){e?l({action:"POP",location:r,index:t}):l()}))}var g={length:f.length,action:"POP",location:f[d],index:d,entries:f,createHref:p,push:function(e,t){var r="PUSH",i=OI(e,t,h(),g.location);u.confirmTransitionTo(i,r,n,(function(e){if(e){var t=g.index+1,n=g.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),l({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=OI(e,t,h(),g.location);u.confirmTransitionTo(i,r,n,(function(e){e&&(g.entries[g.index]=i,l({action:r,location:i}))}))},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(e){var t=g.index+e;return t>=0&&t<g.entries.length},block:function(e){return void 0===e&&!1,u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return g}var GI=n(2007),QI=n.n(GI),$I=1073741823,JI="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function YI(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var XI=PT.createContext||function(e,t){var n,r,i="__create-react-context-"+function(){var e="__global_unique_id__";return JI[e]=(JI[e]||0)+1}()+"__",o=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=YI(t.props.value),t}wI(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[i]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(n="function"===typeof t?t(r,i):$I,0!==(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(PT.Component);o.childContextTypes=((n={})[i]=QI().object.isRequired,n);var s=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}wI(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?$I:t},r.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?$I:e},r.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},r.getValue=function(){return this.context[i]?this.context[i].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(PT.Component);return s.contextTypes=((r={})[i]=QI().object,r),{Provider:o,Consumer:s}};const ZI=XI;var ek=n(6151),tk=n.n(ek);n(7441);function nk(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var rk=n(2110),ik=n.n(rk),ok=function(e){var t=ZI();return t.displayName=e,t},sk=ok("Router-History"),ak=ok("Router"),ck=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}wI(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return PT.createElement(ak.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},PT.createElement(sk.Provider,{children:this.props.children||null,value:this.props.history}))},t}(PT.Component);PT.Component;PT.Component;var uk={},lk=0;function hk(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,s=n.strict,a=void 0!==s&&s,c=n.sensitive,u=void 0!==c&&c;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=uk[n]||(uk[n]={});if(r[e])return r[e];var i=[],o={regexp:tk()(e,i,t),keys:i};return lk<1e4&&(r[e]=o,lk++),o}(n,{end:o,strict:a,sensitive:u}),i=r.regexp,s=r.keys,c=i.exec(e);if(!c)return null;var l=c[0],h=c.slice(1),d=e===l;return o&&!d?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:d,params:s.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var dk=function(e){function t(){return e.apply(this,arguments)||this}return wI(t,e),t.prototype.render=function(){var e=this;return PT.createElement(ak.Consumer,null,(function(t){t||II(!1);var n=e.props.location||t.location,r=bI({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?hk(n.pathname,e.props):t.match}),i=e.props,o=i.children,s=i.component,a=i.render;return Array.isArray(o)&&function(e){return 0===PT.Children.count(e)}(o)&&(o=null),PT.createElement(ak.Provider,{value:r},r.match?o?"function"===typeof o?o(r):o:s?PT.createElement(s,r):a?a(r):null:"function"===typeof o?o(r):null)}))},t}(PT.Component);function fk(e){return"/"===e.charAt(0)?e:"/"+e}function pk(e,t){if(!e)return t;var n=fk(e);return 0!==t.pathname.indexOf(n)?t:bI({},t,{pathname:t.pathname.substr(n.length)})}function mk(e){return"string"===typeof e?e:AI(e)}function gk(e){return function(){II(!1)}}function vk(){}PT.Component;var yk=function(e){function t(){return e.apply(this,arguments)||this}return wI(t,e),t.prototype.render=function(){var e=this;return PT.createElement(ak.Consumer,null,(function(t){t||II(!1);var n,r,i=e.props.location||t.location;return PT.Children.forEach(e.props.children,(function(e){if(null==r&&PT.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?hk(i.pathname,bI({},e.props,{path:o})):t.match}})),r?PT.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(PT.Component);var wk=PT.useContext;var bk=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=FI(t.props),t}return wI(t,e),t.prototype.render=function(){return PT.createElement(ck,{history:this.history,children:this.props.children})},t}(PT.Component);PT.Component;var _k=function(e,t){return"function"===typeof e?e(t):e},Ek=function(e,t){return"string"===typeof e?OI(e,null,null,t):e},Tk=function(e){return e},Sk=PT.forwardRef;"undefined"===typeof Sk&&(Sk=Tk);var Ik=Sk((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=nk(e,["innerRef","navigate","onClick"]),s=o.target,a=bI({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return a.ref=Tk!==Sk&&t||n,PT.createElement("a",a)}));var kk=Sk((function(e,t){var n=e.component,r=void 0===n?Ik:n,i=e.replace,o=e.to,s=e.innerRef,a=nk(e,["component","replace","to","innerRef"]);return PT.createElement(ak.Consumer,null,(function(e){e||II(!1);var n=e.history,c=Ek(_k(o,e.location),e.location),u=c?n.createHref(c):"",l=bI({},a,{href:u,navigate:function(){var t=_k(o,e.location),r=AI(e.location)===AI(Ek(t));(i||r?n.replace:n.push)(t)}});return Tk!==Sk?l.ref=t||s:l.innerRef=s,PT.createElement(r,l)}))})),xk=function(e){return e},Ck=PT.forwardRef;"undefined"===typeof Ck&&(Ck=xk);Ck((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,o=void 0===i?"active":i,s=e.activeStyle,a=e.className,c=e.exact,u=e.isActive,l=e.location,h=e.sensitive,d=e.strict,f=e.style,p=e.to,m=e.innerRef,g=nk(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return PT.createElement(ak.Consumer,null,(function(e){e||II(!1);var n=l||e.location,i=Ek(_k(p,n),n),v=i.pathname,y=v&&v.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),w=y?hk(n.pathname,{path:y,exact:c,sensitive:h,strict:d}):null,b=!!(u?u(w,n):w),_="function"===typeof a?a(b):a,E="function"===typeof f?f(b):f;b&&(_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(_,o),E=bI({},E,s));var T=bI({"aria-current":b&&r||null,className:_,style:E,to:i},g);return xk!==Ck?T.ref=t||m:T.innerRef=m,PT.createElement(kk,T)}))}));var Nk=n(763),Ak=n.n(Nk);const Ok={apiKey:"AIzaSyCLA_RFXrPvBdN_vrApCUlj28a82ownuzg",authDomain:"fire-set.firebaseapp.com",databaseURL:"https://fire-set.firebaseio.com",projectId:"fire-set",storageBucket:"fire-set.appspot.com",messagingSenderId:"958559518798",appId:"1:958559518798:web:ec451bbfb4ac03f30ec31f",measurementId:"G-FCHHM3FEZE"};Ge.initializeApp(Ok);const Pk=Ge.firestore(),Dk=e=>[...Array(e).keys()],Rk=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;t=4===n?Dk(3).map((t=>{const n=Dk(4).map((n=>e.includes(4*t+n)?"x":"o"));return n.join("")})):Dk(4).map((t=>{const n=Dk(3).map((n=>e.includes(3*t+n)?"x":"o"));return n.join("")})),console.log(t.join("\n"))},Mk=function(e){let{debug:t=!1,returnWhenFound:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0,i=[];for(let o=0;o<e.length-2;o++)for(let s=o+1;s<e.length-1;s++)for(let a=s+1;a<e.length;a++)if(i=[e[o],e[s],e[a]],jk(i)&&(t&&Rk([o,s,a]),r++,n))return r;return r},Lk=()=>{let e=[];return Dk(3).forEach((t=>{Dk(3).forEach((n=>{Dk(3).forEach((r=>{Dk(3).forEach((i=>{const o=""+t+r+n+i;e.push(o)}))}))}))})),e},jk=e=>{if(3!==e.length)return!1;const[t,n,r]=e;for(let i=0;i<4;i++){if((Number(t[i])+Number(n[i])+Number(r[i]))%3!==0)return!1}return!0},Fk=(e,t)=>{let n,r,i="";for(let o=0;o<4;o++)e[o]===t[o]?i+=e[o]:(n=Number(e[o])+Number(t[o]),r=(3-n).toString(),i+=r);return i.trim()},Uk=(e,t)=>t.includes(e)?t.filter((t=>t!==e)):[...t,e],Vk=function(e){let{board:t=[],deck:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=(0,Nk.shuffle)([...t,...n]);for(;Mk(o.slice(0,r))<i&&Mk(o,{returnWhenFound:!0})>0;)o=(0,Nk.shuffle)(o);return{deck:o.slice(r),board:o.slice(0,r)}},Bk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e){let e=[...Ak().shuffle(Lk()).slice(0,2)];const t=Fk(e[0],e[1]);return[e[0],e[1],t]}const t=["","",""];let n=[!1,!1,!1,!1];const r=Ak().sampleSize(Ak().range(4),e);return r.forEach((e=>{n[e]=Math.floor(3*Math.random()).toString()})),n.forEach((e=>{const n=Ak().shuffle(["0","1","2"]);for(let r=0;r<3;r++)t[r]=!1===e?t[r]+n[r].toString():t[r]+e})),t},zk=function(){let{startingSetCards:e=2,boardSize:t=12,commonTraits:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Ak().shuffle(Lk()),i=Ak().shuffle(Bk(n)),o=i.slice(0,2);const s=i[2];r=r.filter((e=>!i.includes(e)));let a=Ak().shuffle([s,...r.slice(0,t-3)]);return o=[...o,...a],r=r.slice(t-3),{board:o,deck:r}},qk=e=>{const{board:t,deck:n,selected:r}=e,i=n.slice(0,3);let o=[...t],s=n.slice(3);for(r.forEach(((e,t)=>{let n=o.indexOf(e);o[n]=i[t]}));0===Mk(o);)({deck:s,board:o}=Vk({board:o,deck:s}));return{deck:s,board:o,selected:[]}},Wk=()=>{const e=new Ge.auth.GoogleAuthProvider;Ge.auth().signInWithRedirect(e)},Kk=(e,t)=>{let n;n="string"===typeof e?Pk.collection("games").doc(e):e,n.update({...t,lastUpdate:Ge.firestore.FieldValue.serverTimestamp()})};var Hk=n(7248),Gk=n(327),Qk=n(4164);let $k=function(e){e()};const Jk=()=>$k,Yk=PT.createContext(null);function Xk(){return(0,PT.useContext)(Yk)}const Zk=()=>{throw new Error("uSES not initialized!")};let ex=Zk;const tx=(e,t)=>e===t;function nx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yk;const t=e===Yk?Xk:()=>(0,PT.useContext)(e);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tx;const{store:r,subscription:i,getServerState:o}=t(),s=ex(i.addNestedSub,r.getState,o||r.getState,e,n);return(0,PT.useDebugValue)(s),s}}const rx=nx();var ix=n(6900);const ox=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function sx(e,t,n,r,i){let o,s,a,c,u,{areStatesEqual:l,areOwnPropsEqual:h,areStatePropsEqual:d}=i,f=!1;function p(i,f){const p=!h(f,s),m=!l(i,o);return o=i,s=f,p&&m?(a=e(o,s),t.dependsOnOwnProps&&(c=t(r,s)),u=n(a,c,s),u):p?(e.dependsOnOwnProps&&(a=e(o,s)),t.dependsOnOwnProps&&(c=t(r,s)),u=n(a,c,s),u):m?function(){const t=e(o,s),r=!d(t,a);return a=t,r&&(u=n(a,c,s)),u}():u}return function(i,l){return f?p(i,l):(o=i,s=l,a=e(o,s),c=t(r,s),u=n(a,c,s),f=!0,u)}}function ax(e,t){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:i}=t,o=nk(t,ox);return sx(n(e,o),r(e,o),i(e,o),e,o)}function cx(e){return function(t){const n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function ux(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function lx(e,t){return function(t,n){let{displayName:r}=n;const i=function(e,t){return i.dependsOnOwnProps?i.mapToProps(e,t):i.mapToProps(e,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(t,n){i.mapToProps=e,i.dependsOnOwnProps=ux(e);let r=i(t,n);return"function"===typeof r&&(i.mapToProps=r,i.dependsOnOwnProps=ux(r),r=i(t,n)),r},i}}function hx(e,t){return(n,r)=>{throw new Error("Invalid value of type ".concat(typeof e," for ").concat(t," argument when connecting component ").concat(r.wrappedComponentName,"."))}}function dx(e){return e&&"object"===typeof e?cx((t=>function(e,t){const n={};for(const r in e){const i=e[r];"function"===typeof i&&(n[r]=function(){return t(i(...arguments))})}return n}(e,t))):e?"function"===typeof e?lx(e):hx(e,"mapDispatchToProps"):cx((e=>({dispatch:e})))}function fx(e){return e?"function"===typeof e?lx(e):hx(e,"mapStateToProps"):cx((()=>({})))}function px(e,t,n){return bI({},n,e,t)}function mx(e){return e?"function"===typeof e?function(e){return function(t,n){let r,{displayName:i,areMergedPropsEqual:o}=n,s=!1;return function(t,n,i){const a=e(t,n,i);return s?o(a,r)||(r=a):(s=!0,r=a),r}}}(e):hx(e,"mergeProps"):()=>px}const gx={notify(){},get:()=>[]};function vx(e,t){let n,r=gx;function i(){s.onStateChange&&s.onStateChange()}function o(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){const e=Jk();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}const s={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:o,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=gx)},getListeners:()=>r};return s}const yx=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?PT.useLayoutEffect:PT.useEffect;function wx(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function bx(e,t){if(wx(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!wx(e[n[i]],t[n[i]]))return!1;return!0}const _x=["reactReduxForwardedRef"];let Ex=Zk;const Tx=[null,null];function Sx(e,t,n){yx((()=>e(...t)),n)}function Ix(e,t,n,r,i,o){e.current=r,n.current=!1,i.current&&(i.current=null,o())}function kx(e,t,n,r,i,o,s,a,c,u,l){if(!e)return()=>{};let h=!1,d=null;const f=()=>{if(h||!a.current)return;const e=t.getState();let n,f;try{n=r(e,i.current)}catch(p){f=p,d=p}f||(d=null),n===o.current?s.current||u():(o.current=n,c.current=n,s.current=!0,l())};n.onStateChange=f,n.trySubscribe(),f();return()=>{if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}function xx(e,t){return e===t}const Cx=function(e,t,n){let{pure:r,areStatesEqual:i=xx,areOwnPropsEqual:o=bx,areStatePropsEqual:s=bx,areMergedPropsEqual:a=bx,forwardRef:c=!1,context:u=Yk}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const l=u,h=fx(e),d=dx(t),f=mx(n),p=Boolean(e),m=e=>{const t=e.displayName||e.name||"Component",n="Connect(".concat(t,")"),r={shouldHandleStateChanges:p,displayName:n,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:h,initMapDispatchToProps:d,initMergeProps:f,areStatesEqual:i,areStatePropsEqual:s,areOwnPropsEqual:o,areMergedPropsEqual:a};function u(t){const[n,i,o]=(0,PT.useMemo)((()=>{const{reactReduxForwardedRef:e}=t,n=nk(t,_x);return[t.context,e,n]}),[t]),s=(0,PT.useMemo)((()=>n&&n.Consumer&&(0,ix.isContextConsumer)(PT.createElement(n.Consumer,null))?n:l),[n,l]),a=(0,PT.useContext)(s),c=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),u=Boolean(a)&&Boolean(a.store);const h=c?t.store:a.store,d=u?a.getServerState:h.getState,f=(0,PT.useMemo)((()=>ax(h.dispatch,r)),[h]),[m,g]=(0,PT.useMemo)((()=>{if(!p)return Tx;const e=vx(h,c?void 0:a.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[h,c,a]),v=(0,PT.useMemo)((()=>c?a:bI({},a,{subscription:m})),[c,a,m]),y=(0,PT.useRef)(),w=(0,PT.useRef)(o),b=(0,PT.useRef)(),_=(0,PT.useRef)(!1),E=((0,PT.useRef)(!1),(0,PT.useRef)(!1)),T=(0,PT.useRef)();yx((()=>(E.current=!0,()=>{E.current=!1})),[]);const S=(0,PT.useMemo)((()=>()=>b.current&&o===w.current?b.current:f(h.getState(),o)),[h,o]),I=(0,PT.useMemo)((()=>e=>m?kx(p,h,m,f,w,y,_,E,b,g,e):()=>{}),[m]);let k;Sx(Ix,[w,y,_,o,b,g]);try{k=Ex(I,S,d?()=>f(d(),o):S)}catch(C){throw T.current&&(C.message+="\nThe error may be correlated with this previous error:\n".concat(T.current.stack,"\n\n")),C}yx((()=>{T.current=void 0,b.current=void 0,y.current=k}));const x=(0,PT.useMemo)((()=>PT.createElement(e,bI({},k,{ref:i}))),[i,e,k]);return(0,PT.useMemo)((()=>p?PT.createElement(s.Provider,{value:v},x):x),[s,x,v])}const m=PT.memo(u);if(m.WrappedComponent=e,m.displayName=u.displayName=n,c){const t=PT.forwardRef((function(e,t){return PT.createElement(m,bI({},e,{reactReduxForwardedRef:t}))}));return t.displayName=n,t.WrappedComponent=e,ik()(t,e)}return ik()(m,e)};return m};const Nx=function(e){let{store:t,context:n,children:r,serverState:i}=e;const o=(0,PT.useMemo)((()=>{const e=vx(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0}}),[t,i]),s=(0,PT.useMemo)((()=>t.getState()),[t]);yx((()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,s]);const a=n||Yk;return PT.createElement(a.Provider,{value:o},r)};function Ax(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yk;const t=e===Yk?Xk:()=>(0,PT.useContext)(e);return function(){const{store:e}=t();return e}}const Ox=Ax();function Px(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yk;const t=e===Yk?Ox:Ax(e);return function(){return t().dispatch}}const Dx=Px();var Rx;(e=>{ex=e})(Gk.useSyncExternalStoreWithSelector),(e=>{Ex=e})(Hk.useSyncExternalStore),Rx=Qk.unstable_batchedUpdates,$k=Rx;var Mx=n(184);const Lx={width:120,height:200,strokeWidth:4,padding:25},jx=e=>{let{fill:t,color:n}=e,{padding:r,height:i,width:o,strokeWidth:s}=Lx;return(0,Mx.jsxs)("svg",{width:"120",height:"200",xmlns:"http://www.w3.org/2000/svg",children:[(0,Mx.jsxs)("g",{children:[(0,Mx.jsx)("rect",{fill:"#fff",id:"canvas_background",height:"202",width:"122",y:"-1",x:"-1"}),(0,Mx.jsx)("g",{display:"none",overflow:"visible",y:"0",x:"0",height:"100%",width:"100%",id:"canvasGrid",children:(0,Mx.jsx)("rect",{fill:"#fff",strokeWidth:"0",y:"0",x:"0",height:"100%",width:"100%"})})]}),(0,Mx.jsx)("g",{children:(0,Mx.jsx)("path",{stroke:n,transform:" rotate(270,58.8,98) scale(0.8 1) translate(10 0) ",id:"svg_5",d:" m-17.49,66 c50.83,-35.45 101.7,35.45 152.5,0 c30,-10 30,43.8 0,63.8 c-50.8,35.45 -101.6,-35.45 -152.5,0 c-30,15 -30,-45 0,-63.59 z ",fillOpacity:"null",strokeOpacity:"null",strokeWidth:s,fill:t})})]})},Fx=e=>{let{shape:t,fill:n,color:r,num:i}=e,{padding:o,height:s,width:a,strokeWidth:c}=Lx;return"0"===t?(o+=1,(0,Mx.jsx)(jx,{fill:n,color:r})):"1"===t?(0,Mx.jsx)("g",{children:(0,Mx.jsx)("ellipse",{stroke:r,ry:(s-2*o)/2,rx:(a-2*o)/2,cy:s/2,cx:a/2,fillOpacity:"null",strokeOpacity:"null",strokeWidth:Lx.strokeWidth,fill:n})}):"2"===t?(0,Mx.jsx)("g",{children:(0,Mx.jsx)("polygon",{points:"".concat(o,",").concat(s/2,"\n          ").concat(a/2,",").concat(o,"\n          ").concat(a-o,",").concat(s/2,"\n          ").concat(a/2,",").concat(s-o),style:{fill:n,stroke:r,strokeWidth:Lx.strokeWidth}})}):null};class Ux extends PT.Component{constructor(){super(...arguments),this.colors={0:"#61d020",1:"#1b2f92",2:"#FF0000",white:"#fff"},this.getFill=(e,t)=>"1"===t?"url(#card-".concat(e,"-").concat(t,")"):"2"===t?this.colors[e]:this.colors.white,this.drawShape=()=>{const[e,t,n,r]=this.props.desc.split("");return(0,Mx.jsxs)(PT.Fragment,{children:[(0,Mx.jsxs)("g",{children:[(0,Mx.jsx)("title",{children:"background"}),(0,Mx.jsx)("rect",{fill:this.colors.white,id:"canvas_background",y:"-1",x:"-1"}),(0,Mx.jsx)("g",{display:"none",overflow:"visible",y:"0",x:"0",height:"100%",width:"100%",id:"canvasGrid",children:(0,Mx.jsx)("rect",{strokeWidth:"0",y:"0",x:"0",height:"100%",width:"100%"})})]}),(0,Mx.jsx)(Fx,{shape:n,num:e,fill:this.getFill(t,r),color:this.colors[t]})]})}}render(){const[e,t,,n]=this.props.desc.split("");return(0,Mx.jsxs)("div",{className:"game-card d-flex justify-content-center",children:[(0,Mx.jsx)("svg",{width:"0",height:"0",children:(0,Mx.jsx)("pattern",{id:"card-".concat(t,"-").concat(n),width:10,height:"10",patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse",children:(0,Mx.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:"10",style:{stroke:this.colors[t],strokeWidth:"5"}})})}),Dk(Number(e)+1).map((t=>(0,Mx.jsx)("svg",{className:"shape ".concat("1"===e?"double":""),viewBox:"0 0 ".concat(Lx.width," ").concat(Lx.height),xmlns:"http://www.w3.org/2000/svg",children:this.drawShape()},t)))]})}}const Vx=Ux;const Bx=function(e){const{gameOver:t,myName:n,solo:r,finalScore:i,reset:o}=e,s=rx((e=>e.user)),{user:a}=s;return(0,Mx.jsx)("div",{className:"game-over container mt-5",children:(0,Mx.jsx)("div",{className:"row justify-content-center",children:(0,Mx.jsx)("div",{className:"col col-md-6",children:(0,Mx.jsxs)("div",{className:"card shadow",children:[(0,Mx.jsx)("h3",{className:"text-center mt-3",children:"GAME OVER!"}),isNaN(i)?(0,Mx.jsxs)("p",{className:"text-center mb-4",children:["Winner: ",t," "]}):(0,Mx.jsxs)("div",{className:"d-flex flex-column justify-content-center",children:[(0,Mx.jsxs)("p",{className:"text-center my-2",children:["Final Score: ",i," "]}),(0,Mx.jsx)("div",{className:"d-flex flex-row justify-content-center",children:(0,Mx.jsx)("button",{className:"btn btn-primary my-2",onClick:()=>o(),children:"Reset"})})]}),(0,Mx.jsxs)("div",{className:"row justify-content-center",children:[(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("p",{className:"text-center",children:(0,Mx.jsx)(kk,{to:"/",children:"Main"})})}),r&&null!==a&&(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("p",{className:"text-center",children:(0,Mx.jsx)(kk,{to:"/stats",children:"Stats"})})})]})]})})})})};var zx=n(1694),qx=n.n(zx);const Wx=!("undefined"===typeof window||!window.document||!window.document.createElement);var Kx=!1,Hx=!1;try{var Gx={get passive(){return Kx=!0},get once(){return Hx=Kx=!0}};Wx&&(window.addEventListener("test",Gx,Gx),window.removeEventListener("test",Gx,!0))}catch(NR){}const Qx=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Hx){var i=r.once,o=r.capture,s=n;!Hx&&i&&(s=n.__once||function e(r){this.removeEventListener(t,e,o),n.call(this,r)},n.__once=s),e.addEventListener(t,s,Kx?r:o)}e.addEventListener(t,n,r)};function $x(e){return e&&e.ownerDocument||document}const Jx=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var Yx;function Xx(e){if((!Yx&&0!==Yx||e)&&Wx){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Yx=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Yx}const Zx=function(e){var t=(0,PT.useRef)(e);return(0,PT.useEffect)((function(){t.current=e}),[e]),t};function eC(e){var t=Zx(e);return(0,PT.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}var tC=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};const nC=function(e,t){return(0,PT.useMemo)((function(){return function(e,t){var n=tC(e),r=tC(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])};function rC(e){var t=function(e){var t=(0,PT.useRef)(e);return t.current=e,t}(e);(0,PT.useEffect)((function(){return function(){return t.current()}}),[])}function iC(e,t){return function(e){var t=$x(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var oC=/([A-Z])/g;var sC=/^ms-/;function aC(e){return function(e){return e.replace(oC,"-$1").toLowerCase()}(e).replace(sC,"-ms-")}var cC=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const uC=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(aC(t))||iC(e).getPropertyValue(aC(t));Object.keys(t).forEach((function(i){var o=t[i];o||0===o?!function(e){return!(!e||!cC.test(e))}(i)?n+=aC(i)+": "+o+";":r+=i+"("+o+") ":e.style.removeProperty(aC(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};const lC=function(e,t,n,r){return Qx(e,t,n,r),function(){Jx(e,t,n,r)}};function hC(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),o=lC(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),o()}}function dC(e,t,n,r){null==n&&(n=function(e){var t=uC(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=hC(e,n,r),o=lC(e,"transitionend",t);return function(){i(),o()}}function fC(e){void 0===e&&(e=$x());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(NR){return e.body}}function pC(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}const mC=(gC="modal-open","".concat("data-rr-ui-").concat(gC));var gC;const vC=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(uC(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(mC,""),uC(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(mC),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},yC=(0,PT.createContext)(Wx?window:void 0);yC.Provider;function wC(){return(0,PT.useContext)(yC)}const bC=(e,t)=>{var n;return Wx?null==e?(t||$x()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};const _C=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let EC;function TC(e){const t=wC(),n=e||function(e){return EC||(EC=new vC({ownerDocument:null==e?void 0:e.document})),EC}(t),r=(0,PT.useRef)({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:(0,PT.useCallback)((e=>{r.current.dialog=e}),[]),setBackdropRef:(0,PT.useCallback)((e=>{r.current.backdrop=e}),[])})}const SC=(0,PT.forwardRef)(((e,t)=>{let{show:n=!1,role:r="dialog",className:i,style:o,children:s,backdrop:a=!0,keyboard:c=!0,onBackdropClick:u,onEscapeKeyDown:l,transition:h,backdropTransition:d,autoFocus:f=!0,enforceFocus:p=!0,restoreFocus:m=!0,restoreFocusOptions:g,renderDialog:v,renderBackdrop:y=(e=>(0,Mx.jsx)("div",Object.assign({},e))),manager:w,container:b,onShow:_,onHide:E=(()=>{}),onExit:T,onExited:S,onExiting:I,onEnter:k,onEntering:x,onEntered:C}=e,N=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,_C);const A=function(e,t){const n=wC(),[r,i]=(0,PT.useState)((()=>bC(e,null==n?void 0:n.document)));if(!r){const t=bC(e);t&&i(t)}return(0,PT.useEffect)((()=>{t&&r&&t(r)}),[t,r]),(0,PT.useEffect)((()=>{const t=bC(e);t!==r&&i(t)}),[e,r]),r}(b),O=TC(w),P=function(){var e=(0,PT.useRef)(!0),t=(0,PT.useRef)((function(){return e.current}));return(0,PT.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t.current}(),D=function(e){var t=(0,PT.useRef)(null);return(0,PT.useEffect)((function(){t.current=e})),t.current}(n),[R,M]=(0,PT.useState)(!n),L=(0,PT.useRef)(null);(0,PT.useImperativeHandle)(t,(()=>O),[O]),Wx&&!D&&n&&(L.current=fC()),h||n||R?n&&R&&M(!1):M(!0);const j=eC((()=>{if(O.add(),q.current=lC(document,"keydown",B),z.current=lC(document,"focus",(()=>setTimeout(U)),!0),_&&_(),f){const e=fC(document);O.dialog&&e&&!pC(O.dialog,e)&&(L.current=e,O.dialog.focus())}})),F=eC((()=>{var e;(O.remove(),null==q.current||q.current(),null==z.current||z.current(),m)&&(null==(e=L.current)||null==e.focus||e.focus(g),L.current=null)}));(0,PT.useEffect)((()=>{n&&A&&j()}),[n,A,j]),(0,PT.useEffect)((()=>{R&&F()}),[R,F]),rC((()=>{F()}));const U=eC((()=>{if(!p||!P()||!O.isTopModal())return;const e=fC();O.dialog&&e&&!pC(O.dialog,e)&&O.dialog.focus()})),V=eC((e=>{e.target===e.currentTarget&&(null==u||u(e),!0===a&&E())})),B=eC((e=>{c&&27===e.keyCode&&O.isTopModal()&&(null==l||l(e),e.defaultPrevented||E())})),z=(0,PT.useRef)(),q=(0,PT.useRef)(),W=function(){M(!0),null==S||S(...arguments)},K=h;if(!A||!(n||K&&!R))return null;const H=Object.assign({role:r,ref:O.setDialogRef,"aria-modal":"dialog"===r||void 0},N,{style:o,className:i,tabIndex:-1});let G=v?v(H):(0,Mx.jsx)("div",Object.assign({},H,{children:PT.cloneElement(s,{role:"document"})}));K&&(G=(0,Mx.jsx)(K,{appear:!0,unmountOnExit:!0,in:!!n,onExit:T,onExiting:I,onExited:W,onEnter:k,onEntering:x,onEntered:C,children:G}));let Q=null;if(a){const e=d;Q=y({ref:O.setBackdropRef,onClick:V}),e&&(Q=(0,Mx.jsx)(e,{appear:!0,in:!!n,children:Q}))}return(0,Mx.jsx)(Mx.Fragment,{children:Qk.createPortal((0,Mx.jsxs)(Mx.Fragment,{children:[Q,G]}),A)})}));SC.displayName="Modal";const IC=Object.assign(SC,{Manager:vC});var kC=Function.prototype.bind.call(Function.prototype.call,[].slice);function xC(e,t){return kC(e.querySelectorAll(t))}function CC(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const NC=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",AC=".sticky-top",OC=".navbar-toggler";class PC extends vC{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,uC(t,{[e]:"".concat(parseFloat(uC(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],uC(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";xC(t,NC).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),xC(t,AC).forEach((t=>this.adjustAndStore(o,t,-e.scrollBarWidth))),xC(t,OC).forEach((t=>this.adjustAndStore(o,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=CC(n.className,r):n.setAttribute("class",CC(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";xC(t,NC).forEach((e=>this.restore(i,e))),xC(t,AC).forEach((e=>this.restore(o,e))),xC(t,OC).forEach((e=>this.restore(o,e)))}}let DC;const RC=!1,MC=PT.createContext(null);var LC="unmounted",jC="exited",FC="entering",UC="entered",VC="exiting",BC=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=jC,r.appearStatus=FC):i=UC:i=t.unmountOnExit||t.mountOnEnter?LC:jC,r.state={status:i},r.nextCallback=null,r}wI(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===LC?{status:jC}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==FC&&n!==UC&&(t=FC):n!==FC&&n!==UC||(t=VC)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===FC){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Qk.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===jC&&this.setState({status:LC})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Qk.findDOMNode(this),r],o=i[0],s=i[1],a=this.getTimeouts(),c=r?a.appear:a.enter;!e&&!n||RC?this.safeSetState({status:UC},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:FC},(function(){t.props.onEntering(o,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:UC},(function(){t.props.onEntered(o,s)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Qk.findDOMNode(this);t&&!RC?(this.props.onExit(r),this.safeSetState({status:VC},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:jC},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:jC},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Qk.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===LC)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,nk(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return PT.createElement(MC.Provider,{value:null},"function"===typeof n?n(e,r):PT.cloneElement(PT.Children.only(n),r))},t}(PT.Component);function zC(){}BC.contextType=MC,BC.propTypes={},BC.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:zC,onEntering:zC,onEntered:zC,onExit:zC,onExiting:zC,onExited:zC},BC.UNMOUNTED=LC,BC.EXITED=jC,BC.ENTERING=FC,BC.ENTERED=UC,BC.EXITING=VC;const qC=BC;function WC(e,t){const n=uC(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function KC(e,t){const n=WC(e,"transitionDuration"),r=WC(e,"transitionDelay"),i=dC(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}const HC=PT.forwardRef(((e,t)=>{let{onEnter:n,onEntering:r,onEntered:i,onExit:o,onExiting:s,onExited:a,addEndListener:c,children:u,childRef:l,...h}=e;const d=(0,PT.useRef)(null),f=nC(d,l),p=e=>{var t;f((t=e)&&"setState"in t?Qk.findDOMNode(t):null!=t?t:null)},m=e=>t=>{e&&d.current&&e(d.current,t)},g=(0,PT.useCallback)(m(n),[n]),v=(0,PT.useCallback)(m(r),[r]),y=(0,PT.useCallback)(m(i),[i]),w=(0,PT.useCallback)(m(o),[o]),b=(0,PT.useCallback)(m(s),[s]),_=(0,PT.useCallback)(m(a),[a]),E=(0,PT.useCallback)(m(c),[c]);return(0,Mx.jsx)(qC,{ref:t,...h,onEnter:g,onEntered:y,onEntering:v,onExit:w,onExited:_,onExiting:b,addEndListener:E,nodeRef:d,children:"function"===typeof u?(e,t)=>u(e,{...t,ref:p}):PT.cloneElement(u,{ref:p})})})),GC=HC,QC={[FC]:"show",[UC]:"show"},$C=PT.forwardRef(((e,t)=>{let{className:n,children:r,transitionClasses:i={},...o}=e;const s=(0,PT.useCallback)(((e,t)=>{!function(e){e.offsetHeight}(e),null==o.onEnter||o.onEnter(e,t)}),[o]);return(0,Mx.jsx)(GC,{ref:t,addEndListener:KC,...o,onEnter:s,childRef:r.ref,children:(e,t)=>PT.cloneElement(r,{...t,className:qx()("fade",n,r.props.className,QC[e],i[e])})})}));$C.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},$C.displayName="Fade";const JC=$C;var YC=/-(.)/g;const XC=["xxl","xl","lg","md","sm","xs"],ZC=PT.createContext({prefixes:{},breakpoints:XC}),{Consumer:eN,Provider:tN}=ZC;function nN(e,t){const{prefixes:n}=(0,PT.useContext)(ZC);return e||n[t]||t}const rN=e=>{return e[0].toUpperCase()+(t=e,t.replace(YC,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function iN(e){let{displayName:t=rN(e),Component:n,defaultProps:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=PT.forwardRef(((t,r)=>{let{className:i,bsPrefix:o,as:s=n||"div",...a}=t;const c=nN(o,e);return(0,Mx.jsx)(s,{ref:r,className:qx()(i,c),...a})}));return i.defaultProps=r,i.displayName=t,i}const oN=iN("modal-body"),sN=PT.createContext({onHide(){}}),aN=PT.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:o,size:s,fullscreen:a,children:c,scrollable:u,...l}=e;n=nN(n,"modal");const h="".concat(n,"-dialog"),d="string"===typeof a?"".concat(n,"-fullscreen-").concat(a):"".concat(n,"-fullscreen");return(0,Mx.jsx)("div",{...l,ref:t,className:qx()(h,r,s&&"".concat(n,"-").concat(s),o&&"".concat(h,"-centered"),u&&"".concat(h,"-scrollable"),a&&d),children:(0,Mx.jsx)("div",{className:qx()("".concat(n,"-content"),i),children:c})})}));aN.displayName="ModalDialog";const cN=aN,uN=iN("modal-footer"),lN={"aria-label":QI().string,onClick:QI().func,variant:QI().oneOf(["white"])},hN=PT.forwardRef(((e,t)=>{let{className:n,variant:r,...i}=e;return(0,Mx.jsx)("button",{ref:t,type:"button",className:qx()("btn-close",r&&"btn-close-".concat(r),n),...i})}));hN.displayName="CloseButton",hN.propTypes=lN,hN.defaultProps={"aria-label":"Close"};const dN=hN,fN=PT.forwardRef(((e,t)=>{let{closeLabel:n,closeVariant:r,closeButton:i,onHide:o,children:s,...a}=e;const c=(0,PT.useContext)(sN),u=eC((()=>{null==c||c.onHide(),null==o||o()}));return(0,Mx.jsxs)("div",{ref:t,...a,children:[s,i&&(0,Mx.jsx)(dN,{"aria-label":n,variant:r,onClick:u})]})}));fN.defaultProps={closeLabel:"Close",closeButton:!1};const pN=fN,mN=PT.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,...i}=e;return n=nN(n,"modal-header"),(0,Mx.jsx)(pN,{ref:t,...i,className:qx()(r,n)})}));mN.displayName="ModalHeader",mN.defaultProps={closeLabel:"Close",closeButton:!1};const gN=mN,vN=(yN="h4",PT.forwardRef(((e,t)=>(0,Mx.jsx)("div",{...e,ref:t,className:qx()(e.className,yN)}))));var yN;const wN=iN("modal-title",{Component:vN}),bN={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:cN};function _N(e){return(0,Mx.jsx)(JC,{...e,timeout:null})}function EN(e){return(0,Mx.jsx)(JC,{...e,timeout:null})}const TN=PT.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,style:i,dialogClassName:o,contentClassName:s,children:a,dialogAs:c,"aria-labelledby":u,"aria-describedby":l,"aria-label":h,show:d,animation:f,backdrop:p,keyboard:m,onEscapeKeyDown:g,onShow:v,onHide:y,container:w,autoFocus:b,enforceFocus:_,restoreFocus:E,restoreFocusOptions:T,onEntered:S,onExit:I,onExiting:k,onEnter:x,onEntering:C,onExited:N,backdropClassName:A,manager:O,...P}=e;const[D,R]=(0,PT.useState)({}),[M,L]=(0,PT.useState)(!1),j=(0,PT.useRef)(!1),F=(0,PT.useRef)(!1),U=(0,PT.useRef)(null),[V,B]=(0,PT.useState)(null),z=nC(t,B),q=eC(y),W=function(){const{dir:e}=(0,PT.useContext)(ZC);return"rtl"===e}();n=nN(n,"modal");const K=(0,PT.useMemo)((()=>({onHide:q})),[q]);function H(){return O||function(e){return DC||(DC=new PC(e)),DC}({isRTL:W})}function G(e){if(!Wx)return;const t=H().getScrollbarWidth()>0,n=e.scrollHeight>$x(e).documentElement.clientHeight;R({paddingRight:t&&!n?Xx():void 0,paddingLeft:!t&&n?Xx():void 0})}const Q=eC((()=>{V&&G(V.dialog)}));rC((()=>{Jx(window,"resize",Q),null==U.current||U.current()}));const $=()=>{j.current=!0},J=e=>{j.current&&V&&e.target===V.dialog&&(F.current=!0),j.current=!1},Y=()=>{L(!0),U.current=dC(V.dialog,(()=>{L(!1)}))},X=e=>{"static"!==p?F.current||e.target!==e.currentTarget?F.current=!1:null==y||y():(e=>{e.target===e.currentTarget&&Y()})(e)},Z=(0,PT.useCallback)((e=>(0,Mx.jsx)("div",{...e,className:qx()("".concat(n,"-backdrop"),A,!f&&"show")})),[f,A,n]),ee={...i,...D};ee.display="block";return(0,Mx.jsx)(sN.Provider,{value:K,children:(0,Mx.jsx)(IC,{show:d,ref:z,backdrop:p,container:w,keyboard:!0,autoFocus:b,enforceFocus:_,restoreFocus:E,restoreFocusOptions:T,onEscapeKeyDown:e=>{m||"static"!==p?m&&g&&g(e):(e.preventDefault(),Y())},onShow:v,onHide:y,onEnter:(e,t)=>{e&&G(e),null==x||x(e,t)},onEntering:(e,t)=>{null==C||C(e,t),Qx(window,"resize",Q)},onEntered:S,onExit:e=>{null==U.current||U.current(),null==I||I(e)},onExiting:k,onExited:e=>{e&&(e.style.display=""),null==N||N(e),Jx(window,"resize",Q)},manager:H(),transition:f?_N:void 0,backdropTransition:f?EN:void 0,renderBackdrop:Z,renderDialog:e=>(0,Mx.jsx)("div",{role:"dialog",...e,style:ee,className:qx()(r,n,M&&"".concat(n,"-static")),onClick:p?X:void 0,onMouseUp:J,"aria-label":h,"aria-labelledby":u,"aria-describedby":l,children:(0,Mx.jsx)(c,{...P,onMouseDown:$,className:o,contentClassName:s,children:a})})})})}));TN.displayName="Modal",TN.defaultProps=bN;const SN=Object.assign(TN,{Body:oN,Header:gN,Title:wN,Footer:uN,Dialog:cN,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});const IN=e=>{const t=Math.floor(e/60),n=e-60*t;return"".concat(t,":").concat((e=>("00"+e).slice(-"00".length))(n))};const kN=function(e){let{gameMode:t,deck:n,board:r,declarer:i,setsFound:o,players:s,elapsedTime:a,timeLeft:c}=e;const u=Mk(r);switch(t){case"shared-device":default:return null;case"versus":return(0,Mx.jsx)("div",{className:"topbar py-2 bg-".concat(i?"light":"dark","-orange"),children:(0,Mx.jsx)("nav",{className:"text-white",children:(0,Mx.jsxs)("div",{className:"d-flex justify-content-around text-center",children:[(0,Mx.jsxs)("div",{children:["Sets: ",u]}),(0,Mx.jsx)("div",{children:i&&(0,Mx.jsxs)(Mx.Fragment,{children:["SET! ",i]})})]})})});case"puzzle":return(0,Mx.jsx)("div",{className:"navbar-fixed",children:(0,Mx.jsx)("nav",{children:(0,Mx.jsxs)("div",{className:"nav-wrapper",style:{display:"flex",justifyContent:"space-between"},children:[(0,Mx.jsxs)("div",{children:["Total Sets: ",u]}),(0,Mx.jsxs)("div",{children:["Remaining: ",u-o.length]}),(0,Mx.jsxs)("div",{children:["Time: ",IN(a)]})]})})});case"training":return(0,Mx.jsx)("div",{className:"topbar py-2 bg-dark-orange navbar-fixed",children:(0,Mx.jsx)("nav",{children:(0,Mx.jsxs)("div",{className:"nav-wrapper d-flex justify-content-around",children:[(0,Mx.jsxs)("div",{children:["Time: ",IN(a)]}),(0,Mx.jsxs)("div",{children:["Score: ",s.you.score]}),(0,Mx.jsxs)("div",{children:["Remaining: ",c>0?c:"X"]})]})})})}};function xN(e){let{players:t,declarer:n,handlePlayerClick:r}=e;return(0,Mx.jsx)("div",{className:"row my-4 text-center justify-content-between",children:t.map((e=>(0,Mx.jsx)("div",{className:"col-2 bg-".concat(e.color," ").concat(e.name==n?"active-player":""),onClick:()=>{r(e.name)},children:(0,Mx.jsx)("p",{className:"my-2 align-middle",children:e.name==n?"SET!":e.score})},e.name)))})}const CN=function(e){const[t,n]=(0,PT.useState)(null),[r,i]=(0,PT.useState)(window.innerHeight),{board:o,selected:s,deck:a,declarer:c,players:u,gameOver:l,myName:h,setFound:d,sharedDevice:f,solo:p,gameMode:m}=e;(0,PT.useEffect)((()=>{const e=(0,Nk.debounce)((()=>{i(window.innerHeight)}),150);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,PT.useEffect)((()=>{n(Mk(o,{debug:!1}))}),[o]);const g=(e=>{let{declarer:t,players:n}=e;return t?(0,Nk.get)(n,"".concat(t,".color"),""):(0,Nk.get)(n,"".concat(h,".color"),"")})(e);if(!(0,Nk.isEmpty)(l))return(0,Mx.jsx)(Bx,{gameOver:l,myName:h,solo:p});const v=(0,Nk.map)(u,((e,t)=>({name:t,...e}))),y=Math.ceil(v.length/2),w=v.slice(0,y),b=v.slice(y);return(0,Mx.jsxs)(PT.Fragment,{children:[((0,Nk.isEmpty)(u)||!Object.keys(u).includes(h))&&(0,Mx.jsxs)(SN,{show:!0,children:[(0,Mx.jsx)(SN.Header,{children:(0,Mx.jsx)(SN.Title,{children:"Waiting to join..."})}),(0,Mx.jsxs)(SN.Body,{children:[(0,Mx.jsx)("h4",{children:"Players:"}),(0,Mx.jsx)("ul",{className:"collection",children:(0,Nk.map)(u,((e,t)=>(0,Mx.jsx)("li",{className:"collection-item",children:(0,Mx.jsxs)("span",{className:"player-name",children:[t," ",e.host&&"(host)"]})},t)))})]})]}),(0,Mx.jsx)(kN,{...e}),(0,Mx.jsxs)("div",{className:"container",children:[f&&(0,Mx.jsx)(xN,{players:w,declarer:c,handlePlayerClick:e.handlePlayerClick}),(0,Mx.jsxs)("div",{className:"board d-flex flex-column align-items-center",children:[(0,Mx.jsx)("div",{className:"board-main-container",children:o.map((t=>(0,Mx.jsx)("div",{className:"card-wrapper",onClick:()=>{e.handleCardClick(t)},children:(0,Mx.jsx)("div",{className:"card-holder ".concat(s.includes(t)?"bg-".concat(g):""),children:(0,Mx.jsx)("div",{className:"card ".concat(d&&3===s.length&&!s.includes(t)?"blurry":""),children:(0,Mx.jsx)(Vx,{desc:t})})})},t)))}),!f&&!["puzzle","training"].includes(m)&&(0,Mx.jsx)("div",{className:"row my-1 text-center fixed-bottom",children:(0,Nk.map)(u,((e,t)=>(0,Mx.jsx)("div",{className:"col s4 m3",children:(0,Mx.jsxs)("span",{className:"player-name bg-".concat(e.color),children:[t,": ",e.score]})},t)))}),e.handleRedeal&&(0,Mx.jsx)("div",{className:"row mt-3",children:(0,Mx.jsx)("div",{className:"col mt-3 mt-md-4",children:(0,Mx.jsx)("button",{onClick:e.handleRedeal,className:"btn btn-primary",children:"Shuffle"})})})]}),f&&(0,Mx.jsx)(xN,{players:b,declarer:c,handlePlayerClick:e.handlePlayerClick})]})]})};const NN=function(e){let{isHost:t,players:n,setState:r}=e;return(0,Nk.findKey)(n,(e=>e.host)),(0,Mx.jsxs)("div",{className:"container mt-4",children:[(0,Mx.jsx)("h4",{children:"Players:"}),(0,Mx.jsx)("ul",{className:"collection",children:(0,Nk.map)(n,((e,t)=>(0,Mx.jsx)("li",{className:"collection-item",children:(0,Mx.jsxs)("span",{className:"player-name",children:[t," ",e.host&&"(host)"]})},t)))}),t?(0,Mx.jsx)("button",{className:"btn btn-primary",onClick:()=>{r({gameStarted:!0})},children:"Start Game"}):(0,Mx.jsx)("p",{children:"Waiting for host to start game..."})]})};var AN=n(1172),ON=n.n(AN);const PN="UPDATE_USER",DN="UPDATE_NICKNAME",RN={loading:!0,user:{}};cI({reducer:{user:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RN,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case PN:return{...e,...t.payload};case DN:return ON()(e,{user:{nickname:{$set:t.payload}}});case"LOGOUT":return{loading:!1,user:null};default:return e}}}});const MN=function(){const e=Dx(),t=wk(sk);return(0,Mx.jsx)("div",{className:"my-3",style:{cursor:"pointer"},children:(0,Mx.jsx)("p",{className:"text-right text-white",children:(0,Mx.jsx)("a",{className:"btn btn-danger",onClick:()=>{Ge.auth().signOut().then((()=>{e({type:"LOGOUT"}),console.log("Signed out."),t.push("/")}))},children:"Sign Out"})})})},LN=PT.forwardRef(((e,t)=>{let{bsPrefix:n,variant:r,animation:i,size:o,as:s="div",className:a,...c}=e;n=nN(n,"spinner");const u="".concat(n,"-").concat(i);return(0,Mx.jsx)(s,{ref:t,...c,className:qx()(a,u,o&&"".concat(u,"-").concat(o),r&&"text-".concat(r))})}));LN.displayName="Spinner";const jN=LN;function FN(e,t){const[n,r]=(0,PT.useState)((()=>{if("undefined"===typeof window)return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.log(n),t}}));return[n,t=>{try{const i=t instanceof Function?t(n):t;r(i),"undefined"!==typeof window&&window.localStorage.setItem(e,JSON.stringify(i))}catch(i){console.log(i)}}]}Ne("firebase","10.10.0","app");const UN=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},VN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,u=t>>2,l=(3&t)<<4|s>>4;let h=(15&s)<<2|c>>6,d=63&c;a||(d=64,o||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(UN(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new BN;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class BN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zN=function(e){try{return VN.decodeString(e,!0)}catch(NR){console.error("base64Decode failed: ",NR)}return null};const qN=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,WN=()=>{try{return qN()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(NR){return}const t=e&&zN(e[1]);return t&&JSON.parse(t)})()}catch(NR){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(NR))}},KN=e=>{var t,n;return null===(n=null===(t=WN())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},HN=e=>{var t;return null===(t=WN())||void 0===t?void 0:t["_".concat(e)]};function GN(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}class QN extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,QN.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$N.prototype.create)}}class $N{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(JN,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new QN(n,o,t)}}const JN=/\{\$([^}]+)}/g;function YN(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(XN(n)&&XN(o)){if(!YN(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function XN(e){return null!==e&&"object"===typeof e}function ZN(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function eA(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function tA(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class nA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=rA),void 0===r.error&&(r.error=rA),void 0===r.complete&&(r.complete=rA);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(NR){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(NR){"undefined"!==typeof console&&console.error&&console.error(NR)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function rA(){}function iA(e){return e&&e._delegate?e._delegate:e}function oA(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function sA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aA=sA,cA=new $N("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),uA=new x("@firebase/auth");function lA(e){if(uA.logLevel<=E.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];uA.error("Auth (".concat(Te,"): ").concat(e),...n)}}function hA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw gA(e,...n)}function dA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gA(e,...n)}function fA(e,t,n){const r=Object.assign(Object.assign({},aA()),{[t]:n});return new $N("auth","Firebase",r).create(t,{appName:e.name})}function pA(e){return fA(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mA(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&hA(e,"argument-error"),fA(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function gA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return cA.create(e,...n)}function vA(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw gA(t,...r)}}function yA(e){const t="INTERNAL ASSERTION FAILED: "+e;throw lA(t),new Error(t)}function wA(e,t){e||yA(t)}function bA(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function _A(){return"http:"===EA()||"https:"===EA()}function EA(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function TA(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(_A()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class SA{constructor(e,t){this.shortDelay=e,this.longDelay=t,wA(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(GN())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return TA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function IA(e,t){wA(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class kA{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void yA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void yA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void yA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},CA=new SA(3e4,6e4);function NA(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function AA(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return OA(e,i,(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=ZN(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),kA.fetch()(DA(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function OA(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},xA),t);try{const t=new MA(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw LA(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw LA(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw LA(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw LA(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw fA(e,a,s);hA(e,a)}}catch(NR){if(NR instanceof QN)throw NR;hA(e,"network-request-failed",{message:String(NR)})}}async function PA(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await AA(e,t,n,r,i);return"mfaPendingCredential"in o&&hA(e,"multi-factor-auth-required",{_serverResponse:o}),o}function DA(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?IA(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function RA(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class MA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(dA(this.auth,"network-request-failed"))),CA.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function LA(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dA(e,t,r);return i.customData._tokenResponse=n,i}function jA(e){return void 0!==e&&void 0!==e.enterprise}class FA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return RA(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function UA(e,t){return AA(e,"GET","/v2/recaptchaConfig",NA(e,t))}async function VA(e,t){return AA(e,"POST","/v1/accounts:lookup",t)}function BA(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(NR){}}function zA(e){return 1e3*Number(e)}function qA(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return lA("JWT malformed, contained fewer than 3 sections"),null;try{const e=zN(n);return e?JSON.parse(e):(lA("Failed to decode base64 JWT payload"),null)}catch(NR){return lA("Caught error parsing JWT payload as JSON",null===NR||void 0===NR?void 0:NR.toString()),null}}function WA(e){const t=qA(e);return vA(t,"internal-error"),vA("undefined"!==typeof t.exp,"internal-error"),vA("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function KA(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return t;try{return await t}catch(NR){throw NR instanceof QN&&HA(NR)&&e.auth.currentUser===e&&await e.auth.signOut(),NR}}function HA(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}class GA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(NR){return void((null===NR||void 0===NR?void 0:NR.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class QA{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=BA(this.lastLoginAt),this.creationTime=BA(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $A(e){var t;const n=e.auth,r=await e.getIdToken(),i=await KA(e,VA(n,{idToken:r}));vA(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?JA(o.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,s),c=e.isAnonymous,u=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),l=!!c&&u,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new QA(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(e,h)}function JA(e){return e.map((e=>{var{providerId:t}=e,n=oA(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class YA{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vA(e.idToken,"internal-error"),vA("undefined"!==typeof e.idToken,"internal-error"),vA("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):WA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){vA(0!==e.length,"internal-error");const t=WA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(vA(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await OA(e,{},(async()=>{const n=ZN({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=DA(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",kA.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new YA;return n&&(vA("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(vA("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(vA("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new YA,this.toJSON())}_performRefresh(){return yA("not implemented")}}function XA(e,t){vA("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ZA{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=oA(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new QA(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await KA(this,this.stsTokenManager.getToken(this.auth,e));return vA(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=iA(e),r=await n.getIdToken(t),i=qA(r);vA(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:BA(zA(i.auth_time)),issuedAtTime:BA(zA(i.iat)),expirationTime:BA(zA(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=iA(e);await $A(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(vA(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ZA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){vA(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await $A(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ye(this.auth.app))return Promise.reject(pA(this.auth));const e=await this.getIdToken();return await KA(this,async function(e,t){return AA(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;vA(y&&E,e,"internal-error");const T=YA.fromJSON(this.name,E);vA("string"===typeof y,e,"internal-error"),XA(l,e.name),XA(h,e.name),vA("boolean"===typeof w,e,"internal-error"),vA("boolean"===typeof b,e,"internal-error"),XA(d,e.name),XA(f,e.name),XA(p,e.name),XA(m,e.name),XA(g,e.name),XA(v,e.name);const S=new ZA({uid:y,auth:e,email:h,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new YA;r.updateFromServerResponse(t);const i=new ZA({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await $A(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];vA(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?JA(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new YA;s.updateFromIdToken(n);const a=new ZA({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new QA(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,c),a}}const eO=new Map;function tO(e){wA(e instanceof Function,"Expected a class definition");let t=eO.get(e);return t?(wA(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,eO.set(e,t),t)}class nO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nO.type="NONE";const rO=nO;function iO(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class oO{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=iO(this.userKey,r.apiKey,i),this.fullPersistenceKey=iO("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ZA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new oO(tO(rO),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||tO(rO);const o=iO(n,e.config.apiKey,e.name);let s=null;for(const u of t)try{const t=await u._get(o);if(t){const n=ZA._fromJSON(e,t);u!==i&&(s=n),i=u;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(c){}}))),new oO(i,e,n)):new oO(i,e,n)}}function sO(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lO(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(aO(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dO(t))return"Blackberry";if(fO(t))return"Webos";if(cO(t))return"Safari";if((t.includes("chrome/")||uO(t))&&!t.includes("edge/"))return"Chrome";if(hO(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function aO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GN();return/firefox\//i.test(e)}function cO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GN();const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function uO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GN();return/crios\//i.test(e)}function lO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GN();return/iemobile/i.test(e)}function hO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GN();return/android/i.test(e)}function dO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GN();return/blackberry/i.test(e)}function fO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GN();return/webos/i.test(e)}function pO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GN();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function mO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GN();var t;return pO(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}function gO(){return function(){const e=GN();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function vO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GN();return pO(e)||hO(e)||fO(e)||dO(e)||/windows phone/i.test(e)||lO(e)}function yO(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=sO(GN());break;case"Worker":t="".concat(sO(GN()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Te,"/").concat(r)}class wO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(NR){r(NR)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(NR){t.reverse();for(const n of t)try{n()}catch(YT){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===NR||void 0===NR?void 0:NR.message})}}}class bO{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class _O{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TO(this),this.idTokenSubscription=new TO(this),this.beforeStateQueue=new wO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tO(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await oO.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(NR){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await VA(this,{idToken:e}),n=await ZA._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ye(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(NR){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(NR)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return vA(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(NR){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $A(e)}catch(NR){if((null===NR||void 0===NR?void 0:NR.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ye(this.app))return Promise.reject(pA(this));const t=e?iA(e):null;return t&&vA(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&vA(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ye(this.app)?Promise.reject(pA(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ye(this.app)?Promise.reject(pA(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(tO(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return AA(e,"GET","/v2/passwordPolicy",NA(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new bO(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $N("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return AA(e,"POST","/v2/accounts:revokeToken",NA(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&tO(e)||this._popupRedirectResolver;vA(t,this,"argument-error"),this.redirectPersistenceManager=await oO.create(this,[tO(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(vA(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vA(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(uA.logLevel<=E.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];uA.warn("Auth (".concat(Te,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function EO(e){return iA(e)}class TO{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new nA(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return vA(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let SO={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IO(e){return SO.loadJS(e)}function kO(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class xO{constructor(e){this.type="recaptcha-enterprise",this.auth=EO(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;jA(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{UA(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new FA(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&jA(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=SO.recaptchaEnterpriseScript;0!==t.length&&(t+=i),IO(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function CO(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new xO(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function NO(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await CO(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await CO(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function AO(e,t){const n=me(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(YN(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;hA(e,"already-initialized")}return n.initialize({options:t})}function OO(e,t,n){const r=EO(e);vA(r._canInitEmulator,r,"emulator-config-failed"),vA(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=PO(t),{host:s,port:a}=function(e){const t=PO(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:DO(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:DO(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function PO(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function DO(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class RO{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yA("not implemented")}_getIdTokenResponse(e){return yA("not implemented")}_linkToIdToken(e,t){return yA("not implemented")}_getReauthenticationResolver(e){return yA("not implemented")}}async function MO(e,t){return AA(e,"POST","/v1/accounts:signUp",t)}async function LO(e,t){return PA(e,"POST","/v1/accounts:signInWithPassword",NA(e,t))}class jO extends RO{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new jO(e,t,"password")}static _fromEmailAndCode(e,t){return new jO(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return NO(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",LO);case"emailLink":return async function(e,t){return PA(e,"POST","/v1/accounts:signInWithEmailLink",NA(e,t))}(e,{email:this._email,oobCode:this._password});default:hA(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return NO(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MO);case"emailLink":return async function(e,t){return PA(e,"POST","/v1/accounts:signInWithEmailLink",NA(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:hA(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function FO(e,t){return PA(e,"POST","/v1/accounts:signInWithIdp",NA(e,t))}class UO extends RO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new UO(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hA("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=oA(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new UO(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return FO(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,FO(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,FO(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ZN(t)}return e}}const VO={USER_NOT_FOUND:"user-not-found"};class BO extends RO{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new BO({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new BO({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return PA(e,"POST","/v1/accounts:signInWithPhoneNumber",NA(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await PA(e,"POST","/v1/accounts:signInWithPhoneNumber",NA(e,t));if(n.temporaryProof)throw LA(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return PA(e,"POST","/v1/accounts:signInWithPhoneNumber",NA(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),VO)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new BO({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class zO{constructor(e){var t,n,r,i,o,s;const a=eA(tA(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);vA(c&&u&&l,"argument-error"),this.apiKey=c,this.operation=l,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=eA(tA(e)).link,n=t?eA(tA(t)).deep_link_id:null,r=eA(tA(e)).deep_link_id;return(r?eA(tA(r)).link:null)||r||n||t||e}(e);try{return new zO(t)}catch(n){return null}}}class qO{constructor(){this.providerId=qO.PROVIDER_ID}static credential(e,t){return jO._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=zO.parseLink(t);return vA(n,"argument-error"),jO._fromEmailAndCode(e,n.code,n.tenantId)}}qO.PROVIDER_ID="password",qO.EMAIL_PASSWORD_SIGN_IN_METHOD="password",qO.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class WO{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class KO extends WO{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class HO extends KO{constructor(){super("facebook.com")}static credential(e){return UO._fromParams({providerId:HO.PROVIDER_ID,signInMethod:HO.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return HO.credentialFromTaggedObject(e)}static credentialFromError(e){return HO.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return HO.credential(t.oauthAccessToken)}catch(n){return null}}}HO.FACEBOOK_SIGN_IN_METHOD="facebook.com",HO.PROVIDER_ID="facebook.com";class GO extends KO{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return UO._fromParams({providerId:GO.PROVIDER_ID,signInMethod:GO.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return GO.credentialFromTaggedObject(e)}static credentialFromError(e){return GO.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return GO.credential(n,r)}catch(i){return null}}}GO.GOOGLE_SIGN_IN_METHOD="google.com",GO.PROVIDER_ID="google.com";class QO extends KO{constructor(){super("github.com")}static credential(e){return UO._fromParams({providerId:QO.PROVIDER_ID,signInMethod:QO.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return QO.credentialFromTaggedObject(e)}static credentialFromError(e){return QO.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return QO.credential(t.oauthAccessToken)}catch(n){return null}}}QO.GITHUB_SIGN_IN_METHOD="github.com",QO.PROVIDER_ID="github.com";class $O extends KO{constructor(){super("twitter.com")}static credential(e,t){return UO._fromParams({providerId:$O.PROVIDER_ID,signInMethod:$O.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $O.credentialFromTaggedObject(e)}static credentialFromError(e){return $O.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return $O.credential(n,r)}catch(i){return null}}}$O.TWITTER_SIGN_IN_METHOD="twitter.com",$O.PROVIDER_ID="twitter.com";class JO{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ZA._fromIdTokenResponse(e,n,r),o=YO(n);return new JO({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=YO(n);return new JO({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function YO(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class XO extends QN{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,XO.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new XO(e,t,n,r)}}function ZO(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw XO._fromErrorAndOperation(e,n,t,r);throw n}))}async function eP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await KA(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return JO._forOperation(e,"link",r)}async function tP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ye(r.app))return Promise.reject(pA(r));const i="reauthenticate";try{const o=await KA(e,ZO(r,i,t,e),n);vA(o.idToken,r,"internal-error");const s=qA(o.idToken);vA(s,r,"internal-error");const{sub:a}=s;return vA(e.uid===a,r,"user-mismatch"),JO._forOperation(e,i,o)}catch(NR){throw(null===NR||void 0===NR?void 0:NR.code)==="auth/".concat("user-not-found")&&hA(r,"user-mismatch"),NR}}async function nP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ye(e.app))return Promise.reject(pA(e));const r="signIn",i=await ZO(e,r,t),o=await JO._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}function rP(e,t,n,r){return iA(e).onIdTokenChanged(t,n,r)}function iP(e,t,n){return iA(e).beforeAuthStateChanged(t,n)}new WeakMap;const oP="__sak";class sP{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oP,"1"),this.storage.removeItem(oP),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class aP extends sP{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=GN();return cO(e)||pO(e)}()&&function(){try{return!(!window||window===window.top)}catch(NR){return!1}}(),this.fallbackToPolling=vO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);gO()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aP.type="LOCAL";const cP=aP;class uP extends sP{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uP.type="SESSION";const lP=uP;class hP{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new hP(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function dP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}hP.receivers=[];class fP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const c=dP("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function pP(){return window}function mP(){return"undefined"!==typeof pP().WorkerGlobalScope&&"function"===typeof pP().importScripts}const gP="firebaseLocalStorageDb",vP="firebaseLocalStorage",yP="fbase_key";class wP{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function bP(e,t){return e.transaction([vP],t?"readwrite":"readonly").objectStore(vP)}function _P(){const e=indexedDB.open(gP,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(vP,{keyPath:yP})}catch(NR){n(NR)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(vP)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(gP);return new wP(e).toPromise()}(),t(await _P()))}))}))}async function EP(e,t,n){const r=bP(e,!0).put({[yP]:t,value:n});return new wP(r).toPromise()}function TP(e,t){const n=bP(e,!0).delete(t);return new wP(n).toPromise()}class SP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await _P()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(NR){if(t++>3)throw NR;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hP._getInstance(mP()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new fP(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _P();return await EP(e,oP,"1"),await TP(e,oP),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>EP(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=bP(e,!1).get(t),r=await new wP(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>TP(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=bP(e,!1).getAll();return new wP(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}SP.type="LOCAL";const IP=SP;kO("rcb"),new SA(3e4,6e4);const kP="recaptcha";async function xP(e,t,n){var r;const i=await n.verify();try{let o;if(vA("string"===typeof i,e,"argument-error"),vA(n.type===kP,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){vA("enroll"===t.type,e,"internal-error");const n=await function(e,t){return AA(e,"POST","/v2/accounts/mfaEnrollment:start",NA(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{vA("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;vA(n,e,"missing-multi-factor-info");const s=await function(e,t){return AA(e,"POST","/v2/accounts/mfaSignIn:start",NA(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return AA(e,"POST","/v1/accounts:sendVerificationCode",NA(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class CP{constructor(e){this.providerId=CP.PROVIDER_ID,this.auth=EO(e)}verifyPhoneNumber(e,t){return xP(this.auth,e,iA(t))}static credential(e,t){return BO._fromVerification(e,t)}static credentialFromResult(e){const t=e;return CP.credentialFromTaggedObject(t)}static credentialFromError(e){return CP.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?BO._fromTokenResponse(n,r):null}}function NP(e,t){return t?tO(t):(vA(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}CP.PROVIDER_ID="phone",CP.PHONE_SIGN_IN_METHOD="phone";class AP extends RO{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return FO(e,this._buildIdpRequest())}_linkToIdToken(e,t){return FO(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return FO(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function OP(e){return nP(e.auth,new AP(e),e.bypassAuthState)}function PP(e){const{auth:t,user:n}=e;return vA(n,t,"internal-error"),tP(n,new AP(e),e.bypassAuthState)}async function DP(e){const{auth:t,user:n}=e;return vA(n,t,"internal-error"),eP(n,new AP(e),e.bypassAuthState)}class RP{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(NR){this.reject(NR)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(NR){this.reject(NR)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OP;case"linkViaPopup":case"linkViaRedirect":return DP;case"reauthViaPopup":case"reauthViaRedirect":return PP;default:hA(this.auth,"internal-error")}}resolve(e){wA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const MP=new SA(2e3,1e4);class LP extends RP{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,LP.currentPopupAction&&LP.currentPopupAction.cancel(),LP.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vA(e,this.auth,"internal-error"),e}async onExecution(){wA(1===this.filter.length,"Popup operations only handle one event");const e=dP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(dA(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(dA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,LP.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(dA(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,MP.get())};e()}}LP.currentPopupAction=null;const jP=new Map;class FP extends RP{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=jP.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=zP(t),r=BP(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(NR){e=()=>Promise.reject(NR)}jP.set(this.auth._key(),e)}return this.bypassAuthState||jP.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function UP(e,t){return BP(e)._set(zP(t),"true")}function VP(e,t){jP.set(e._key(),t)}function BP(e){return tO(e._redirectPersistence)}function zP(e){return iO("pendingRedirect",e.config.apiKey,e.name)}function qP(e,t,n){return async function(e,t,n){if(ye(e.app))return Promise.reject(pA(e));const r=EO(e);mA(e,t,WO),await r._initializationPromise;const i=NP(r,n);return await UP(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}async function WP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ye(e.app))return Promise.reject(pA(e));const r=EO(e),i=NP(r,t),o=new FP(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class KP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GP(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!GP(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(dA(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(HP(e))}saveEventToCache(e){this.cachedEventUids.add(HP(e)),this.lastProcessedEventTime=Date.now()}}function HP(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function GP(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const QP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$P=/^https?/;async function JP(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return AA(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(YP(r))return}catch(n){}hA(e,"unauthorized-domain")}function YP(e){const t=bA(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!$P.test(n))return!1;if(QP.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const XP=new SA(3e4,6e4);function ZP(){const e=pP().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function eD(e){return new Promise(((t,n)=>{var r,i,o;function s(){ZP(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ZP(),n(dA(e,"network-request-failed"))},timeout:XP.get()})}if(null===(i=null===(r=pP().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=pP().gapi)||void 0===o?void 0:o.load)){const t=kO("iframefcb");return pP()[t]=()=>{gapi.load?s():n(dA(e,"network-request-failed"))},IO("".concat(SO.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw tD=null,e}))}let tD=null;const nD=new SA(5e3,15e3),rD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oD(e){const t=e.config;vA(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?IA(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Te},i=iD.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(ZN(r).slice(1))}async function sD(e){const t=await function(e){return tD=tD||eD(e),tD}(e),n=pP().gapi;return vA(n,e,"internal-error"),t.open({where:document.body,url:oD(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rD,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=dA(e,"network-request-failed"),o=pP().setTimeout((()=>{r(i)}),nD.get());function s(){pP().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const aD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cD="_blank",uD="http://localhost";class lD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(NR){}}}function hD(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const dD="__/auth/handler",fD="emulator/auth/handler",pD=encodeURIComponent("fac");async function mD(e,t,n,r,i,o){vA(e.config.authDomain,e,"auth-domain-config-required"),vA(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Te,eventId:i};if(t instanceof WO){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof KO){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const c=await e._getAppCheckToken(),u=c?"#".concat(pD,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(dD);return IA(t,fD)}(e),"?").concat(ZN(a).slice(1)).concat(u)}const gD="webStorageSupport";const vD=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lP,this._completeRedirectFn=WP,this._overrideRedirectResult=VP}async _openPopup(e,t,n,r){var i;wA(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},aD),{width:r.toString(),height:i.toString(),top:o,left:s}),u=GN().toLowerCase();n&&(a=uO(u)?cD:n),aO(u)&&(t=t||uD,c.scrollbars="yes");const l=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(mO(u)&&"_self"!==a)return hD(t||"",a),new lD(null);const h=window.open(t||"",a,l);vA(h,e,"popup-blocked");try{h.focus()}catch(NR){}return new lD(h)}(e,await mD(e,t,n,bA(),r),dP())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){pP().location.href=e}(await mD(e,t,n,bA(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(wA(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await sD(e),n=new KP(e);return t.register("authEvent",(t=>{vA(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gD,{type:gD},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),hA(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vO()||cO()||pO()}};var yD="@firebase/auth",wD="1.7.0";class bD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){vA(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const _D=HN("authIdTokenMaxAge")||300;let ED=null;const TD=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_D)return;const i=null===n||void 0===n?void 0:n.token;ED!==i&&(ED=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function SD(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke();const t=me(e,"auth");if(t.isInitialized())return t.getImmediate();const n=AO(e,{popupRedirectResolver:vD,persistence:[IP,cP,lP]}),r=HN("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=TD(e.toString());iP(n,t,(()=>t(n.currentUser))),rP(n,(e=>t(e)))}}const i=KN("auth");return i&&OO(n,"http://".concat(i)),n}!function(e){SO=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=dA("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function(e){pe(new v("auth",((t,n)=>{let{options:r}=n;const i=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;vA(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:c,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yO(e)},l=new _O(i,o,s,u);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tO);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,r),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),pe(new v("auth-internal",(e=>(e=>new bD(e))(EO(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ne(yD,wD,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(e)),Ne(yD,wD,"esm2017")}("Browser");const ID=Se({...Ok}),kD=SD(ID),xD=(Xm(ID),()=>{const e=Dx();return(0,Mx.jsx)("button",{className:"btn btn-info",onClick:()=>{const t=new GO;window.innerWidth<=768?qP(kD,t):async function(e,t,n){if(ye(e.app))return Promise.reject(dA(e,"operation-not-supported-in-this-environment"));const r=EO(e);mA(e,t,WO);const i=NP(r,n);return new LP(r,"signInViaPopup",t,i).executeNotNull()}(kD,t).then((t=>{const n=t.user;e(gI(n))})).catch((e=>{console.log(e)}))},children:"Sign in with Google"})}),CD=Se(Ok),ND=Xm(CD),AD=SD(CD),OD=()=>Math.random().toString(36).substring(2,11);const PD=function(e){const t=Dx(),n=rx((e=>e.user.loading)),r=rx((e=>e.user.user)),[i,o]=(0,PT.useState)({popupVisible:!1,setFound:!1,displayAnimation:!1,animatedSet:[],declarer:"",deck:[],board:[],selected:[],pending:null,gameStarted:!1}),[s,a]=(0,PT.useState)(!1),[c,u]=(0,PT.useState)(!1),l=rx((e=>{var t;return(null===(t=e.user.user)||void 0===t?void 0:t.nickname)||"anon"})),[h,d]=FN("userUid",null),f=(0,PT.useRef)({}).current,p=(0,PT.useRef)(i);p.current=i;const m=e=>{o({...p.current,...e})},g=e=>{e.preventDefault();const t=r.nickname;if((0,Nk.isEmpty)(t))return;const n=OD();d(n);const i={type:"join",payload:{name:t,uid:r.uid||n}};console.log(i),y(i),u(!0)},v=e=>{const t={...e.data()},{selected:n}=p.current;if((0,Nk.isEmpty)(t))return;const r=n.length<3&&(0,Nk.isEmpty)(t.declarer)?n:t.selected;console.log("New selected",r),m({...t,selected:r,popupVisible:!1})},y=e=>{console.log("Creating on",f.actions),pv(f.actions,{...e,created:Ge.firestore.FieldValue.serverTimestamp()}).then((function(t){if(console.log(t),"found"===e.type){const e=t.id;console.log("Document written with ID: ",e),m({pending:e})}}))};(0,PT.useEffect)((()=>{const{gameName:t}=e.match.params,n=(Wm(ND,"games"),Km(ND,"games",t));f.game=mv(n,(e=>{v(e)}));const r=f.game;return f.actions=Wm(ND,"games",t,"actions"),()=>{r()}}),[e.match.params,v]);const w=()=>{const{declarer:e,selected:t}=p.current;(0,Nk.isEmpty)(e)&&3===t.length&&!jk(t)&&m({selected:[]})},{board:b,deck:_,selected:E,declarer:T,players:S,popupVisible:I}=i;if(n)return"Loading profile...";if((0,Nk.isEmpty)(r)&&!s)return(0,Mx.jsxs)("div",{className:"container mt-4",children:[(0,Mx.jsx)("p",{children:"To join a game, sign in with your Google account."}),(0,Mx.jsx)("p",{children:(0,Mx.jsxs)("div",{className:"row",children:[(0,Mx.jsx)("div",{className:"col-12 col-md-3",children:(0,Mx.jsx)(xD,{})}),(0,Mx.jsx)("div",{className:"col-12 col-md-3",children:(0,Mx.jsx)("button",{onClick:()=>{d(OD()),a(!0)},className:"btn btn-info",children:"Skip Signin"})})]})}),(0,Mx.jsx)("p",{children:(0,Mx.jsx)(kk,{to:"/lobby",children:"Back"})})]});if(!c)return(0,Mx.jsxs)("div",{className:"container",children:[(0,Mx.jsx)(MN,{}),(0,Mx.jsx)("h4",{className:"mb-3",children:"Choose your nickname:"}),(0,Mx.jsxs)("form",{onSubmit:g,children:[(0,Mx.jsx)("div",{className:"col-12 col-md-4",children:(0,Mx.jsx)("input",{autoFocus:!0,type:"text",placeholder:"your name",value:r.nickname||"",onChange:e=>{t(pI(e.target.value))}})}),(0,Mx.jsx)("div",{className:"col-12 col-md-4",children:(0,Mx.jsx)("input",{className:"btn btn-primary mt-3 ml-md-3",type:"submit",value:"Join"})})]})]});const{setFound:k,gameOver:x,gameStarted:C}=p.current;return C?(0,Mx.jsxs)(PT.Fragment,{children:[(0,Mx.jsxs)(SN,{show:i.pending&&I,children:[(0,Mx.jsx)(SN.Header,{children:(0,Mx.jsx)(SN.Title,{children:"Submitting action..."})}),(0,Mx.jsxs)(SN.Body,{children:[(0,Mx.jsx)("p",{className:"text-center",children:"SET!"}),(0,Mx.jsx)("div",{className:"text-center",children:(0,Mx.jsx)(jN,{animation:"border"})})]})]}),(0,Mx.jsx)(CN,{board:b,deck:_,selected:E,declarer:T,handleCardClick:e=>{const{declarer:t,selected:n}=p.current;if(t)return;const r=Uk(e,n);if(r.length>3)return;const i={};if(3===r.length)if(jk(r)){const e={type:"found",payload:{selected:r,name:l}};console.log("Found set, sending..."),y(e),i.popupVisible=!0}else console.log("Bad set selected!"),window.setTimeout(w,1e3);m({...i,selected:r})},players:S,setFound:k,gameOver:x,myName:l,gameMode:"versus"})]}):(0,Mx.jsx)(NN,{players:S,isHost:!1})},DD=["light-blue","pink","amber","light-green","purple","orange","error-red"],RD={turnTime:5e3,colors:DD,playingTo:6};const MD=function(){const e=rx((e=>e.user)),{user:t,loading:n}=e,r=Dx(),i=(0,PT.useRef)({}).current,o=Lk(),s={...Vk({deck:o.slice(12),board:o.slice(0,12)}),selected:[]},[a,c]=(0,PT.useState)(),[u,l]=(0,PT.useState)(""),[h,d]=(0,PT.useState)(),[f,p]=(0,PT.useState)(),[m,g]=(0,PT.useState)(),[v,y]=(0,PT.useState)({gameTitle:"",players:{},created:!1,gameStarted:!1,myName:"",setFound:!1,declarer:null,gameOver:"",...s}),w=(0,PT.useRef)(v);w.current=v,(0,PT.useEffect)((()=>{t&&!(0,Nk.isEmpty)(t.uid)&&Pk.collection("games").where("creator_uid","==",t.uid).get().then((function(e){e.forEach((function(e){console.log(e.id);const t={...e.data(),gameTitle:e.id};console.log("Old game: ",t),c(t)}))})).catch((function(e){console.log("Error getting documents: ",e)}))}),[t]),(0,PT.useEffect)((()=>()=>{m&&m(),f&&f()}),[f,m]),(0,PT.useEffect)((()=>function(){window.clearInterval(h)}),[h]);const b=e=>{y({...w.current,...e})},_=()=>{const{gameTitle:e}=a;Pk.collection("games").doc(e).delete().then((()=>{console.log("Deleted old game"),c(void 0)}))},E=e=>{let t;t="string"===typeof e?Pk.collection("games").doc(e):e;const n=t.collection("actions");return console.log(n),n.onSnapshot((e=>{console.log("got action snapshot"),e.docChanges().forEach((e=>{if("added"===e.type){const t=e.doc.data();console.log(t),k(t),n.doc(e.doc.id).delete()}"removed"===e.type&&console.log("Removed action: ",e.doc.data())}))})),n},T=()=>{const e=(0,Nk.findKey)(a.players,(e=>e.host)),{gameTitle:t}=a;b({gameTitle:t}),(async e=>{i.game=Pk.collection("games").doc(e);const t=window.setInterval((()=>{Kk(i.game,{})}),3e4);d(t);const n=E(i.game);g(n)})(t),b({myName:e,created:!0,...a,lastUpdate:Ge.firestore.FieldValue.serverTimestamp()})},S=e=>{e.preventDefault();const{myName:n,board:r,deck:o,selected:s,players:a,gameOver:c}=v,l=(0,Nk.isEmpty)(u)?"".concat(n,"'s game"):u;b({gameTitle:l}),i.game=Pk.collection("games").doc(l),i.game.set({creator_uid:t.uid,players:a,board:r,deck:o,selected:s,gameOver:c,lastUpdate:Ge.firestore.FieldValue.serverTimestamp()});const h=window.setInterval((()=>{i.game.update({lastUpdate:Ge.firestore.FieldValue.serverTimestamp()})}),3e4);d(h),i.actions=E(l),console.log(i.actions),b({created:!0})},I=e=>{e.preventDefault(),b({myName:t.nickname,players:{[t.nickname]:{host:!0,uid:t.uid,score:0,color:RD.colors[0]}}})},k=e=>{const{type:t,payload:n}=e,{players:r,declarer:i,board:o}=w.current;switch(t){case"join":if(Object.keys(r).includes(n.name))return;const e={...r,[n.name]:{host:!1,uid:n.uid,score:0,color:RD.colors[Object.keys(r).length]}};C({players:e});break;case"found":!i&&N(o,n.selected)&&A(n.selected,n.name);break;default:return}},x=(e,t)=>{if(jk(e)){const e=(e=>{if(!e)return{};const{players:t}=w.current,n=t[e].score+1,r=ON()(t,{[e]:{$merge:{score:n}}}),o=n>=RD.playingTo?e:"";return o&&window.setTimeout((()=>{i.game.delete(),clearInterval(h)}),3e3),{players:r,gameOver:o}})(t),n={...w.current,setFound:!1,declarer:null,...e,...qk(w.current)};C(n)}},C=e=>{console.log("updating",w.current.gameTitle),b(e),Kk(i.game,e)},N=(e,t)=>{for(let n=0;n<t.length;n++)if(!e.includes(t[n]))return!1;return!0},A=(e,t)=>{const n={setFound:jk(e),selected:e,declarer:t};C(n),n.setFound&&setTimeout((()=>{x(e,t)}),2e3)},{board:O,deck:P,selected:D,declarer:R,players:M,created:L,gameStarted:j,myName:F}=v;return n?"Loading...":(0,Nk.isEmpty)(t)?(0,Mx.jsxs)("div",{className:"container mt-4",children:[(0,Mx.jsx)("p",{children:"To host a game, sign in with your Google account."}),(0,Mx.jsx)("p",{children:(0,Mx.jsx)("button",{onClick:Wk,className:"btn btn-info",children:"Sign in"})})]}):a&&!v.created?(0,Mx.jsxs)("div",{className:"container",children:[(0,Mx.jsx)("p",{children:"You are already hosting a game. Return to it?"}),(0,Mx.jsx)("button",{className:"btn btn-primary mr-5",onClick:()=>T(),children:"YES!"}),(0,Mx.jsx)("button",{className:"btn btn-danger",onClick:_,children:"No, remove it"})]}):""===F?(0,Mx.jsxs)("div",{className:"container",children:[(0,Mx.jsx)(MN,{}),(0,Mx.jsx)("h4",{children:"Enter your nickname:"}),(0,Mx.jsx)("form",{onSubmit:I,children:(0,Mx.jsxs)("div",{className:"row mb-4",children:[(0,Mx.jsx)("div",{className:"col-md-3 mb-3 mr-md-4",children:(0,Mx.jsx)("input",{autoFocus:!0,placeholder:"hostname",value:t.nickname,onChange:e=>{var t;r((t=e.target.value,{type:DN,payload:t})),window.localStorage.setItem("nickname",e.target.value)}})}),(0,Mx.jsx)("div",{className:"col-md-3",children:(0,Mx.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})}),(0,Mx.jsx)("div",{children:(0,Mx.jsx)("p",{children:(0,Mx.jsx)(kk,{to:"/",children:"Main Menu"})})})]}):L?j?(0,Mx.jsx)(CN,{board:O,deck:P,selected:D,declarer:R,handleCardClick:e=>{const{myName:t}=v;if(!v.declarer){const n=Uk(e,v.selected);jk(n)&&A(n,t),b({selected:n})}},handleRedeal:()=>{const e=Vk(v);C(e)},players:M,setFound:v.setFound,gameOver:v.gameOver,myName:v.myName,gameMode:"versus"}):(0,Mx.jsx)(NN,{isHost:!0,players:M,setState:C}):(0,Mx.jsxs)("div",{className:"container mt-4",children:[(0,Mx.jsx)("h4",{children:"Name your game:"}),(0,Mx.jsxs)("form",{onSubmit:S,children:[(0,Mx.jsx)("div",{className:"mb-3",children:(0,Mx.jsx)("input",{autoFocus:!0,placeholder:"".concat(F,"'s game"),onChange:e=>{l(e.target.value)},value:u})}),(0,Mx.jsx)("div",{children:(0,Mx.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create"})})]})]})};const LD=function(){const[e,t]=(0,PT.useState)([]),[n,r]=(0,PT.useState)(!1);if((0,PT.useEffect)((()=>{const e=mv(Wm(ND,"games"),(e=>{console.log(e);const n=e.docs.map((e=>({...e.data(),id:e.id,name:e.id})));console.log(n),t(n),r(!0)}));return()=>e()}),[]),!n)return null;const i=e.filter((e=>{const{lastUpdate:t}=e;if(!t)return!1;const n=t.toMillis(),r=(new Date).getTime();return Math.round((r-n)/1e3)<40}));return(0,Mx.jsx)("div",{className:"container",style:{height:"100vh"},children:0===i.length?(0,Mx.jsx)(PT.Fragment,{children:(0,Mx.jsx)("div",{className:"row",children:(0,Mx.jsxs)("div",{className:"col-8 col-md-6",children:[(0,Mx.jsx)("div",{className:"card-panel teal",style:{marginTop:.2*window.innerHeight},children:(0,Mx.jsx)("span",{className:"white-text",children:"There are currently no active games."})}),(0,Mx.jsxs)("p",{children:["Click ",(0,Mx.jsx)(kk,{to:"/host",children:"here"})," to host one"]}),(0,Mx.jsx)("p",{children:(0,Mx.jsx)(kk,{className:"btn btn-primary",to:"/",children:"Back"})})]})})}):(0,Mx.jsxs)(PT.Fragment,{children:[(0,Mx.jsx)("h4",{className:"text-center my-4",children:"Available games"}),(0,Mx.jsx)("div",{className:"row align-content-center",children:i.map((e=>(0,Mx.jsx)("div",{className:"col-6 col-md-4",children:(0,Mx.jsx)("div",{className:"card available-game",children:(0,Mx.jsx)("div",{className:"my-auto text-center",children:(0,Mx.jsx)(kk,{to:"/guest/".concat(e.name),children:e.name})})})},e.name)))}),(0,Mx.jsx)("div",{className:"row",children:(0,Mx.jsx)("div",{className:"col mt-4",children:(0,Mx.jsx)(kk,{className:"btn btn-primary",to:"/",children:"Back"})})})]})})};const jD=function(e){const t=rx((e=>e.user));return(0,PT.useEffect)((()=>{Ge.auth().getRedirectResult().then((function(e){if(e.credential)var t=e.credential.accessToken;var n=e.user;console.log(t,n)})).catch((function(e){e.code,e.message,e.email,e.credential}))}),[]),t?(0,Mx.jsx)("div",{className:"container",children:(0,Mx.jsx)(MN,{})}):(0,Mx.jsx)("div",{className:"container",children:(0,Mx.jsx)("button",{onClick:Wk,className:"btn",children:"Sign in"})})};function FD(e){const{url:t,cardName:n,description:r}=e;return(0,Mx.jsxs)("div",{className:"col-9 col-md-4",children:[(0,Mx.jsx)(kk,{to:t,children:(0,Mx.jsx)("div",{className:"card shadow-sm mb-3 mb-md-4",children:(0,Mx.jsx)(Vx,{desc:n})})}),(0,Mx.jsx)("p",{className:"text-center",children:r})]})}const UD=function(){return(0,Mx.jsxs)("div",{className:"container mt-3 mt-md-5",children:[(0,Mx.jsx)("h1",{className:"d-none d-md-block text-center mb-3 mb-md-5",children:"Main Menu"}),(0,Mx.jsx)("div",{className:"row justify-content-center",children:[{url:"/solo",cardName:"0012",description:"Solo/Local"},{url:"/lobby",cardName:"1121",description:"Join Game"},{url:"/host",cardName:"2200",description:"Host Game"}].map(((e,t)=>(0,Mx.jsx)(FD,{...e},"card-".concat(t))))}),(0,Mx.jsxs)("div",{className:"d-none d-md-block",children:[(0,Mx.jsx)("hr",{}),(0,Mx.jsx)("p",{children:(0,Mx.jsx)(kk,{to:"/rules",children:"Rules"})}),(0,Mx.jsx)("p",{children:(0,Mx.jsx)(kk,{to:"/stats",children:"View Statistics"})})]})]})},VD=e=>{let{children:t,visible:n}=e;return(0,Mx.jsx)(Mx.Fragment,{children:(0,Mx.jsxs)(SN,{show:n,children:[(0,Mx.jsx)(SN.Header,{children:(0,Mx.jsx)(SN.Title,{children:"Submitting action..."})}),(0,Mx.jsx)(SN.Body,{children:t}),(0,Mx.jsx)(SN.Footer,{})]})})};var BD=n(4569),zD=n.n(BD);const qD=4e3,WD=1200,KD=e=>{const t=(e=>Math.round((e-3)/3))(e),n=Lk();return{...Vk({deck:n},{boardSize:e,minimumSets:t}),selected:[]}},HD={players:{you:{score:0,color:DD[0]}},gameStarted:!1,name:"you",setFound:!1,gameOver:!1,startTime:null,elapsedTime:null,setsFound:[],setsOnBoard:null,cardsOnBoard:12,popupVisible:!1,popUpText:"SET!"};class GD extends PT.Component{constructor(e){var t;super(e),t=this,this.handleStartGame=e=>{e.preventDefault();const{cardsOnBoard:t}=this.state,n=KD(t),r=new Date;this.setState({gameStarted:!0,startTime:r,elapsedTime:0,...n,setsOnBoard:Mk(n.board)}),window.timeId=setInterval((()=>{const e=Math.round(((new Date).getTime()-r.getTime())/1e3);this.setState({elapsedTime:e})}),1e3)},this.componentDidMount=()=>{},this.updatePlayerScore=(e,t)=>{const{players:n}=this.state,r=n[e].score+t;return[ON()(n,{[e]:{$merge:{score:r}}}),r]},this.performDeclare=e=>{if(!this.state.declarer){const t={declarer:e,timeDeclared:(new Date).getTime()};this.setState(t),this.undeclareID=setTimeout((()=>{this.expireDeclare()}),qD)}},this.updateSelected=(e,t)=>{const n={setFound:jk(e),selected:e,declarer:t};n.setFound&&(clearTimeout(this.undeclareID),setTimeout((()=>{this.removeSet()}),2e3)),this.setState(n)},this.handleDeclare=()=>{},this.resetLocalSelected=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState((t=>{if(3===t.selected.length&&(e||!jk(t.selected)))return{selected:[]}}))},this.handleCardClick=e=>{const t=Uk(e,this.state.selected);3===t.length&&(jk(t)?(console.log("Set found"),this.setState((e=>{window.setTimeout((()=>{this.setState({popupVisible:!1}),this.resetLocalSelected(!0)}),2e3);const{setsFound:n}=e;if(!n.map((e=>!(0,Nk.isEqual)(t.sort(),e))).every((e=>e)))return{popupVisible:!0,popUpText:"Already found!"};return{setsFound:[...n,t.sort()],popupVisible:!0,popUpText:"SET!"}}))):(console.log("Bad set selected!"),window.setTimeout(this.resetLocalSelected,1200))),this.setState({selected:t})},this.handleRedeal=()=>{},this.removeSet=()=>{const{declarer:e,selected:t}=this.state;if(jk(t)){console.log("Set found, removing");const t={...this.markPointForDeclarer(e),setFound:!1,declarer:null,timeDeclared:null,...qk(this.state)};this.setState(t)}clearInterval(this.cpuTimer),setTimeout((()=>{this.cpuTimer=setInterval(this.cpuTurn,this.state.cpuTurnInterval)}),WD)},this.resetGame=()=>{clearInterval(this.cpuTimer),this.setState({...(0,Nk.cloneDeep)(HD),...KD()})},this.state={...(0,Nk.cloneDeep)(HD)}}render(){const{board:e,deck:t,selected:n,declarer:r,players:i,gameStarted:o,setFound:s,setsFound:a,popupVisible:c}=this.state,{userReducer:u}=this.props,{user:l}=u;return u.loading?"Loading...":o?(0,Mx.jsxs)(PT.Fragment,{children:[(0,Mx.jsx)(VD,{visible:c,children:(0,Mx.jsx)("p",{className:"flow-text center-align",children:this.state.popUpText})}),(0,Mx.jsx)(CN,{board:e,deck:t,selected:n,declarer:r,handleCardClick:this.handleCardClick,handleDeclare:this.handleDeclare,players:i,setFound:this.state.setFound,gameOver:this.state.gameOver,myName:this.state.name,resetGame:this.resetGame,solo:!0,gameMode:"puzzle",setsFound:a,startTime:this.state.startTime,elapsedTime:this.state.elapsedTime})]}):(0,Mx.jsxs)("div",{className:"container",children:[null!==l&&(0,Mx.jsx)(MN,{}),(0,Mx.jsx)("h3",{children:"Puzzle Mode"}),(0,Mx.jsx)("p",{children:"Find as many sets as you can"}),(0,Mx.jsxs)("div",{className:"row",children:[(0,Mx.jsx)("div",{className:"col s8 m4",children:(0,Mx.jsx)("form",{onSubmit:this.handleStartGame,children:(0,Mx.jsx)("input",{type:"submit",value:"Start",className:"btn"})})}),(0,Mx.jsx)("div",{className:"row",children:(0,Mx.jsxs)("div",{style:{marginTop:"48px"},className:"col s12",children:[(0,Mx.jsx)("p",{style:{marginTop:"36px"},children:(0,Mx.jsx)(kk,{to:"/solo",children:"Back to Solo Menu"})}),!l&&(0,Mx.jsxs)(PT.Fragment,{children:[(0,Mx.jsx)("hr",{}),(0,Mx.jsx)("p",{children:"To save your stats, sign in with your Google account."}),(0,Mx.jsx)("p",{children:(0,Mx.jsx)("button",{onClick:Wk,className:"btn",children:"Sign in"})})]})]})})]})]})}}const QD=Cx((e=>({userReducer:e.user})))(GD);function $D(e){let{desc:t}=e;return(0,Mx.jsx)("div",{className:"col-4 my-2",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:t})})})}const JD=function(){return(0,Mx.jsxs)("div",{className:"rules container",children:[(0,Mx.jsx)("h2",{children:"Rules of the Game"}),(0,Mx.jsx)("p",{children:"The object of the same is to find sets of three cards that are either the same or different along each of four dimensions."}),(0,Mx.jsx)("p",{children:"If that makes perfect sense to you, then go ahead and start playing. Otherwise, I will explain a bit more."}),(0,Mx.jsx)("p",{children:"The game starts by laying out a board with twelve cards. Here are some example cards: "}),(0,Mx.jsx)("div",{className:"row",children:["0000","1210","0022","2101","0120","2011"].map(((e,t)=>(0,Mx.jsx)($D,{desc:e},t)))}),(0,Mx.jsx)("p",{children:"You'll notice that every card has four different characteristics:"}),(0,Mx.jsxs)("ul",{className:"browser-default",children:[(0,Mx.jsx)("li",{children:"color"}),(0,Mx.jsx)("li",{children:"number"}),(0,Mx.jsx)("li",{children:"shape"}),(0,Mx.jsx)("li",{children:"fill"})]}),(0,Mx.jsx)("p",{children:"and each of those characteristics has three different possibilities."}),(0,Mx.jsxs)("p",{children:["Three cards form a set if, for each of those four characteristics, the three cards are either ",(0,Mx.jsx)("em",{children:"all the same"})," or ",(0,Mx.jsx)("em",{children:"all different."})]}),(0,Mx.jsx)("p",{children:"It is easier to understand with examples, so here is an example set:"}),(0,Mx.jsxs)("div",{className:"row my-3",children:[(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"0112"})})})," ",(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"1111"})})}),(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"2110"})})})]}),(0,Mx.jsx)("p",{children:"Which you can describe as follows:"}),(0,Mx.jsxs)("ul",{className:"browser-default",children:[(0,Mx.jsx)("li",{children:"color - SAME"}),(0,Mx.jsx)("li",{children:"shape - SAME"}),(0,Mx.jsx)("li",{children:"number - DIFFERENT"}),(0,Mx.jsx)("li",{children:"fill - DIFFERENT"})]}),(0,Mx.jsx)("p",{children:"Therefore, the three cards form a set."}),(0,Mx.jsx)("p",{children:"Here is another set:"}),(0,Mx.jsxs)("div",{className:"row my-3",children:[(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"2022"})})}),(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"1112"})})}),(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"0202"})})})]}),(0,Mx.jsxs)("ul",{className:"browser-default",children:[(0,Mx.jsx)("li",{children:"color - DIFFERENT"}),(0,Mx.jsx)("li",{children:"shape - DIFFERENT"}),(0,Mx.jsx)("li",{children:"number - DIFFERENT"}),(0,Mx.jsx)("li",{children:"fill - SAME"})]}),(0,Mx.jsx)("p",{children:"This is not a set:"}),(0,Mx.jsxs)("div",{className:"row my-3",children:[(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"1220"})})}),(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"1110"})})}),(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"2000"})})})]}),(0,Mx.jsxs)("ul",{className:"browser-default",children:[(0,Mx.jsx)("li",{children:"fill - SAME"}),(0,Mx.jsx)("li",{children:"color - DIFFERENT"}),(0,Mx.jsx)("li",{children:"shape - DIFFERENT"}),(0,Mx.jsx)("li",{children:"number - NOT THE SAME OR DIFFERENT!"})]}),(0,Mx.jsxs)("p",{children:["Even though the cards have the same fill, different colors, and different shapes, the numbers are neither ",(0,Mx.jsx)("em",{children:"all the same"})," nor ",(0,Mx.jsx)("em",{children:"all different"}),", so it's not a set."]}),(0,Mx.jsxs)("p",{children:["It doesn't matter how many of the characteristics are the same, and how many are different, as long as for ",(0,Mx.jsx)("em",{children:"each"})," characteristic, the cards are all the same or all different. Here's one last example:"]}),(0,Mx.jsxs)("div",{className:"row my-3",children:[(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"1122"})})}),(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"0201"})})}),(0,Mx.jsx)("div",{className:"col-4",children:(0,Mx.jsx)("div",{className:"card",children:(0,Mx.jsx)(Vx,{desc:"2010"})})})]}),(0,Mx.jsxs)("ul",{className:"browser-default",children:[(0,Mx.jsx)("li",{children:"color - DIFFERENT"}),(0,Mx.jsx)("li",{children:"shape - DIFFERENT"}),(0,Mx.jsx)("li",{children:"number - DIFFERENT"}),(0,Mx.jsx)("li",{children:"fill - DIFFERENT"})]}),(0,Mx.jsx)("p",{children:"Each characteristic is different for all three cards, so this is a set."}),(0,Mx.jsx)("p",{children:(0,Mx.jsx)(kk,{to:"/",children:"Back Home"})})]})},YD={declareTime:5e3,colors:DD,playingTo:6,cpuDelay:1200},XD=()=>{const e=Lk();return{...Vk({deck:e.slice(12),board:e.slice(0,12)}),selected:[]}},ZD=e=>{const t={};for(let n=0;n<e;n++)t[n]={score:0,color:YD.colors[n]};return t},eR={numPlayers:null,players:ZD(2),gameStarted:!1,name:"1",setFound:!1,declarer:null,timeDeclared:null,gameOver:"",difficulty:2,cpuTurnInterval:1e3,cpuFound:[]};class tR extends PT.Component{constructor(e){super(e),this.handleStartGame=e=>{this.setState({numPlayers:e,players:ZD(e)}),this.setState({gameStarted:!0})},this.updatePlayerScore=(e,t)=>{const{players:n}=this.state,r=n[e].score+t;return[ON()(n,{[e]:{$merge:{score:r}}}),r]},this.expireDeclare=()=>{const{declarer:e,selected:t}=this.state;if(!jk(t)){const[t]=this.updatePlayerScore(e,-.5);this.setState({players:t,declarer:null,timeDeclared:null,selected:[]})}},this.markPointForDeclarer=e=>{const[t,n]=this.updatePlayerScore(e,1),r={players:t,gameOver:n>=YD.playingTo?e:""};this.setState(r)},this.performDeclare=e=>{if(!this.state.declarer){const t={declarer:e,timeDeclared:(new Date).getTime()};this.setState(t),this.undeclareID=setTimeout((()=>{this.expireDeclare()}),YD.declareTime)}},this.updateSelected=(e,t)=>{const n={setFound:jk(e),selected:e,declarer:t};n.setFound&&(clearTimeout(this.undeclareID),setTimeout((()=>{this.removeSet()}),2e3)),this.setState(n)},this.handleCardClick=e=>{const{setFound:t,declarer:n}=this.state;if(!t&&null!==n){const t=Uk(e,this.state.selected);this.setState({selected:t}),jk(t)&&this.updateSelected(t,n)}},this.handlePlayerClick=e=>{const{declarer:t}=this.state;null===t&&this.performDeclare(e)},this.handleRedeal=()=>{const e=Vk(this.state);this.setState(e)},this.removeSet=()=>{const{declarer:e,selected:t}=this.state;if(jk(t)){console.log("Set found, removing");const t={...this.markPointForDeclarer(e),setFound:!1,declarer:null,timeDeclared:null,...qk(this.state)};this.setState(t)}clearInterval(this.cpuTimer),setTimeout((()=>{this.cpuTimer=setInterval(this.cpuTurn,this.state.cpuTurnInterval)}),YD.cpuDelay)},this.resetGame=()=>{clearInterval(this.cpuTimer),this.setState({...(0,Nk.cloneDeep)(eR),...XD()})},this.state={...(0,Nk.cloneDeep)(eR),...XD()}}render(){const{board:e,deck:t,selected:n,declarer:r,players:i,numPlayers:o,setFound:s}=this.state;return o?(0,Mx.jsx)(PT.Fragment,{children:(0,Mx.jsx)(CN,{board:e,deck:t,selected:n,declarer:r,handleCardClick:this.handleCardClick,handlePlayerClick:this.handlePlayerClick,handleDeclare:this.handleDeclare,players:i,setFound:this.state.setFound,gameOver:this.state.gameOver,myName:this.state.name,resetGame:this.resetGame,solo:!0,sharedDevice:!0,gameMode:"shared-device"})}):(0,Mx.jsxs)("div",{className:"container",children:[(0,Mx.jsx)("h4",{className:"mb-4",children:"Choose Number of Players"}),(0,Mx.jsx)("div",{className:"row text-center",children:[...Array(6).keys()].map((e=>(0,Mx.jsx)("div",{onClick:()=>{this.handleStartGame(e+1)},className:"mb-3 col-4",children:(0,Mx.jsx)("button",{className:"btn btn-info",children:e+1})},"players-".concat(e))))}),(0,Mx.jsx)("div",{children:(0,Mx.jsx)("p",{children:(0,Mx.jsx)(kk,{to:"/solo",children:"Back"})})})]})}}const nR=tR;var rR=n(3219),iR=n.n(rR);const oR=4e3,sR=DD,aR=6,cR=1200,uR=e=>{let t=Number(e);Number.isNaN(t)&&(t=1);return 24e3/(5*t)},lR=()=>{const e=Lk();return{...Vk({deck:e.slice(12),board:e.slice(0,12)}),selected:[]}},hR={players:{you:{score:0,color:sR[0]},cpu:{score:0,color:sR[1]}},gameStarted:!1,myName:"you",setFound:!1,declarer:null,gameOver:null,cpuTurnInterval:1e3,startTime:new Date};class dR extends PT.Component{constructor(e){super(e),this.handleStartGame=e=>{e.preventDefault(),this.setState({gameStarted:!0,startTime:new Date}),console.log("Turns every ".concat(this.state.cpuTurnInterval," ms")),setTimeout((()=>{const e=window.setInterval(this.cpuTurn,this.state.cpuTurnInterval);this.setState({cpuTimer:e})}),cR)},this.componentDidMount=()=>{const e=window.localStorage.getItem("soloDifficulty");let t=e?Number(e):2;const n=uR(t);this.setState({difficulty:t,cpuTurnInterval:n})},this.componentWillUnmount=()=>{null!==this.state.cpuTimer&&window.clearInterval(this.state.cpuTimer)},this.cpuTurn=()=>{const{board:e,declarer:t,gameOver:n}=this.state;if(t||n)return;const[r,i]=(0,Nk.shuffle)(e).slice(0,2),o=Fk(r,i);e.includes(o)&&(this.setState({declarer:"cpu",selected:[r],cpuFound:[i,o],setFound:!0}),null!==this.state.cpuTimer&&clearInterval(this.state.cpuTimer),this.setState({cpuAnimation:window.setInterval(this.animateCpuChoice,900)}))},this.animateCpuChoice=()=>{const{selected:e,cpuFound:t}=this.state,n=[...t];if(0===n.length)return;const r=[...e,n.pop()];this.setState({cpuFound:n,selected:r}),3===r.length&&(null!==this.state.cpuAnimation&&clearInterval(this.state.cpuAnimation),this.updateSelected(r,"cpu"))},this.updatePlayerScore=(e,t)=>{const{players:n}=this.state,r=n[e].score+t;return[ON()(n,{[e]:{$merge:{score:r}}}),r]},this.expireDeclare=()=>{const{declarer:e,selected:t}=this.state;if(e&&!jk(t)){const[t]=this.updatePlayerScore(e,-.5);this.setState({players:t,declarer:null,timeDeclared:void 0,selected:[]})}},this.markPointForDeclarer=e=>{const[t,n]=this.updatePlayerScore(e,1),{user:r}=this.props.userReducer,i=n>=aR?e:"",o={players:t,gameOver:i};if(!(0,Nk.isEmpty)(i)){const t=r&&r.uid||"anonymous",i="you"==e?1:0,o=Math.round(((new Date).getTime()-this.state.startTime.getTime())/1e3);zD().post("/api/game",{uid:t,total_time:o,player_won:i,difficulty_level:this.state.difficulty,winning_score:n}).then((()=>{console.log("Game sent")})).catch((e=>{console.log("Error sending game")}))}return this.setState(o),o},this.performDeclare=e=>{if(!this.state.declarer){const t={declarer:e,timeDeclared:(new Date).getTime()};this.setState(t),this.setState({undeclareId:window.setTimeout((()=>{this.expireDeclare()}),oR)})}},this.updateSelected=(e,t)=>{const n={setFound:jk(e),selected:e,declarer:t};n.setFound&&(this.state.undeclareId&&clearTimeout(this.state.undeclareId),setTimeout((()=>{this.removeSet()}),2e3)),this.setState(n)},this.handleCardClick=e=>{const{setFound:t,declarer:n,myName:r}=this.state;if(!t&&"cpu"!==n){const t=Uk(e,this.state.selected);n||this.performDeclare(r),this.setState({selected:t}),jk(t)&&this.updateSelected(t,"you")}},this.handleRedeal=()=>{const e=Vk(this.state);this.setState(e)},this.removeSet=()=>{const{declarer:e,selected:t}=this.state;if(e&&jk(t)){console.log("Set found, removing"),this.markPointForDeclarer(e);const t={setFound:!1,declarer:null,timeDeclared:void 0,...qk(this.state)};this.setState(t)}this.state.cpuTimer&&clearInterval(this.state.cpuTimer),setTimeout((()=>{const e=window.setInterval(this.cpuTurn,this.state.cpuTurnInterval);this.setState({cpuTimer:e})}),cR)},this.resetGame=()=>{this.state.cpuTimer&&window.clearInterval(this.state.cpuTimer),this.setState({...(0,Nk.cloneDeep)(hR),...lR()})},this.state={...(0,Nk.cloneDeep)(hR),...lR(),difficulty:2}}render(){const{board:e,deck:t,selected:n,declarer:r,players:i,gameStarted:o,setFound:s}=this.state,{userReducer:a}=this.props,{user:c}=a;return a.loading?"Loading...":o?(0,Mx.jsx)(PT.Fragment,{children:(0,Mx.jsx)(CN,{board:e,deck:t,selected:n,declarer:r,handleCardClick:this.handleCardClick,handleDeclare:()=>{},handleRedeal:this.handleRedeal,players:i,setFound:this.state.setFound,gameOver:this.state.gameOver,myName:this.state.myName,resetGame:this.resetGame,solo:!0,gameMode:"versus"})}):(0,Mx.jsxs)("div",{className:"container main-content",children:[null!==c&&(0,Mx.jsx)(MN,{}),(0,Mx.jsx)("h3",{className:"text-center mb-4",children:"Solo Play vs. Computer"}),(0,Mx.jsx)("h4",{className:"mb-4",children:"Choose difficulty level:"}),(0,Mx.jsxs)("div",{className:"row",children:[(0,Mx.jsxs)("div",{className:"col-12",children:[(0,Mx.jsxs)("form",{onSubmit:this.handleStartGame,children:[(0,Mx.jsx)("div",{className:"col-10 col-md-6 mb-5",children:(0,Mx.jsx)(iR(),{maxValue:8,minValue:1,value:this.state.difficulty,onChange:e=>{const t=uR(e);window.localStorage.setItem("soloDifficulty",e.toString()),this.setState({cpuTurnInterval:t,difficulty:e})}})}),(0,Mx.jsx)("input",{type:"submit",value:"Start",className:"btn btn-primary"})]}),(0,Mx.jsxs)("p",{style:{marginTop:"24px"},children:["First to ",aR," points is the winner"]})]}),(0,Mx.jsxs)("div",{className:"row mt-4",children:[(0,Mx.jsx)("p",{children:"Other Game Options:"}),(0,Mx.jsxs)("ul",{style:{listStyleType:"none"},children:[(0,Mx.jsx)("li",{className:"mb-4",children:(0,Mx.jsx)(kk,{to:"/local",children:"Local Multiplayer"})}),(0,Mx.jsx)("li",{className:"mb-4",children:(0,Mx.jsx)(kk,{to:"/training",children:"Training"})}),(0,Mx.jsx)("hr",{}),(0,Mx.jsx)("li",{children:(0,Mx.jsx)(kk,{to:"/",children:"Back to Main Menu"})})]})]})]}),!c&&(0,Mx.jsx)("div",{className:"row mt-4",children:(0,Mx.jsxs)("div",{children:[(0,Mx.jsx)("p",{children:"To save your game statistics, sign in with your Google account."}),(0,Mx.jsx)("p",{children:(0,Mx.jsx)("button",{onClick:Wk,className:"btn btn-info",children:"Sign in"})})]})})]})}}const fR=Cx((e=>({userReducer:e.user})))(dR);const pR=function(e){const t=rx((e=>e.user)),{user:n}=t,[r,i]=(0,PT.useState)(null);return Dx(),(0,PT.useEffect)((()=>{t.loading||null===n||(async()=>{zD().get("/api/user/stats/".concat(n.uid)).then((e=>{i(e.data)}))})()}),[t.loading]),t.loading?"Loading...":null===n?(0,Mx.jsxs)("div",{className:"container mt-4",children:[(0,Mx.jsx)("p",{children:"Sign in to view stats"}),(0,Mx.jsx)("p",{children:(0,Mx.jsx)("button",{onClick:Wk,className:"btn btn-info",children:"Sign in"})})]}):(0,Mx.jsxs)("div",{className:"container mt-2 mt-md-4",children:[(0,Mx.jsx)("h3",{children:"Statistics"}),(0,Mx.jsxs)("table",{className:"table table-striped",children:[(0,Mx.jsx)("thead",{children:(0,Mx.jsxs)("tr",{children:[(0,Mx.jsx)("th",{children:"Difficulty"}),(0,Mx.jsx)("th",{children:"Games Played"}),(0,Mx.jsx)("th",{children:"Winning Percentage"})]})}),(0,Mx.jsx)("tbody",{children:r&&r.map(((e,t)=>(0,Mx.jsxs)("tr",{children:[(0,Mx.jsx)("td",{children:e.difficulty_level}),(0,Mx.jsx)("td",{children:e.games_played}),(0,Mx.jsxs)("td",{children:[Math.round(e.games_won/e.games_played*100),"%"]})]},"stats-".concat(t))))})]}),(0,Mx.jsx)("p",{children:(0,Mx.jsx)(kk,{to:"/",children:"Main Menu"})})]})},mR=["as","disabled"];function gR(e){let{tagName:t,disabled:n,href:r,target:i,rel:o,role:s,onClick:a,tabIndex:c=0,type:u}=e;t||(t=null!=r||null!=i||null!=o?"a":"button");const l={tagName:t};if("button"===t)return[{type:u||"button",disabled:n},l];const h=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=s?s:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?o:void 0,onClick:h,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),h(e))}},l]}const vR=PT.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,mR);const[o,{tagName:s}]=gR(Object.assign({tagName:n,disabled:r},i));return(0,Mx.jsx)(s,Object.assign({},i,o,{ref:t}))}));vR.displayName="Button";const yR=PT.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i,size:o,active:s,className:a,...c}=e;const u=nN(r,"btn"),[l,{tagName:h}]=gR({tagName:n,...c}),d=h;return(0,Mx.jsx)(d,{...l,...c,ref:t,className:qx()(a,u,s&&"active",i&&"".concat(u,"-").concat(i),o&&"".concat(u,"-").concat(o),c.href&&c.disabled&&"disabled")})}));yR.displayName="Button",yR.defaultProps={variant:"primary",active:!1,disabled:!1};const wR=yR,bR=e=>{let{show:t,handleClose:n}=e;return(0,Mx.jsx)(Mx.Fragment,{children:(0,Mx.jsxs)(SN,{show:t,children:[(0,Mx.jsx)(SN.Header,{className:"justify-content-center",children:(0,Mx.jsx)(SN.Title,{children:"Training Mode"})}),(0,Mx.jsx)(SN.Body,{children:(0,Mx.jsxs)("div",{className:"d-flex flex-column justify-content-center",children:[(0,Mx.jsx)("p",{className:"my-2",children:"Find the one card that completes a set with the two highlighted cards."}),(0,Mx.jsx)("p",{className:"my-2",children:"Try to keep finding SETs for as long as you can."})]})}),(0,Mx.jsx)(SN.Footer,{children:(0,Mx.jsx)("div",{className:"d-flex justify-content-center",children:(0,Mx.jsx)(wR,{onClick:n,variant:"primary",children:"Let's Go!"})})})]})})},_R=e=>{let{handleClose:t,show:n,finalScore:r}=e;return(0,Mx.jsx)(Mx.Fragment,{children:(0,Mx.jsxs)(SN,{show:n,children:[(0,Mx.jsxs)(SN.Body,{children:[(0,Mx.jsx)("h3",{className:"text-center mt-3",children:"GAME OVER!"}),(0,Mx.jsxs)("div",{className:"d-flex flex-column justify-content-center",children:[(0,Mx.jsxs)("p",{className:"text-center my-2",children:["Final Score: ",r," "]}),(0,Mx.jsxs)("p",{className:"text-center my-2",children:["Best Score: ",localStorage.getItem("highScoreTraining")||0]})]})]}),(0,Mx.jsxs)(SN.Footer,{children:[(0,Mx.jsx)("button",{className:"btn btn-primary",onClick:t,children:(0,Mx.jsx)(kk,{style:{color:"white",textDecoration:"none"},to:"/",children:"Main Menu"})}),(0,Mx.jsx)(wR,{onClick:t,variant:"secondary",children:"Restart"})]})]})})},ER=7e3,TR=1600,SR=()=>{const[e,t]=(0,PT.useState)([]),[n,r]=(0,PT.useState)([]),[i,o]=(0,PT.useState)(0),[s,a]=(0,PT.useState)(null),[c,u]=(0,PT.useState)(0),[l,h]=(0,PT.useState)(null),[d,f]=(0,PT.useState)(ER/1e3);(0,PT.useRef)(null).current=d;const p=(0,PT.useRef)(null);p.current=i;const[m,g]=(0,PT.useState)(!0),[v,y]=(0,PT.useState)(!1),[w,b]=(0,PT.useState)(!1),[_,E]=(0,PT.useState)(!1),T=e=>{const t=Math.round(ER-1100*Math.log2(e+1));return Math.max(t,TR)},S=e=>{let{score:t}=e;h(Date.now()),b(!1)};(0,PT.useEffect)((()=>{a(Date.now()),S({score:0})}),[]);!function(e,t){const n=(0,PT.useRef)();(0,PT.useEffect)((()=>{n.current=e}),[e]),(0,PT.useEffect)((()=>{if(null!==t){let e=setInterval((function(){n.current()}),t);return()=>clearInterval(e)}}),[t])}((()=>{const e=Date.now(),t=Math.round((e-s)/1e3),n=Math.round(e-l),r=T(p.current)-n;u(t),f((r/1e3).toFixed(1)),r<0&&!w&&k()}),w||m?null:200);const I=function(){let{select:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{board:n,deck:i}=zk({boardSize:8,commonTraits:null});t([...n.slice(0,2),"0333",...n.slice(2)]),e&&r(n.slice(0,2))};(0,PT.useEffect)((()=>{I({select:!1})}),[]);const k=()=>{g(!0);const e=Fk(...n);r([...n,e]),Number(localStorage.getItem("highScoreTraining"))<i&&localStorage.setItem("highScoreTraining",i),window.setTimeout((()=>{y(!0)}),2500)},x=()=>{g(!1),y(!1),b(!1),o(0),I(),a(Date.now()),S({score:0})};return(0,Mx.jsxs)(PT.Fragment,{children:[(0,Mx.jsx)("div",{className:"d-flex flex-column justify-content-between",children:(0,Mx.jsx)("div",{children:(0,Mx.jsx)(CN,{board:e,deck:[],selected:n,declarer:null,handleCardClick:e=>{const t=function(){let{precise:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Date.now()-l;return((T(p.current)-t)/1e3).toFixed(1)}();f(t),3===n.length||m||(jk([...n,e])?(b(!0),o(i+1),r([...n,e]),window.setTimeout((()=>{I(),S({score:i+1})}),650)):k())},handleDeclare:()=>{},players:{you:{name:"you",score:i,color:m?"error-red":"light-blue"}},setFound:!1,gameOver:m,myName:"you",resetGame:()=>{},solo:!0,gameMode:"training",elapsedTime:c,timeLeft:d})})}),(0,Mx.jsx)(bR,{show:!_,setShow:E,handleClose:()=>{E(!0),x()}}),(0,Mx.jsx)(_R,{show:_&&m&&v,finalScore:i,handleClose:x})]})};class IR extends PT.Component{render(){return(0,Mx.jsx)(PT.Fragment,{children:(0,Mx.jsx)(bk,{children:(0,Mx.jsxs)(yk,{children:[(0,Mx.jsx)(dk,{exact:!0,path:"/",component:UD}),(0,Mx.jsx)(dk,{path:"/host",component:MD}),(0,Mx.jsx)(dk,{path:"/lobby",component:LD}),(0,Mx.jsx)(dk,{path:"/guest/:gameName",component:PD}),(0,Mx.jsx)(dk,{path:"/solo",component:fR}),(0,Mx.jsx)(dk,{path:"/local",component:nR}),(0,Mx.jsx)(dk,{path:"/rules",component:JD}),(0,Mx.jsx)(dk,{path:"/login",component:jD}),(0,Mx.jsx)(dk,{path:"/stats",component:pR}),(0,Mx.jsx)(dk,{path:"/puzzle",component:QD}),(0,Mx.jsx)(dk,{path:"/training",component:SR})]})})})}}const kR=IR;const xR=function(e){rx((e=>e.user.user));const t=Dx();return(0,PT.useEffect)((()=>{const e=AD.onAuthStateChanged((e=>{console.log("user",e),e?(console.log("user is real"),t(gI(((e,t)=>({displayName:e.displayName,email:e.email,emailVerified:e.emailVerified,photoURL:e.photoURL,isAnonymous:e.isAnonymous,uid:e.uid,providerData:e.providerData,nickname:t}))(e,"William")))):t(gI({}))}));return()=>e()}),[t]),(0,Mx.jsx)(kR,{})},CR=cI({reducer:{user:vI}});Qk.render((0,Mx.jsx)(Nx,{store:CR,children:(0,Mx.jsx)(xR,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.0aeea0f9.js.map