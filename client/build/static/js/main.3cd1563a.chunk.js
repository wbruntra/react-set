(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{53:function(e,t,a){e.exports=a.p+"static/media/sad_trombone.baad2ca9.mp3"},54:function(e,t,a){e.exports=a.p+"static/media/applause.c2030d5b.mp3"},57:function(e,t,a){e.exports=a(95)},62:function(e,t,a){},72:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(29),l=a.n(c),o=(a(62),a(4)),s=a(15),i=a(16),u=a(18),m=a(17),d=a(19),p=a(3),f=a(23),E=a(6),v=a(5),h=a(25),b=a(50),g=a(51),y=a(22),O=a.n(y);function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w=function(e){return{type:"UPDATE_USER",payload:e}},k=function(){return{type:"LOGOUT"}},S=function(e){return{type:"UPDATE_NICKNAME",payload:e}},T={loading:!0,user:null},D={user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER":return N({},e,{},t.payload);case"UPDATE_NICKNAME":var a=O()(e,{user:{nickname:{$set:t.payload}}});return a;case"LOGOUT":return{loading:!1,user:null};default:return e}}},F=Object(h.createStore)(Object(h.combineReducers)(D),Object(g.composeWithDevTools)(Object(h.applyMiddleware)(b.a))),P=a(7),C=a.n(P),I=(a(27),a(33),{apiKey:"AIzaSyCLA_RFXrPvBdN_vrApCUlj28a82ownuzg",authDomain:"fire-set.firebaseapp.com",databaseURL:"https://fire-set.firebaseio.com",projectId:"fire-set",storageBucket:"fire-set.appspot.com",messagingSenderId:"958559518798",appId:"1:958559518798:web:ec451bbfb4ac03f30ec31f",measurementId:"G-FCHHM3FEZE"});P.initializeApp(I);var x=P.firestore();var R=function(){var e=Object(v.c)(),t=Object(f.f)();return r.a.createElement("div",{style:{marginBottom:"16px"}},r.a.createElement("p",{className:"right-align"},r.a.createElement("a",{onClick:function(){C.a.auth().signOut().then((function(){e(k()),console.log("Signed out."),t.push("/")}))}},"Sign Out")))},G=a(8),A=a(13),M=function(e){return Object(A.a)(Array(e).keys())},U=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;t=4===a?M(3).map((function(t){return M(4).map((function(a){return e.includes(4*t+a)?"x":"o"})).join("")})):M(4).map((function(t){return M(3).map((function(a){return e.includes(3*t+a)?"x":"o"})).join("")})),console.log(t.join("\n"))},W=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.debug,n=void 0!==a&&a,r=t.returnWhenFound,c=void 0!==r&&r,l=0,o=[],s=0;s<e.length-2;s++)for(var i=s+1;i<e.length-1;i++)for(var u=i+1;u<e.length;u++)if(o=[e[s],e[i],e[u]],L(o)&&(n&&U([s,i,u]),l++,c))return l;return l},_=function(){var e=[];return M(3).forEach((function(t){M(3).forEach((function(a){M(3).forEach((function(n){M(3).forEach((function(r){var c=""+t+n+a+r;e.push(c)}))}))}))})),e},L=function(e){if(3!==e.length)return!1;for(var t=Object(o.a)(e,3),a=t[0],n=t[1],r=t[2],c=0;c<4;c++){if((Number(a[c])+Number(n[c])+Number(r[c]))%3!==0)return!1}return!0},H=function(e,t){for(var a="",n=0;n<4;n++)e[n]===t[n]?a+=e[n]:a+=(3-(Number(e[n])+Number(t[n]))).toString();return a.trim()},V=function(e,t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat(Object(A.a)(t),[e])},B=function(e){for(var t=e.board,a=e.deck,n=Object(G.shuffle)([].concat(Object(A.a)(t),Object(A.a)(a)));0===W(n.slice(0,12),{returnWhenFound:!0})&&W(n,{returnWhenFound:!0})>0;)n=Object(G.shuffle)(n);return{deck:n.slice(12),board:n.slice(0,12)}},z=function(e){var t=e.board,a=e.deck,n=e.selected,r=a.slice(0,3),c=Object(A.a)(t),l=a.slice(3);for(n.forEach((function(e,t){var a=c.indexOf(e);c[a]=r[t]}));0===W(c);){var o=B({board:c,deck:l});l=o.deck,c=o.board}return{deck:l,board:c,selected:[]}},J=function(){var e=new P.auth.GoogleAuthProvider;P.auth().signInWithPopup(e).then((function(e){var t=e.credential.accessToken,a=e.user;console.log(t,a)})).catch((function(e){e.code,e.message,e.email,e.credential}))},$=function(){var e=new P.auth.GoogleAuthProvider;P.auth().signInWithRedirect(e).then((function(e){var t=e.credential.accessToken,a=e.user;console.log(t,a)})).catch((function(e){e.code,e.message,e.email,e.credential}))},K=(a(72),120),X=200,Y=4,Z=25,q=function(e){var t=e.fill,a=e.color,n=Y;return r.a.createElement("svg",{width:"120",height:"200",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",null,r.a.createElement("rect",{fill:"#fff",id:"canvas_background",height:"202",width:"122",y:"-1",x:"-1"}),r.a.createElement("g",{display:"none",overflow:"visible",y:"0",x:"0",height:"100%",width:"100%",id:"canvasGrid"},r.a.createElement("rect",{fill:"#fff",strokeWidth:"0",y:"0",x:"0",height:"100%",width:"100%"}))),r.a.createElement("g",null,r.a.createElement("path",{stroke:a,transform:" rotate(270,58.8,98) scale(0.8 1) translate(10 0) ",id:"svg_5",d:" m-17.49,66 c50.83,-35.45 101.7,35.45 152.5,0 c30,-10 30,43.8 0,63.8 c-50.8,35.45 -101.6,-35.45 -152.5,0 c-30,15 -30,-45 0,-63.59 z ",fillOpacity:"null",strokeOpacity:"null",strokeWidth:n,fill:t})))},Q=function(e){var t=e.shape,a=e.fill,n=e.color,c=Z,l=X,o=K;return"0"===t?(c+=1,r.a.createElement(q,{fill:a,color:n})):"1"===t?r.a.createElement("g",null,r.a.createElement("ellipse",{stroke:n,ry:(l-2*c)/2,rx:(o-2*c)/2,cy:l/2,cx:o/2,fillOpacity:"null",strokeOpacity:"null",strokeWidth:Y,fill:a})):"2"===t?r.a.createElement("g",null,r.a.createElement("polygon",{points:"".concat(c,",").concat(l/2,"\n          ").concat(o/2,",").concat(c,"\n          ").concat(o-c,",").concat(l/2,"\n          ").concat(o/2,",").concat(l-c),style:{fill:a,stroke:n,strokeWidth:Y}})):void 0},ee=function(e){function t(){var e,a;Object(s.a)(this,t);for(var c=arguments.length,l=new Array(c),i=0;i<c;i++)l[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).colors={0:"#00A91D",1:"#3E009E",2:"#FF0000",white:"#fff"},a.getFill=function(e,t){return"1"===t?"url(#card-".concat(e,"-").concat(t,")"):"2"===t?a.colors[e]:a.colors.white},a.drawShape=function(){var e=a.props.desc.split(""),t=Object(o.a)(e,4),c=t[1],l=t[2],s=t[3];return r.a.createElement(n.Fragment,null,r.a.createElement("g",null,r.a.createElement("title",null,"background"),r.a.createElement("rect",{fill:a.colors.white,id:"canvas_background",y:"-1",x:"-1"}),r.a.createElement("g",{display:"none",overflow:"visible",y:"0",x:"0",height:"100%",width:"100%",id:"canvasGrid"},r.a.createElement("rect",{strokeWidth:"0",y:"0",x:"0",height:"100%",width:"100%"}))),r.a.createElement(Q,{shape:l,fill:a.getFill(c,s),color:a.colors[c]}))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.desc.split(""),a=Object(o.a)(t,4),n=a[0],c=a[1],l=a[3];return r.a.createElement("div",{className:"game-card"},r.a.createElement("svg",{width:"0",height:"0"},r.a.createElement("pattern",{id:"card-".concat(c,"-").concat(l),width:10,height:"10",patternTransform:"rotate(45 0 0)",patternUnits:"userSpaceOnUse"},r.a.createElement("line",{x1:"0",y1:"0",x2:"0",y2:"10",style:{stroke:this.colors[c],strokeWidth:"5"}}))),M(Number(n)+1).map((function(t){return r.a.createElement("svg",{key:t,className:"shape",viewBox:"0 0 ".concat(K," ").concat(X),xmlns:"http://www.w3.org/2000/svg"},e.drawShape())})))}}]),t}(n.Component),te=a(53),ae=a.n(te),ne=a(54),re=a.n(ne);var ce=function(e){var t=e.gameOver,a=e.myName,n=e.solo,c=Object(v.d)((function(e){return e.user})).user;return r.a.createElement("div",{className:"deep-purple lighten-2",style:{height:"100vh"}},function(){var e=t===a?re.a:ae.a;return r.a.createElement("audio",{src:e,autoPlay:!0})}(),r.a.createElement("div",{className:"row center-align"},r.a.createElement("div",{className:"card col s8 offset-s2 m6 offset-m3",style:{marginTop:.2*window.innerHeight}},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"GAME OVER!"),r.a.createElement("p",null,"Winner: ",t," ")),r.a.createElement("div",{className:"card-action"},r.a.createElement("p",null,r.a.createElement(p.b,{to:"/",style:{marginRight:"48px"}},"Main Menu"),n&&null!==c&&r.a.createElement("span",{className:"right-align"},r.a.createElement(p.b,{to:"/stats"},"View Stats")))))))};function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var oe=function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(window.innerHeight),i=Object(o.a)(s,2),u=(i[0],i[1]),m=e.board,d=e.selected,p=e.deck,f=e.declarer,v=e.players,h=e.gameOver,b=e.myName,g=e.setFound,y=e.sharedDevice,O=e.solo;if(Object(n.useEffect)((function(){var e=Object(G.debounce)((function(){u(window.innerHeight)}),150);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(n.useEffect)((function(){l(W(m,{debug:!1}))}),[m]),Object(G.isEmpty)(v)||!Object.keys(v).includes(b))return null;var j=f?v[f].color:v[b].color;if(h)return r.a.createElement(ce,{gameOver:h,myName:b,solo:O});var N=Object(G.map)(v,(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({name:t},e)})),w=Math.ceil(N.length/2),k=N.slice(0,w),S=N.slice(w);return r.a.createElement(n.Fragment,null,y?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"player-buttons-container"},k.map((function(t){return r.a.createElement("div",{className:"shared-player player-name ".concat(t.color," ").concat(t.name==f?"active-player":""),onClick:function(){e.handlePlayerClick(t.name)},key:t.name},r.a.createElement("p",{className:"center-align"},t.name==f?"SET!":t.score))})),r.a.createElement("div",{className:"player-buttons-container bottom"},S.map((function(t){return r.a.createElement("div",{className:"shared-player player-name ".concat(t.color," ").concat(t.name==f?"active-player":""),onClick:function(){e.handlePlayerClick(t.name)},key:t.name},r.a.createElement("p",{className:"center-align"},t.name==f?"SET!":t.score))}))))):r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},f?r.a.createElement(r.a.Fragment,null,"SET! ",f):r.a.createElement(r.a.Fragment,null,"Sets: ",c),r.a.createElement("ul",{className:"right hide-on-med-and-down"},r.a.createElement("li",null,"Cards Left: ",p.length))))),r.a.createElement("div",{className:"container",style:{maxWidth:.95*window.innerHeight}},r.a.createElement("div",{className:"row"},m.map((function(t){return r.a.createElement("div",{key:t,className:"col s4 ".concat(d.includes(t)?j:""),onClick:function(){e.handleCardClick(t)}},r.a.createElement("div",{className:"card ".concat(g&&3===d.length&&!d.includes(t)?"blurry":"")},r.a.createElement(ee,{desc:t})))}))),r.a.createElement("div",{className:"row"},Object(G.map)(v,(function(e,t){if(!y)return r.a.createElement("div",{key:t,className:"col s4 m3"},r.a.createElement("span",{className:"player-name ".concat(e.color)},t,": ",e.score))}))),r.a.createElement("div",{className:"row"},e.handleRedeal&&r.a.createElement("button",{onClick:e.handleRedeal,className:"btn"},"Shuffle"))))},se=[" light-blue lighten-3"," pink lighten-3"," amber accent-2"," purple darken-1"," light-green lighten-1"," orange accent-2"];function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me={turnTime:5e3,colors:se,playingTo:6},de={};var pe=function(e){var t=Object(v.d)((function(e){return e.user})),a=t.user,c=t.loading,l=Object(v.c)(),s=_(),i=ue({},B({deck:s.slice(12),board:s.slice(0,12)}),{selected:[]}),u=Object(n.useState)(ue({players:{},gameTitle:"",created:!1,myName:"",inputName:"",setFound:!1,autoplay:!1,declarer:null,gameOver:!1},i)),m=Object(o.a)(u,2),d=m[0],f=m[1],h=Object(n.useRef)(d);h.current=d;var b=function(e){f(ue({},h.current,{},e))},g=function(e){var t=e.type,a=e.payload,n=h.current,r=n.players,c=n.declarer;switch(t){case"join":if(Object.keys(r).includes(a.name))return;var l=ue({},r,Object(E.a)({},a.name,{score:0,color:me.colors[Object.keys(r).length]}));j({players:l});break;case"found":c||N(a.selected,a.name);break;default:return}},y=function(e,t){if(L(e)){var a=function(e){if(!e)return{};var t=h.current.players,a=t[e].score+1,n=O()(t,Object(E.a)({},e,{$merge:{score:a}})),r=a>=me.playingTo&&e;return r&&window.setTimeout((function(){de.game.delete(),clearInterval(window.activeGameUpdater)}),3e3),{players:n,gameOver:r}}(t),n=ue({},h.current,{setFound:!1,declarer:null,timeDeclared:null},a,{},z(h.current));j(n)}},j=function(e){b(e),de.game.update(e)},N=function(e,t){var a={setFound:L(e),selected:e,declarer:t};j(a),a.setFound&&setTimeout((function(){y(e,t)}),4e3)},w=d.board,k=d.deck,T=d.selected,D=d.declarer,F=d.players,P=d.gameTitle,I=d.created,G=d.myName;return c?"Loading...":a?""===G?r.a.createElement("div",{className:"container"},r.a.createElement(R,null),r.a.createElement("h4",null,"Enter your nickname:"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),b({myName:a.nickname,players:Object(E.a)({},a.nickname,{score:0,color:me.colors[0]})})}},r.a.createElement("input",{autoFocus:!0,placeholder:"hostname",value:a.nickname,onChange:function(e){l(S(e.target.value)),window.localStorage.setItem("nickname",e.target.value)}}),r.a.createElement("button",{type:"submit",className:"btn"},"Submit")),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(p.b,{to:"/"},"Main Menu")))):I?r.a.createElement(oe,{board:w,deck:k,selected:T,declarer:D,handleCardClick:function(e){var t=d.myName;if(!d.declarer){var a=V(e,d.selected);L(a)&&N(a,t),b({selected:a})}},handleRedeal:function(){var e=B(d);j(e)},players:F,setFound:d.setFound,gameOver:d.gameOver,myName:d.myName}):r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,"Name your game:"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=d.myName,a=d.board,n=d.deck,r=d.selected,c=d.gameTitle;""===c&&(c="".concat(t,"'s game")),de.game=x.collection("games").doc(c),de.game.set({board:a,deck:n,selected:r,lastUpdate:C.a.firestore.FieldValue.serverTimestamp()}),window.activeGameUpdater=window.setInterval((function(){de.game.update({lastUpdate:C.a.firestore.FieldValue.serverTimestamp()})}),3e4),de.actions=de.game.collection("actions"),de.actions.get().then((function(e){e.forEach((function(e){console.log(e.id,"=>",e.data())}))})),de.actions.onSnapshot((function(e){e.docChanges().forEach((function(e){if("added"===e.type){var t=e.doc.data();console.log(t),g(t),de.actions.doc(e.doc.id).delete()}"removed"===e.type&&console.log("Removed action: ",e.doc.data())}))})),b({created:!0})}},r.a.createElement("input",{placeholder:"".concat(G,"'s game"),onChange:function(e){b({gameTitle:e.target.value})},value:P}),r.a.createElement("button",{type:"submit",className:"btn"},"Create"))):r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"To host a game, sign in with your Google account."),r.a.createElement("p",null,r.a.createElement("button",{onClick:$,className:"btn"},"Sign in")))},fe=function(e){var t=e.children,a=e.visible;return r.a.createElement("div",{className:"modal popup-message",style:{display:a?"block":"none"}},r.a.createElement("div",{className:"modal-content"},t))};function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he=function(e){var t=this,a=Object(v.d)((function(e){return e.user})),c=a.user,l=Object(v.c)(),s=Object(n.useState)({popupVisible:!1,setFound:!1,displayAnimation:!1,animatedSet:[],declarer:"",deck:[],board:[],selected:[]}),i=Object(o.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(""),f=Object(o.a)(d,2),E=f[0],h=f[1],b=Object(n.useState)({}),g=Object(o.a)(b,2),y=g[0],O=(g[1],function(e){m(ve({},u,{},e))}),j=function(e){y.actions.add(ve({},e,{created:C.a.firestore.FieldValue.serverTimestamp()}))};Object(n.useEffect)((function(){O({popupVisible:!1})}),[u.declarer]),Object(n.useEffect)((function(){var t=e.match.params.gameName;y.game=x.collection("games").doc(t),y.game.onSnapshot((function(e){!function(e){var t=ve({},e.data());Object(G.isEmpty)(t)||(console.log("Updating",t),O(ve({},t,{popupVisible:!1})))}(e)})),y.actions=y.game.collection("actions")}),[]);var N=u.board,w=u.deck,k=u.selected,T=u.declarer,D=u.players,F=u.popupVisible;return a.loading?"Loading...":c?E?r.a.createElement(r.a.Fragment,null,r.a.createElement(fe,{visible:F},r.a.createElement("p",{className:"flow-text center-align"},"SET!"),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"indeterminate",style:{width:"30%"}}))),r.a.createElement(oe,{board:N,deck:w,selected:k,declarer:T,handleCardClick:function(e){if(!u.declarer){var a=V(e,u.selected),n={};if(3===a.length)if(L(a))j({type:"found",payload:{selected:a,name:E}}),n.popupVisible=!0;else console.log("Bad set selected!"),window.setTimeout(t.resetLocalSelected,1e3);O(ve({},n,{selected:a}))}},players:D,setFound:u.setFound,gameOver:u.gameOver,myName:E})):r.a.createElement("div",{className:"container"},r.a.createElement(R,null),r.a.createElement("h4",null,"Choose nickname"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=c.nickname;Object(G.isEmpty)(t)||(h(t),j({type:"join",payload:{name:t}}))}},r.a.createElement("input",{autoFocus:!0,type:"text",placeholder:"your name",value:c.nickname,onChange:function(e){l(S(e.target.value)),window.localStorage.setItem("nickname",e.target.value)}}),r.a.createElement("input",{className:"btn",type:"submit",value:"Join"}))):r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"To join a game, sign in with your Google account."),r.a.createElement("p",null,r.a.createElement("button",{onClick:J,className:"btn"},"Sign in")),r.a.createElement("p",null,r.a.createElement(p.b,{to:"/lobby"},"Back")))};function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ge=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).componentWillUnmount=function(){a.unsubscribe()},a.addGame=function(e){e.preventDefault();var t=a.state.newGame;a.gamesRef.doc(t).set({host:"bill"})};return a.state={name:"",newGame:"baz",init:!1,games:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.gamesRef=x.collection("games"),this.unsubscribe=this.gamesRef.onSnapshot((function(t){var a=[];t.forEach((function(e){a.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({name:e.id},e.data()))})),e.setState({init:!0,games:a})}))}},{key:"render",value:function(){var e=this.state,t=e.games;if(!e.init)return null;var a=t.filter((function(e){var t=e.lastUpdate;if(!t)return!1;var a=t.toMillis(),n=(new Date).getTime();return Math.round((n-a)/1e3)<40}));return r.a.createElement("div",{className:"container",style:{height:"100vh"}},0===a.length?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2 m6 offset-m3"},r.a.createElement("div",{className:"card-panel teal",style:{marginTop:.2*window.innerHeight}},r.a.createElement("span",{className:"white-text"},"There are currently no active games.")),r.a.createElement("p",null,"Click ",r.a.createElement(p.b,{to:"/host"},"here")," to host one"),r.a.createElement("p",null,r.a.createElement(p.b,{to:"/"},"Back"))))):r.a.createElement(n.Fragment,null,r.a.createElement("h4",{className:"center-align"},"Available games"),r.a.createElement("div",{className:"row center-align"},a.map((function(e,t){return r.a.createElement("div",{className:"col s6 m4",key:e.name},r.a.createElement(p.b,{to:"/guest/".concat(e.name)},r.a.createElement("div",{className:"card-panel"},e.name)))})),r.a.createElement("p",null,r.a.createElement(p.b,{to:"/"},"Back")))))}}]),t}(n.Component),ye=a(55),Oe=a.n(ye),je=a(26),Ne=a.n(je);function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?we(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Se=!1,Te={turnTime:4e3,colors:se,playingTo:6,cpuDelay:1200},De=function(e){var t=Number(e);return Number.isNaN(t)&&(t=1),24e3/(5*t)},Fe=function(){var e=_();return ke({},B({deck:e.slice(12),board:e.slice(0,12)}),{selected:[]})},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new Date,a=t.getTime()%Math.pow(10,6)/1e3;console.log(e,a.toFixed(1))},Ce={players:{you:{score:0,color:Te.colors[0]},cpu:{score:0,color:Te.colors[1]}},gameStarted:!1,name:"you",setFound:!1,declarer:null,timeDeclared:null,gameOver:!1,cpuTurnInterval:1e3,cpuFound:[],startTime:null},Ie=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleStartGame=function(e){e.preventDefault(),a.setState({gameStarted:!0,startTime:new Date}),console.log("Turns every ".concat(a.state.cpuTurnInterval," ms")),setTimeout((function(){a.cpuTimer=setInterval(a.cpuTurn,a.state.cpuTurnInterval)}),Te.cpuDelay)},a.componentDidMount=function(){var e=window.localStorage.getItem("soloDifficulty")||"2",t=De(e);a.setState({difficulty:e,cpuTurnInterval:t})},a.componentWillUnmount=function(){clearInterval(a.cpuTimer)},a.cpuTurn=function(){var e=a.state,t=e.board,n=e.declarer,r=e.gameOver;if(!n&&!r){Se&&Pe("Guess");var c=Object(G.shuffle)(t).slice(0,2),l=Object(o.a)(c,2),s=l[0],i=l[1],u=H(s,i);t.includes(u)&&(a.setState({declarer:"cpu",selected:[s],cpuFound:[i,u],setFound:!0}),clearInterval(a.cpuTimer),a.cpuAnimation=setInterval(a.animateCpuChoice,900))}},a.animateCpuChoice=function(){var e=a.state,t=e.selected,n=e.cpuFound,r=Object(A.a)(n),c=[].concat(Object(A.a)(t),[r.pop()]);a.setState({cpuFound:r,selected:c}),3===c.length&&(clearInterval(a.cpuAnimation),a.updateSelected(c,"cpu"))},a.updatePlayerScore=function(e,t){var n=a.state.players,r=n[e].score+t;return[O()(n,Object(E.a)({},e,{$merge:{score:r}})),r]},a.expireDeclare=function(){var e=a.state,t=e.declarer,n=e.selected;if(!L(n)){var r=a.updatePlayerScore(t,-.5),c=Object(o.a)(r,1)[0];a.setState({players:c,declarer:null,timeDeclared:null,selected:[]})}},a.markPointForDeclarer=function(e){var t=a.updatePlayerScore(e,1),n=Object(o.a)(t,2),r=n[0],c=n[1],l=a.props.userReducer.user,s=c>=Te.playingTo&&e,i={players:r,gameOver:s};if(s){var u=l&&l.uid||"anonymous",m="you"==e?1:0,d=Math.round(((new Date).getTime()-a.state.startTime.getTime())/1e3);Ne.a.post("/api/game",{uid:u,total_time:d,player_won:m,difficulty_level:a.state.difficulty,winning_score:c}).then((function(){console.log("Game sent")})).catch((function(e){console.log("Error sending game")}))}a.setState(i)},a.performDeclare=function(e){if(!a.state.declarer){var t={declarer:e,timeDeclared:(new Date).getTime()};a.setState(t),a.undeclareID=setTimeout((function(){a.expireDeclare()}),Te.turnTime)}},a.updateSelected=function(e,t){var n={setFound:L(e),selected:e,declarer:t};n.setFound&&(clearTimeout(a.undeclareID),setTimeout((function(){a.removeSet()}),2e3)),a.setState(n)},a.handleCardClick=function(e){var t=a.state,n=t.setFound,r=t.declarer,c=t.name;if(!n&&"cpu"!==r){var l=V(e,a.state.selected);r||a.performDeclare(c),a.setState({selected:l}),L(l)&&a.updateSelected(l,"you")}},a.handleRedeal=function(){var e=B(a.state);a.setState(e)},a.removeSet=function(){var e=a.state,t=e.declarer,n=e.selected;if(L(n)){console.log("Set found, removing");var r=ke({},a.markPointForDeclarer(t),{setFound:!1,declarer:null,timeDeclared:null},z(a.state));a.setState(r)}clearInterval(a.cpuTimer),setTimeout((function(){a.cpuTimer=setInterval(a.cpuTurn,a.state.cpuTurnInterval)}),Te.cpuDelay)},a.resetGame=function(){clearInterval(a.cpuTimer),a.setState(ke({},Object(G.cloneDeep)(Ce),{},Fe()))},a.state=ke({},Object(G.cloneDeep)(Ce),{},Fe()),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.board,c=t.deck,l=t.selected,o=t.declarer,s=t.players,i=t.gameStarted,u=(t.setFound,this.props.userReducer),m=u.user;return u.loading?"Loading...":i?r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{board:a,deck:c,selected:l,declarer:o,handleCardClick:this.handleCardClick,handleDeclare:this.handleDeclare,handleRedeal:this.handleRedeal,players:s,setFound:this.state.setFound,gameOver:this.state.gameOver,myName:this.state.name,resetGame:this.resetGame,solo:!0})):r.a.createElement("div",{className:"container"},null!==m&&r.a.createElement(R,null),r.a.createElement("h3",null,"Solo Play vs. Computer"),r.a.createElement("h4",{className:"orange-text text-darken-4"},"Choose difficulty level:"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 m4"},r.a.createElement("form",{onSubmit:this.handleStartGame},r.a.createElement(Oe.a,{ref:function(t){e.difficultyInput=t},min:1,max:5,orientation:"horizontal",tooltip:!0,value:Number(this.state.difficulty),onChange:function(t){var a=De(t);window.localStorage.setItem("soloDifficulty",t),e.setState({cpuTurnInterval:a,difficulty:t})}}),r.a.createElement("input",{type:"submit",value:"Start",className:"btn"})),r.a.createElement("p",{style:{marginTop:"24px"}},"First to ",Te.playingTo," points is the winner")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{style:{marginTop:"48px"},className:"col s12"},r.a.createElement("p",null,r.a.createElement(p.b,{to:"/local"},"Local Multiplayer")),r.a.createElement("p",{style:{marginTop:"36px"}},r.a.createElement(p.b,{to:"/"},"Back to Main Menu")),!m&&r.a.createElement(n.Fragment,null,r.a.createElement("hr",null),r.a.createElement("p",null,"To save your stats, sign in with your Google account."),r.a.createElement("p",null,r.a.createElement("button",{onClick:$,className:"btn"},"Sign in")))))))}}]),t}(n.Component),xe=Object(v.b)((function(e){return{userReducer:e.user}}))(Ie);var Re=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h2",{className:"center-align"},"Main Menu")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2 m3 offset-m1"},r.a.createElement(p.b,{to:"/solo"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"0012"}))),r.a.createElement("p",{className:"center-align"},"Solo/Local")),r.a.createElement("div",{className:"col s8 offset-s2 m3"},r.a.createElement(p.b,{to:"/lobby"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"1121"}))),r.a.createElement("p",{className:"center-align"},"Join Game")),r.a.createElement("div",{className:"col s8 offset-s2 m3"},r.a.createElement(p.b,{to:"/host"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"2200"}))),r.a.createElement("p",{className:"center-align"},"Host Game"))))};var Ge=function(){return r.a.createElement("div",{className:"rules container"},r.a.createElement("h2",null,"Rules of the Game"),r.a.createElement("p",null,"The object of the same is to find a sets of three cards that are either the same or different along each of four dimensions."),r.a.createElement("p",null,"If that makes perfect sense to you, then go ahead and start playing. Otherwise, I will explain a bit more."),r.a.createElement("p",null,"The game starts by laying out a board with twelve cards. Here are some example cards: "),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"0000"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"1210"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"0022"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"2101"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"0120"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"2011"})))),r.a.createElement("p",null,"You'll notice that every card has four different characteristics:",r.a.createElement("ul",{className:"browser-default"},r.a.createElement("li",null,"color"),r.a.createElement("li",null,"number"),r.a.createElement("li",null,"shape"),r.a.createElement("li",null,"fill")),"and each of those characteristics has three different possibilities."),r.a.createElement("p",null,"Three cards form a set if, for each of those four characteristics, the three cards are either ",r.a.createElement("em",null,"all the same")," or ",r.a.createElement("em",null,"all different.")),r.a.createElement("p",null,"It is easier to understand with examples, so here is an example set:"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"0112"})))," ",r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"1111"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"2110"})))),r.a.createElement("p",null,"Which you can describe as follows:",r.a.createElement("ul",{className:"browser-default"},r.a.createElement("li",null,"color - SAME"),r.a.createElement("li",null,"shape - SAME"),r.a.createElement("li",null,"number - DIFFERENT"),r.a.createElement("li",null,"fill - DIFFERENT")),"Therefore, the three cards form a set."),r.a.createElement("p",null,"Here is another set:"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"2022"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"1112"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"0202"})))),r.a.createElement("p",null,r.a.createElement("ul",{className:"browser-default"},r.a.createElement("li",null,"color - DIFFERENT"),r.a.createElement("li",null,"shape - DIFFERENT"),r.a.createElement("li",null,"number - DIFFERENT"),r.a.createElement("li",null,"fill - SAME"))),r.a.createElement("p",null,"This is not a set:"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"1220"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"1110"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"2000"})))),r.a.createElement("p",null,r.a.createElement("ul",{className:"browser-default"},r.a.createElement("li",null,"fill - SAME"),r.a.createElement("li",null,"color - DIFFERENT"),r.a.createElement("li",null,"shape - DIFFERENT"),r.a.createElement("li",null,"number - NOT THE SAME OR DIFFERENT!")),"Even though the cards have the same fill, different colors, and different shapes, the numbers are neither ",r.a.createElement("em",null,"all the same")," nor ",r.a.createElement("em",null,"all different"),", so it's not a set."),r.a.createElement("p",null,"It doesn't matter how many of the characteristics are the same, and how many are different, as long as for ",r.a.createElement("em",null,"each")," characteristic, the cards are all the same or all different. Here's one last example:"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"1122"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"0201"}))),r.a.createElement("div",{className:"col s4"},r.a.createElement("div",{className:"card"},r.a.createElement(ee,{desc:"2010"})))),r.a.createElement("p",null,r.a.createElement("ul",{className:"browser-default"},r.a.createElement("li",null,"color - DIFFERENT"),r.a.createElement("li",null,"shape - DIFFERENT"),r.a.createElement("li",null,"number - DIFFERENT"),r.a.createElement("li",null,"fill - DIFFERENT")),"Each characteristic is different for all three cards, so this is a set."))};var Ae=function(e){var t=Object(v.d)((function(e){return e.user}));return Object(n.useEffect)((function(){P.auth().getRedirectResult().then((function(e){if(e.credential)var t=e.credential.accessToken;var a=e.user;console.log(t,a)})).catch((function(e){e.code,e.message,e.email,e.credential}))}),[]),t?r.a.createElement("div",{className:"container"},r.a.createElement(R,null)):r.a.createElement("div",{className:"container"},r.a.createElement("button",{onClick:$,className:"btn"},"Sign in"))};function Me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Me(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Me(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var We={declareTime:5e3,colors:se,playingTo:6,cpuDelay:1200},_e=function(){var e=_();return Ue({},B({deck:e.slice(12),board:e.slice(0,12)}),{selected:[]})},Le=function(e){for(var t={},a=0;a<e;a++)t[a]={score:0,color:We.colors[a]};return t},He={numPlayers:null,players:Le(2),gameStarted:!1,name:"1",setFound:!1,declarer:null,timeDeclared:null,gameOver:!1,difficulty:2,cpuTurnInterval:1e3,cpuFound:[]},Ve=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleStartGame=function(e){a.setState({numPlayers:e,players:Le(e)}),a.setState({gameStarted:!0})},a.updatePlayerScore=function(e,t){var n=a.state.players,r=n[e].score+t;return[O()(n,Object(E.a)({},e,{$merge:{score:r}})),r]},a.expireDeclare=function(){var e=a.state,t=e.declarer,n=e.selected;if(!L(n)){var r=a.updatePlayerScore(t,-.5),c=Object(o.a)(r,1)[0];a.setState({players:c,declarer:null,timeDeclared:null,selected:[]})}},a.markPointForDeclarer=function(e){var t=a.updatePlayerScore(e,1),n=Object(o.a)(t,2),r={players:n[0],gameOver:n[1]>=We.playingTo&&e};a.setState(r)},a.performDeclare=function(e){if(!a.state.declarer){var t={declarer:e,timeDeclared:(new Date).getTime()};a.setState(t),a.undeclareID=setTimeout((function(){a.expireDeclare()}),We.declareTime)}},a.updateSelected=function(e,t){var n={setFound:L(e),selected:e,declarer:t};n.setFound&&(clearTimeout(a.undeclareID),setTimeout((function(){a.removeSet()}),2e3)),a.setState(n)},a.handleCardClick=function(e){var t=a.state,n=t.setFound,r=t.declarer;if(!n&&null!==r){var c=V(e,a.state.selected);a.setState({selected:c}),L(c)&&a.updateSelected(c,r)}},a.handlePlayerClick=function(e){null===a.state.declarer&&a.performDeclare(e)},a.handleRedeal=function(){var e=B(a.state);a.setState(e)},a.removeSet=function(){var e=a.state,t=e.declarer,n=e.selected;if(L(n)){console.log("Set found, removing");var r=Ue({},a.markPointForDeclarer(t),{setFound:!1,declarer:null,timeDeclared:null},z(a.state));a.setState(r)}clearInterval(a.cpuTimer),setTimeout((function(){a.cpuTimer=setInterval(a.cpuTurn,a.state.cpuTurnInterval)}),We.cpuDelay)},a.resetGame=function(){clearInterval(a.cpuTimer),a.setState(Ue({},Object(G.cloneDeep)(He),{},_e()))},a.state=Ue({},Object(G.cloneDeep)(He),{},_e()),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.board,n=t.deck,c=t.selected,l=t.declarer,o=t.players,s=t.numPlayers;t.setFound;return s?r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{board:a,deck:n,selected:c,declarer:l,handleCardClick:this.handleCardClick,handlePlayerClick:this.handlePlayerClick,handleDeclare:this.handleDeclare,players:o,setFound:this.state.setFound,gameOver:this.state.gameOver,myName:this.state.name,resetGame:this.resetGame,solo:!0,sharedDevice:!0})):r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,"Choose Number of Players"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},Object(A.a)(Array(6).keys()).map((function(t){return r.a.createElement("div",{key:"players-".concat(t),className:"col s4 player-number"},r.a.createElement("div",{onClick:function(){e.handleStartGame(t+1)},className:"btn-large"},t+1))}))),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(p.b,{to:"/solo"},"Back")))))}}]),t}(n.Component),Be=a(37),ze=a.n(Be),Je=a(56);var $e=function(e){var t=Object(v.d)((function(e){return e.user})),a=t.user,c=Object(n.useState)(null),l=Object(o.a)(c,2),s=l[0],i=l[1];return Object(v.c)(),Object(n.useEffect)((function(){var e=function(){var e=Object(Je.a)(ze.a.mark((function e(){return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ne.a.get("/api/user/stats/".concat(a.uid)).then((function(e){i(e.data)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.loading||null===a||e()}),[t.loading]),t.loading?"Loading...":(console.log(s),null===a?r.a.createElement("div",null,"Sign in to view stats"):r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Statistics"),r.a.createElement("table",{className:"striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Difficulty"),r.a.createElement("th",null,"Games Played"),r.a.createElement("th",null,"Winning Percentage"))),r.a.createElement("tbody",null,s&&s.map((function(e,t){return r.a.createElement("tr",{key:"stats-".concat(t)},r.a.createElement("td",null,e.difficulty_level),r.a.createElement("td",null,e.games_played),r.a.createElement("td",null,Math.round(e.games_won/e.games_played*100),"%"))})))),r.a.createElement("p",null,r.a.createElement(p.b,{to:"/"},"Main Menu"))))},Ke=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(p.a,null,r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:Re}),r.a.createElement(f.a,{path:"/host",component:pe}),r.a.createElement(f.a,{path:"/lobby",component:ge}),r.a.createElement(f.a,{path:"/guest/:gameName",component:he}),r.a.createElement(f.a,{path:"/solo",component:xe}),r.a.createElement(f.a,{path:"/local",component:Ve}),r.a.createElement(f.a,{path:"/rules",component:Ge}),r.a.createElement(f.a,{path:"/login",component:Ae}),r.a.createElement(f.a,{path:"/stats",component:$e}))))}}]),t}(n.Component);var Xe=function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),c=(a[0],a[1],Object(v.c)());return Object(n.useEffect)((function(){C.a.auth().onAuthStateChanged((function(e){if(e){var t=window.localStorage.getItem("nickname")||e.displayName.split(" ")[0],a={displayName:e.displayName,email:e.email,emailVerified:e.emailVerified,photoURL:e.photoURL,isAnonymous:e.isAnonymous,uid:e.uid,providerData:e.providerData,nickname:t};c(w({loading:!1,user:a})),Ne.a.get("/api/user/".concat(e.uid)).then((function(e){console.log("User is registered")})).catch((function(t){t.response&&404===t.response.status?(console.log("User not registered"),Ne.a.post("/api/user",{uid:e.uid,info:a}).then((function(){console.log("User registered successfully")})).catch((function(e){console.log("Error registering user",e)}))):console.log("An error occurred trying to GET user info")}))}else console.log("Not signed in"),c(w({loading:!1,user:null}))}))}),[]),r.a.createElement(Ke,null)};l.a.render(r.a.createElement(v.a,{store:F},r.a.createElement(Xe,null)),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.3cd1563a.chunk.js.map