{"version":3,"sources":["assets/sad_trombone.mp3","assets/applause.mp3","redux-helpers.ts","firebaseConfig.js","firestore.js","components/Signout.js","utils/helpers.tsx","components/Card.js","components/GameOver.js","config.js","components/TopBar.js","components/Board.js","components/PlayerList.js","components/Host.tsx","components/Modal.js","components/Guest.js","components/Lobby.js","components/Solo.tsx","components/Main.js","components/Rules.js","components/Login.js","components/SharedDevice.js","components/Stats.js","components/Puzzle.js","components/Routes.js","components/App.js","index.js"],"names":["module","exports","updateUser","user","type","payload","logOut","updateNickname","nickname","defaultUser","loading","reducers","state","action","newState","update","$set","store","createStore","combineReducers","composeWithDevTools","applyMiddleware","reduxThunk","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","firestore","Signout","dispatch","useDispatch","history","useHistory","style","cursor","marginBottom","className","onClick","auth","signOut","then","console","log","push","range","n","Array","keys","displaySet","tuple","matrix","rowSize","map","i","j","includes","join","countSets","board","debug","returnWhenFound","count","candidate","a","length","b","c","isSet","makeDeck","deck","forEach","s","f","card","selected","Number","nameThird","result","toString","trim","cardToggle","filter","reshuffle","boardSize","minimumSets","newDeck","shuffle","slice","removeSelected","newCards","newBoard","index","indexOf","handleGoogleRedirect","provider","GoogleAuthProvider","signInWithRedirect","updateGame","id","data","collection","doc","lastUpdate","FieldValue","serverTimestamp","config","Squiggle","fill","color","strokeWidth","width","height","xmlns","y","x","display","overflow","stroke","transform","d","fillOpacity","strokeOpacity","Shape","shape","padding","ry","rx","cy","cx","points","Card","colors","0","1","2","white","getFill","drawShape","props","desc","split","this","number","patternTransform","patternUnits","x1","y1","x2","y2","key","viewBox","Component","GameOver","gameOver","myName","solo","useSelector","soundEffect","applause","sadTrombone","src","autoPlay","finalSound","marginTop","window","innerHeight","to","marginRight","formatTime","seconds","mm","Math","floor","ss","pad","TopBar","gameMode","declarer","setsFound","elapsedTime","startTime","sets","justifyContent","Board","useState","setSets","setWindowHeight","players","setFound","sharedDevice","useEffect","resize","debounce","addEventListener","removeEventListener","process","isEmpty","Object","borderColor","get","getBorderColor","playersArray","info","name","topBoxes","ceil","topPlayers","bottomPlayers","handlePlayerClick","score","maxWidth","handleCardClick","handleRedeal","PlayerList","isHost","setState","findKey","player","host","started","turnTime","playingTo","Host","userReducer","userLoading","initialDeck","useRef","current","initialGameState","gameInProgress","setGameInProgress","gameTitle","setGameTitle","activeGameUpdater","setActiveGameUpdater","gameSubscription","actionsSubscription","setActionSubscription","created","setFullState","currentState","uid","where","querySnapshot","oldGame","catch","error","clearInterval","actionsSubscribe","actions","onSnapshot","snapshot","docChanges","change","processAction","delete","reloadGame","game","gameUpdateId","setInterval","unsubscribe","subscribeToGame","newPlayers","setAndSendState","verifySelectedOnBoard","updateSelected","removeSet","newScores","newScore","$merge","setTimeout","markPointForDeclarer","newSelected","undefined","onSubmit","e","preventDefault","autoFocus","placeholder","value","onChange","target","localStorage","setItem","officialTitle","set","creator_uid","updateId","Modal","children","popupVisible","visible","Guest","displayAnimation","animatedSet","pending","setMyName","firebaseRefs","sendAction","add","docRef","docId","gameName","match","params","unsubGames","updatedState","processUpdate","unsubActions","Fragment","resetLocalSelected","nameInput","Lobby","componentWillUnmount","newGame","init","games","gamesRef","newGames","activeGames","g","updated","toMillis","now","Date","getTime","round","debugging","cpuDelay","calculateIntervalFromDifficulty","diff","isNaN","createGameState","logTime","msg","toFixed","initialState","you","cpu","gameStarted","cpuTurnInterval","Solo","handleStartGame","cpuTimer","cpuTurn","componentDidMount","savedDifficulty","getItem","difficulty","cpuFound","cpuAnimation","animateCpuChoice","cpuCopy","pop","updatePlayerScore","delta","expireDeclare","timeDeclared","player_won","total_time","axios","post","difficulty_level","winning_score","err","performDeclare","undeclareId","clearTimeout","removeSelectedCards","resetGame","cloneDeep","handleDeclare","min","max","orientation","tooltip","connect","Main","Rules","Login","getRedirectResult","credential","token","accessToken","code","message","email","declareTime","createPlayers","num","numPlayers","SharedDevice","undeclareID","clickerName","Stats","stats","setStats","getStats","response","row","games_played","games_won","cardsOnBoard","minSets","getMinSets","setsOnBoard","popUpText","Puzzle","gameState","timeId","noCheck","isEqual","sort","every","ref","input","difficultyInput","format","v","cards","Routes","exact","path","component","App","onAuthStateChanged","displayName","myUser","emailVerified","photoURL","isAnonymous","providerData","status","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0e58c71a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/sad_trombone.baad2ca9.mp3\";","module.exports = __webpack_public_path__ + \"static/media/applause.c2030d5b.mp3\";","import { combineReducers, createStore, applyMiddleware } from 'redux'\nimport reduxThunk from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport update from 'immutability-helper'\nimport { Action as ReduxAction, Reducer } from 'redux'\n\ninterface UserInfo {\n  nickname?: string\n}\n\nexport interface User {\n  loading: boolean\n  user: UserInfo\n}\n\ninterface Action extends ReduxAction {\n  payload: any\n}\n\nexport const UPDATE_USER = 'UPDATE_USER'\nexport const UPDATE_NICKNAME = 'UPDATE_NICKNAME'\n\nexport const updateUser = (user: UserInfo) => ({\n  type: UPDATE_USER,\n  payload: user,\n})\n\nexport const logOut = () => ({\n  type: 'LOGOUT',\n})\n\nexport const updateNickname = (nickname: string) => ({\n  type: UPDATE_NICKNAME,\n  payload: nickname,\n})\n\nexport const defaultUser: User = { loading: true, user: {} }\n\nconst userReducer = (state = defaultUser, action: Action) => {\n  switch (action.type) {\n    case UPDATE_USER:\n      return {\n        ...state,\n        ...action.payload,\n      }\n    case UPDATE_NICKNAME:\n      const newState = update(state, {\n        user: { nickname: { $set: action.payload } },\n      })\n      return newState\n    case 'LOGOUT':\n      return { loading: false, user: null }\n    default:\n      return state\n  }\n}\n\nconst reducers = {\n  user: userReducer,\n}\n\nconst store = createStore(\n  combineReducers(reducers),\n  composeWithDevTools(applyMiddleware(reduxThunk)),\n)\n\nexport default store\n","const firebaseConfig = {\n  apiKey: 'AIzaSyCLA_RFXrPvBdN_vrApCUlj28a82ownuzg',\n  authDomain: 'fire-set.firebaseapp.com',\n  databaseURL: 'https://fire-set.firebaseio.com',\n  projectId: 'fire-set',\n  storageBucket: 'fire-set.appspot.com',\n  messagingSenderId: '958559518798',\n  appId: '1:958559518798:web:ec451bbfb4ac03f30ec31f',\n  measurementId: 'G-FCHHM3FEZE',\n}\n\nexport default firebaseConfig\n","import * as firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport firebaseConfig from './firebaseConfig'\nimport 'firebase/auth'\n\nfirebase.initializeApp(firebaseConfig)\n// firebase.analytics()\n\nconst firestore = firebase.firestore()\n\nexport default firestore\n","import React, { useState, useEffect } from 'react'\nimport Routes from './Routes'\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n  useHistory,\n  useLocation,\n} from 'react-router-dom'\nimport firebase from 'firebase/app'\nimport 'firebase/auth'\nimport { logOut } from '../redux-helpers'\nimport { useDispatch } from 'react-redux'\n\nfunction Signout() {\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const signOut = () => {\n    firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        dispatch(logOut())\n        console.log('Signed out.')\n        history.push('/')\n      })\n  }\n\n  return (\n    <div style={{ cursor: 'pointer', marginBottom: '16px' }}>\n      <p className=\"right-align\">\n        <a onClick={signOut}>Sign Out</a>\n      </p>\n    </div>\n  )\n}\n\nexport default Signout\n","import { shuffle, find, isNil } from 'lodash'\nimport * as firebase from 'firebase/app'\nimport { GameState, Player } from './models'\n\nimport 'firebase/auth'\nimport 'firebase/firestore'\nimport firestore from '../firestore'\n\nexport const range = (n: number) => {\n  return [...Array(n).keys()]\n}\n\nconst displaySet = (tuple: Array<number>, rowSize: number = 3) => {\n  let matrix\n  if (rowSize === 4) {\n    matrix = range(3).map((i) => {\n      const row = range(4).map((j) => {\n        if (tuple.includes(4 * i + j)) {\n          return 'x'\n        }\n        return 'o'\n      })\n      return row.join('')\n    })\n  } else {\n    matrix = range(4).map((i) => {\n      const row = range(3).map((j) => {\n        if (tuple.includes(3 * i + j)) {\n          return 'x'\n        }\n        return 'o'\n      })\n      return row.join('')\n    })\n  }\n  console.log(matrix.join('\\n'))\n}\n\nexport const serializeGame = (state: {\n  board: Array<string>\n  deck: Array<string>\n  selected: Array<string>\n}) => {\n  const status = JSON.stringify({\n    board: state.board,\n    deck: state.deck,\n    selected: state.selected,\n  })\n  return status\n}\n\nexport const countSets = (board: string[], { debug = false, returnWhenFound = false } = {}) => {\n  let count = 0\n  let candidate = []\n  for (let a = 0; a < board.length - 2; a++) {\n    for (let b = a + 1; b < board.length - 1; b++) {\n      for (let c = b + 1; c < board.length; c++) {\n        candidate = [board[a], board[b], board[c]]\n        if (isSet(candidate)) {\n          if (debug) {\n            displaySet([a, b, c])\n          }\n          count++\n          if (returnWhenFound) {\n            return count\n          }\n        }\n      }\n    }\n  }\n  return count\n}\n\nexport const makeDeck = (): string[] => {\n  let deck: string[] = []\n  range(3).forEach((c) => {\n    range(3).forEach((n) => {\n      range(3).forEach((s) => {\n        range(3).forEach((f) => {\n          const card = '' + c + s + n + f\n          deck.push(card)\n        })\n      })\n    })\n  })\n  return deck\n}\n\nexport const isSet = (selected: Array<string>) => {\n  if (selected.length !== 3) {\n    return false\n  }\n  const [a, b, c] = selected\n  for (let i = 0; i < 4; i++) {\n    const sum = Number(a[i]) + Number(b[i]) + Number(c[i])\n    if (sum % 3 !== 0) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const nameThird = (a: string, b: string) => {\n  let features\n  let missing\n  let result = ''\n  for (let i = 0; i < 4; i++) {\n    if (a[i] === b[i]) {\n      result = result + a[i]\n    } else {\n      features = Number(a[i]) + Number(b[i])\n      missing = (3 - features).toString()\n      result = result + missing\n    }\n  }\n  return result.trim()\n}\n\nexport const cardToggle = (card: string, selected: string[]) => {\n  if (selected.includes(card)) {\n    return selected.filter((c) => c !== card)\n  } else {\n    return [...selected, card]\n  }\n}\n\nexport const reshuffle = ({ board = [], deck }: GameState, boardSize = 12, minimumSets = 1) => {\n  let newDeck = shuffle([...board, ...deck])\n  while (\n    countSets(newDeck.slice(0, boardSize)) < minimumSets &&\n    countSets(newDeck, { returnWhenFound: true }) > 0\n  ) {\n    newDeck = shuffle(newDeck)\n  }\n  return {\n    deck: newDeck.slice(boardSize),\n    board: newDeck.slice(0, boardSize),\n  }\n}\n\nexport const removeSelected = (state: { board: string[]; deck: string[]; selected: string[] }) => {\n  const { board, deck, selected } = state\n  const newCards = deck.slice(0, 3)\n  let newBoard = [...board]\n  let newDeck = deck.slice(3)\n  selected.forEach((c, i) => {\n    let index = newBoard.indexOf(c)\n    newBoard[index] = newCards[i]\n  })\n  while (countSets(newBoard) === 0) {\n    ;({ deck: newDeck, board: newBoard } = reshuffle({\n      board: newBoard,\n      deck: newDeck,\n    }))\n  }\n\n  return {\n    deck: newDeck,\n    board: newBoard,\n    selected: [],\n  }\n}\n\nexport const handleGoogleSignIn = () => {\n  const provider = new firebase.auth.GoogleAuthProvider()\n  firebase\n    .auth()\n    .signInWithPopup(provider)\n    .then(function(result) {\n      // This gives you a Google Access Token. You can use it to access the Google API.\n      const credential = result.credential as firebase.auth.OAuthCredential\n      var token = credential.accessToken\n      // The signed-in user info.\n      var user = result.user\n      console.log(token, user)\n    })\n    .catch(function(error) {\n      // Handle Errors here.\n      var errorCode = error.code\n      var errorMessage = error.message\n      // The email of the user's account used.\n      var email = error.email\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential\n      // ...\n    })\n}\n\nexport const handleGoogleRedirect = () => {\n  const provider = new firebase.auth.GoogleAuthProvider()\n  firebase.auth().signInWithRedirect(provider)\n}\n\nexport const updateGame = (id: string, data: any) => {\n  const game = firestore.collection('games').doc(id)\n  game.update({\n    ...data,\n    lastUpdate: firebase.firestore.FieldValue.serverTimestamp(),\n  })\n}\n\nexport const sendAction = (gameId: string, action: any) => {\n  const actions = firestore\n    .collection('games')\n    .doc(gameId)\n    .collection('actions')\n  actions\n    .add({\n      ...action,\n      created: firebase.firestore.FieldValue.serverTimestamp(),\n    })\n    .then(function(docRef) {\n      if (action.type === 'found') {\n        const docId = docRef.id\n        console.log('Document written with ID: ', docId)\n        const pendingActionId = docId\n        return pendingActionId\n        // TODO: Trigger message if action isnt processed in reasonable time\n      }\n    })\n}\n\nexport const playerNotRegistered = (players: Player[], name: string) => {\n  const player = find(players, ['name', name])\n  return isNil(player)\n}\n","import React, { Component, Fragment } from 'react'\nimport { range } from '../utils/helpers'\nimport './card.css'\n\nconst config = {\n  width: 120,\n  height: 200,\n  strokeWidth: 4,\n  padding: 25,\n}\n\nconst Rectangle = ({ fill, color }) => {\n  let { padding, height, width, strokeWidth } = config\n  return (\n    <g>\n      {/* triangle */}\n      {/* <polygon\n    points={`${padding},${height - padding}\n    ${width / 2},${padding}\n    ${width - padding},${height - padding}`}\n    style={{ fill: fill, stroke: color, strokeWidth: config.strokeWidth }}\n  /> */}\n      {/* rectangle */}\n      <polygon\n        points={`${padding},${padding}\n    ${width - padding},${padding}\n    ${width - padding},${height - padding}\n    ${padding},${height - padding}`}\n        style={{ fill: fill, stroke: color, strokeWidth: strokeWidth }}\n      />\n    </g>\n  )\n}\n\nconst Squiggle = ({ fill, color }) => {\n  let { padding, height, width, strokeWidth } = config\n  return (\n    <svg width=\"120\" height=\"200\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g>\n        <rect fill=\"#fff\" id=\"canvas_background\" height=\"202\" width=\"122\" y=\"-1\" x=\"-1\" />\n        <g\n          display=\"none\"\n          overflow=\"visible\"\n          y=\"0\"\n          x=\"0\"\n          height=\"100%\"\n          width=\"100%\"\n          id=\"canvasGrid\"\n        >\n          <rect fill=\"#fff\" strokeWidth=\"0\" y=\"0\" x=\"0\" height=\"100%\" width=\"100%\" />\n        </g>\n      </g>\n      <g>\n        <path\n          stroke={color}\n          transform=\"\n          rotate(270,58.8,98)\n          scale(0.8 1)\n          translate(10 0)\n          \"\n          id=\"svg_5\"\n          d=\"\n          m-17.49,66\n          c50.83,-35.45 101.7,35.45\n          152.5,0\n          c30,-10 30,43.8\n          0,63.8\n          c-50.8,35.45 -101.6,-35.45\n          -152.5,0\n          c-30,15 -30,-45\n          0,-63.59\n          z\n          \"\n          fillOpacity=\"null\"\n          strokeOpacity=\"null\"\n          strokeWidth={strokeWidth}\n          fill={fill}\n        />\n      </g>\n    </svg>\n  )\n}\n\nconst Shape = ({ shape, fill, color }) => {\n  let { padding, height, width, strokeWidth } = config\n  if (shape === '0') {\n    padding = padding + 1\n    return <Squiggle fill={fill} color={color} />\n  }\n  if (shape === '1') {\n    return (\n      <g>\n        <ellipse\n          stroke={color}\n          ry={(height - 2 * padding) / 2}\n          rx={(width - 2 * padding) / 2}\n          cy={height / 2}\n          cx={width / 2}\n          fillOpacity=\"null\"\n          strokeOpacity=\"null\"\n          strokeWidth={config.strokeWidth}\n          fill={fill}\n        />\n      </g>\n    )\n  }\n  if (shape === '2') {\n    return (\n      <g>\n        {/* diamond */}\n\n        <polygon\n          points={`${padding},${height / 2}\n          ${width / 2},${padding}\n          ${width - padding},${height / 2}\n          ${width / 2},${height - padding}`}\n          style={{ fill: fill, stroke: color, strokeWidth: config.strokeWidth }}\n        />\n      </g>\n    )\n  }\n}\n\nclass Card extends Component {\n  colors = {\n    0: '#00A91D',\n    1: '#311b92',\n    2: '#FF0000',\n    white: '#fff',\n  }\n\n  getFill = (color, fill) => {\n    if (fill === '1') {\n      return `url(#card-${color}-${fill})`\n    }\n    if (fill === '2') {\n      return this.colors[color]\n    }\n    return this.colors.white\n  }\n\n  drawShape = () => {\n    const [, color, shape, fill] = this.props.desc.split('')\n    return (\n      <Fragment>\n        <g>\n          <title>background</title>\n          <rect fill={this.colors.white} id=\"canvas_background\" y=\"-1\" x=\"-1\" />\n          <g\n            display=\"none\"\n            overflow=\"visible\"\n            y=\"0\"\n            x=\"0\"\n            height=\"100%\"\n            width=\"100%\"\n            id=\"canvasGrid\"\n          >\n            <rect strokeWidth=\"0\" y=\"0\" x=\"0\" height=\"100%\" width=\"100%\" />\n          </g>\n        </g>\n        <Shape shape={shape} fill={this.getFill(color, fill)} color={this.colors[color]} />\n      </Fragment>\n    )\n  }\n\n  render() {\n    const [number, color, , fill] = this.props.desc.split('')\n    return (\n      <div className=\"game-card\">\n        <svg width=\"0\" height=\"0\">\n          <pattern\n            id={`card-${color}-${fill}`}\n            width={120 / 12}\n            height=\"10\"\n            patternTransform=\"rotate(45 0 0)\"\n            patternUnits=\"userSpaceOnUse\"\n          >\n            <line\n              x1=\"0\"\n              y1=\"0\"\n              x2=\"0\"\n              y2=\"10\"\n              style={{ stroke: this.colors[color], strokeWidth: '5' }}\n            />\n          </pattern>\n        </svg>\n\n        {range(Number(number) + 1).map((i) => {\n          return (\n            <svg\n              key={i}\n              className=\"shape\"\n              viewBox={`0 0 ${config.width} ${config.height}`}\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              {this.drawShape()}\n            </svg>\n          )\n        })}\n      </div>\n    )\n  }\n}\n\nexport default Card\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport sadTrombone from '../assets/sad_trombone.mp3'\nimport applause from '../assets/applause.mp3'\nimport { useSelector, useDispatch } from 'react-redux'\n\nfunction GameOver(props) {\n  const { gameOver, myName, solo } = props\n  const finalSound = () => {\n    const soundEffect = gameOver === myName ? applause : sadTrombone\n    return <audio src={soundEffect} autoPlay />\n  }\n  const userReducer = useSelector((state) => state.user)\n  const { user } = userReducer\n\n  return (\n    <div className=\"deep-purple lighten-2\" style={{ height: '100vh' }}>\n      {finalSound()}\n      <div className=\"row center-align\">\n        <div\n          className=\"card col s8 offset-s2 m6 offset-m3\"\n          style={{ marginTop: window.innerHeight * 0.2 }}\n        >\n          <div className=\"card-content\">\n            <span className=\"card-title\">GAME OVER!</span>\n            <p>Winner: {gameOver} </p>\n          </div>\n          <div className=\"card-action\">\n            <p>\n              <Link to=\"/\" style={{ marginRight: '48px' }}>\n                Main Menu\n              </Link>\n              {solo && user !== null && (\n                <span className=\"right-align\">\n                  <Link to=\"/stats\">View Stats</Link>\n                </span>\n              )}\n            </p>\n          </div>\n        </div>\n      </div>\n      {/* {solo && (\n        <div className=\"row\">\n          <button className=\"btn\" onClick={props.resetGame}>\n            Play Again\n          </button>\n        </div>\n      )} */}\n    </div>\n  )\n}\n\nexport default GameOver\n","export const colors = [\n  ' light-blue lighten-3',\n  ' pink lighten-3',\n  ' amber accent-2',\n  ' purple darken-1',\n  ' light-green lighten-1',\n  ' orange accent-2',\n]\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { countSets } from '../utils/helpers'\nimport { colors } from '../config'\n\nconst formatTime = (seconds) => {\n  const pad = (ss) => {\n    var p = '00'\n    var result = (p + ss).slice(-p.length)\n    return result\n  }\n  const mm = Math.floor(seconds / 60)\n  const ss = seconds - 60 * mm\n  return `${mm}:${pad(ss)}`\n}\n\nfunction TopBar({ gameMode, deck, board, declarer, setsFound, startTime, elapsedTime }) {\n  const sets = countSets(board)\n  switch (gameMode) {\n    case 'shared-device':\n      return null\n    case 'versus':\n      return (\n        <div className=\"navbar-fixed\">\n          <nav className={`orange ${declarer ? 'lighten-1' : 'darken-1'}`}>\n            <div\n              className=\"nav-wrapper\"\n              style={{ display: 'flex', justifyContent: 'space-between' }}\n            >\n              <div>Sets: {sets}</div>\n              <div>{declarer && <>SET! {declarer}</>}</div>\n            </div>\n          </nav>\n        </div>\n      )\n    case 'puzzle':\n      return (\n        <div className=\"navbar-fixed\">\n          <nav>\n            <div\n              className=\"nav-wrapper\"\n              style={{ display: 'flex', justifyContent: 'space-between' }}\n            >\n              <div>Total Sets: {sets}</div>\n              <div>Remaining: {sets - setsFound.length}</div>\n              <div>Time: {formatTime(elapsedTime)}</div>\n            </div>\n          </nav>\n        </div>\n      )\n    default:\n      return null\n  }\n}\n\nexport default TopBar\n","import React, { useEffect, useState, Component, Fragment } from 'react'\nimport { isEmpty, map, debounce, get } from 'lodash'\nimport { countSets } from '../utils/helpers'\nimport Card from './Card'\nimport GameOver from './GameOver'\nimport TopBar from './TopBar'\n\nfunction Board(props) {\n  const [sets, setSets] = useState(null)\n  const [windowHeight, setWindowHeight] = useState(window.innerHeight)\n  const {\n    board,\n    selected,\n    deck,\n    declarer,\n    players,\n    gameOver,\n    myName,\n    setFound,\n    sharedDevice,\n    solo,\n    gameMode,\n  } = props\n\n  useEffect(() => {\n    const resize = debounce(() => {\n      setWindowHeight(window.innerHeight)\n    }, 150)\n\n    window.addEventListener('resize', resize)\n\n    return function cleanup() {\n      window.removeEventListener('resize', resize)\n    }\n  }, [])\n\n  useEffect(() => {\n    setSets(countSets(board, { debug: process.env.NODE_ENV !== 'production' }))\n  }, [board])\n\n  if (isEmpty(players) || !Object.keys(players).includes(myName)) {\n    return null\n  }\n\n  const getBorderColor = ({ declarer, players }) => {\n    if (declarer) {\n      return get(players, `${declarer}.color`, '')\n    }\n    return get(players, `${myName}.color`, '')\n  }\n\n  const borderColor = getBorderColor(props)\n\n  if (gameOver) {\n    return <GameOver gameOver={gameOver} myName={myName} solo={solo} />\n  }\n\n  const playersArray = map(players, (info, name) => {\n    return {\n      name,\n      ...info,\n    }\n  })\n\n  const topBoxes = Math.ceil(playersArray.length / 2)\n  const topPlayers = playersArray.slice(0, topBoxes)\n  const bottomPlayers = playersArray.slice(topBoxes)\n\n  return (\n    <Fragment>\n      <TopBar {...props} />\n      {sharedDevice && (\n        <Fragment>\n          <div className=\"player-buttons-container\">\n            {topPlayers.map((info) => {\n              return (\n                <div\n                  className={`shared-player player-name ${info.color} ${\n                    info.name == declarer ? 'active-player' : ''\n                  }`}\n                  onClick={() => {\n                    props.handlePlayerClick(info.name)\n                  }}\n                  key={info.name}\n                >\n                  <p className=\"center-align\">{info.name == declarer ? 'SET!' : info.score}</p>\n                </div>\n              )\n            })}\n            <div className=\"player-buttons-container bottom\">\n              {bottomPlayers.map((info) => {\n                return (\n                  <div\n                    className={`shared-player player-name ${info.color} ${\n                      info.name == declarer ? 'active-player' : ''\n                    }`}\n                    onClick={() => {\n                      props.handlePlayerClick(info.name)\n                    }}\n                    key={info.name}\n                  >\n                    <p className=\"center-align\">{info.name == declarer ? 'SET!' : info.score}</p>\n                  </div>\n                )\n              })}\n            </div>\n          </div>\n        </Fragment>\n      )}\n\n      <div className=\"container\" style={{ maxWidth: window.innerHeight - 48 }}>\n        <div className=\"row\">\n          {board.map((card) => {\n            return (\n              <div\n                key={card}\n                className={`col s4 ${selected.includes(card) ? borderColor : ''}`}\n                onClick={() => {\n                  props.handleCardClick(card)\n                }}\n              >\n                <div\n                  className={`card ${\n                    setFound && selected.length === 3 && !selected.includes(card) ? 'blurry' : ''\n                  }`}\n                >\n                  <Card desc={card} />\n                </div>\n              </div>\n            )\n          })}\n        </div>\n        {!sharedDevice && gameMode !== 'puzzle' && (\n          <div className=\"row\">\n            {map(players, (info, name) => {\n              return (\n                <div key={name} className=\"col s4 m3\">\n                  <span className={`player-name ${info.color}`}>\n                    {name}: {info.score}\n                  </span>\n                </div>\n              )\n            })}\n          </div>\n        )}\n\n        {props.handleRedeal && (\n          <div className=\"row\">\n            <button onClick={props.handleRedeal} className=\"btn\">\n              Shuffle\n            </button>\n          </div>\n        )}\n      </div>\n    </Fragment>\n  )\n}\n\nexport default Board\n","import React from 'react'\nimport { map, findKey } from 'lodash'\n\nfunction PlayerList({ isHost, players, setState }) {\n  const host = findKey(players, (player) => player.host)\n\n  return (\n    <div className=\"container\">\n      <h4>Players:</h4>\n      <ul className=\"collection\">\n        {map(players, (info, name) => {\n          return (\n            <li key={name} className=\"collection-item\">\n              <span className={`player-name`}>\n                {name} {info.host && '(host)'}\n              </span>\n            </li>\n          )\n        })}\n      </ul>\n      {isHost ? (\n        <button\n          className=\"btn\"\n          onClick={() => {\n            setState({\n              started: true,\n            })\n          }}\n        >\n          Start Game\n        </button>\n      ) : (\n        <p>Waiting for host to start game...</p>\n      )}\n    </div>\n  )\n}\n\nexport default PlayerList\n","import React, { useState, useEffect, useRef } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { updateNickname } from '../redux-helpers'\nimport { Link } from 'react-router-dom'\nimport update from 'immutability-helper'\nimport firebase from 'firebase/app'\n\nimport 'firebase/auth'\nimport 'firebase/firestore'\nimport firestore from '../firestore'\n\nimport Signout from './Signout'\nimport Board from './Board'\nimport {\n  handleGoogleSignIn,\n  handleGoogleRedirect,\n  makeDeck,\n  cardToggle,\n  reshuffle,\n  removeSelected,\n  isSet,\n  updateGame,\n} from '../utils/helpers'\nimport { colors } from '../config'\nimport PlayerList from './PlayerList'\nimport { findKey, isEmpty } from 'lodash'\nimport { Action, MultiState } from '../utils/models'\n\nconst config = {\n  turnTime: 5000,\n  colors,\n  playingTo: 6,\n}\n\n// const firebaseRefs = {}\n\nfunction Host() {\n  const userReducer = useSelector((state: any) => state.user)\n  const { user, loading: userLoading } = userReducer\n  const dispatch = useDispatch()\n\n  const myFire = useRef({})\n  const firebaseRefs = myFire.current\n\n  const initialDeck = makeDeck()\n  const initialGameState: {\n    deck: string[]\n    board: string[]\n    selected: string[]\n  } = {\n    ...reshuffle({\n      deck: initialDeck.slice(12),\n      board: initialDeck.slice(0, 12),\n    }),\n    selected: [],\n  }\n\n  const [gameInProgress, setGameInProgress] = useState()\n  const [gameTitle, setGameTitle] = useState('')\n  const [activeGameUpdater, setActiveGameUpdater] = useState()\n  const [gameSubscription, setGameSubscription] = useState()\n  const [actionsSubscription, setActionSubscription] = useState()\n\n  const [state, setFullState] = useState<MultiState>({\n    players: {},\n    created: false,\n    started: false,\n    myName: '',\n    setFound: false,\n    declarer: null,\n    gameOver: false,\n    ...initialGameState,\n  })\n\n  const currentState = useRef(state)\n  currentState.current = state\n\n  useEffect(() => {\n    if (!isEmpty(user.uid)) {\n      firestore\n        .collection('games')\n        .where('creator_uid', '==', user.uid)\n        .get()\n        .then(function(querySnapshot) {\n          querySnapshot.forEach(function(doc) {\n            console.log(doc.id)\n            const oldGame = {\n              ...doc.data(),\n              gameTitle: doc.id,\n            }\n            console.log('Old game: ', oldGame)\n            setGameInProgress(oldGame)\n          })\n        })\n        .catch(function(error) {\n          console.log('Error getting documents: ', error)\n        })\n    }\n  }, [user])\n\n  useEffect(() => {\n    return () => {\n      if (actionsSubscription) {\n        actionsSubscription()\n      }\n      if (gameSubscription) {\n        gameSubscription()\n      }\n    }\n  }, [actionsSubscription])\n\n  useEffect(() => {\n    return function() {\n      window.clearInterval(activeGameUpdater)\n    }\n  }, [activeGameUpdater])\n\n  const setState = (update: Partial<MultiState>) => {\n    setFullState({\n      ...currentState.current,\n      ...update,\n    })\n  }\n\n  const handleRejectResume = () => {\n    const { gameTitle } = gameInProgress\n    firestore\n      .collection('games')\n      .doc(gameTitle)\n      .delete()\n      .then(() => {\n        console.log('Deleted old game')\n        setGameInProgress(undefined)\n      })\n  }\n\n  const handleCardClick = (card: string) => {\n    const { myName } = state\n    if (!state.declarer) {\n      const newSelected = cardToggle(card, state.selected)\n      if (isSet(newSelected)) {\n        updateSelected(newSelected, myName)\n      }\n      setState({\n        selected: newSelected,\n      })\n    }\n  }\n\n  const handleRedeal = () => {\n    const newState = reshuffle(state)\n    setAndSendState(newState)\n  }\n\n  const actionsSubscribe = (id: string) => {\n    const actions = firestore\n      .collection('games')\n      .doc(id)\n      .collection('actions')\n    return actions.onSnapshot((snapshot) => {\n      snapshot.docChanges().forEach((change) => {\n        if (change.type === 'added') {\n          const action = change.doc.data() as Action\n          console.log(action)\n          processAction(action)\n          actions.doc(change.doc.id).delete()\n        }\n        if (change.type === 'removed') {\n          console.log('Removed action: ', change.doc.data())\n        }\n      })\n    })\n  }\n\n  const subscribeToGame = (gameTitle: string) => {\n    const game = firestore.collection('games').doc(gameTitle)\n    const gameUpdateId = window.setInterval(() => {\n      game.update({\n        lastUpdate: firebase.firestore.FieldValue.serverTimestamp(),\n      })\n    }, 30000)\n    setActiveGameUpdater(gameUpdateId)\n\n    const unsubscribe = actionsSubscribe(gameTitle)\n    setActionSubscription(unsubscribe)\n  }\n\n  const reloadGame = () => {\n    console.log(gameInProgress)\n    const host = findKey(gameInProgress.players, (player) => player.host)\n\n    const { gameTitle } = gameInProgress\n    setGameTitle(gameTitle)\n    subscribeToGame(gameTitle)\n    setState({\n      myName: host,\n      created: true,\n      ...gameInProgress,\n      lastUpdate: firebase.firestore.FieldValue.serverTimestamp(),\n    })\n  }\n\n  const handleCreateGame = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    const { myName, board, deck, selected, players } = state\n    const officialTitle = !isEmpty(gameTitle) ? gameTitle : `${myName}'s game`\n    setGameTitle(officialTitle)\n    const game = firestore.collection('games').doc(officialTitle)\n    game.set({\n      creator_uid: user.uid,\n      players,\n      board,\n      deck,\n      selected,\n      lastUpdate: firebase.firestore.FieldValue.serverTimestamp(),\n    })\n    const updateId = window.setInterval(() => {\n      game.update({\n        lastUpdate: firebase.firestore.FieldValue.serverTimestamp(),\n      })\n    }, 30000)\n    setActiveGameUpdater(updateId)\n\n    const unsubscribe = actionsSubscribe(officialTitle)\n    setActionSubscription(unsubscribe)\n\n    setState({\n      created: true,\n    })\n  }\n\n  const handleSetName = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    setState({\n      myName: user.nickname,\n      players: {\n        [user.nickname]: {\n          host: true,\n          uid: user.uid,\n          score: 0,\n          color: config.colors[0],\n        },\n      },\n    })\n  }\n\n  const markPointForDeclarer = (declarer: string) => {\n    if (!declarer) {\n      return {}\n    }\n    const { players } = currentState.current\n    const newScore = players[declarer].score + 1\n    const newPlayers = update(players, {\n      [declarer]: {\n        $merge: {\n          score: newScore,\n        },\n      },\n    })\n    const gameOver = !!(newScore >= config.playingTo && declarer)\n    if (gameOver) {\n      window.setTimeout(() => {\n        firestore\n          .collection('games')\n          .doc(gameTitle)\n          .delete()\n        clearInterval(activeGameUpdater)\n      }, 3000)\n    }\n\n    return {\n      players: newPlayers,\n      gameOver,\n    }\n  }\n\n  const processAction = (action: Action) => {\n    const { type, payload } = action\n    const { players, declarer, board } = currentState.current\n    switch (type) {\n      case 'join':\n        if (Object.keys(players).includes(payload.name)) {\n          return\n        }\n        const newPlayers = {\n          ...players,\n          [payload.name]: {\n            host: false,\n            uid: payload.uid,\n            score: 0,\n            color: config.colors[Object.keys(players).length],\n          },\n        }\n        setAndSendState({ players: newPlayers })\n        break\n      case 'found':\n        if (!declarer && verifySelectedOnBoard(board, payload.selected)) {\n          updateSelected(payload.selected, payload.name)\n        }\n        break\n      default:\n        return\n    }\n  }\n\n  const removeSet = (selected: string[], declarer: string) => {\n    if (isSet(selected)) {\n      const newScores = markPointForDeclarer(declarer)\n      const newState: Partial<MultiState> = {\n        ...currentState.current,\n        setFound: false,\n        declarer: null,\n        ...newScores,\n        ...removeSelected(currentState.current),\n      }\n      setAndSendState(newState)\n    }\n  }\n\n  const setAndSendState = (update: Partial<MultiState>) => {\n    setState(update)\n    updateGame(gameTitle, update)\n  }\n\n  const verifySelectedOnBoard = (board: string[], selected: string[]) => {\n    for (let i = 0; i < selected.length; i++) {\n      if (!board.includes(selected[i])) {\n        return false\n      }\n    }\n    return true\n  }\n\n  const updateSelected = (newSelected: string[], declarer: string) => {\n    const newState = {\n      setFound: isSet(newSelected),\n      selected: newSelected,\n      declarer,\n    }\n    setAndSendState(newState)\n    if (newState.setFound) {\n      setTimeout(() => {\n        removeSet(newSelected, declarer)\n      }, 4000)\n    }\n  }\n\n  const { board, deck, selected, declarer, players, created, started, myName } = state\n\n  if (userLoading) {\n    return 'Loading...'\n  }\n\n  if (isEmpty(user)) {\n    return (\n      <div className=\"container\">\n        <p>To host a game, sign in with your Google account.</p>\n        <p>\n          <button onClick={handleGoogleRedirect} className=\"btn\">\n            Sign in\n          </button>\n        </p>\n      </div>\n    )\n  }\n\n  if (gameInProgress && !state.created) {\n    return (\n      <div className=\"container\">\n        <p>You are already hosting a game. Return to it?</p>\n        <button className=\"btn\" onClick={() => reloadGame()}>\n          YES!\n        </button>\n        <button className=\"btn\" onClick={handleRejectResume}>\n          No, remove it\n        </button>\n      </div>\n    )\n  }\n\n  if (myName === '') {\n    return (\n      <div className=\"container\">\n        <Signout />\n        <h4>Enter your nickname:</h4>\n        <form onSubmit={handleSetName}>\n          <input\n            autoFocus\n            placeholder=\"hostname\"\n            value={user.nickname}\n            onChange={(e) => {\n              dispatch(updateNickname(e.target.value))\n              window.localStorage.setItem('nickname', e.target.value)\n            }}\n          />\n          <button type=\"submit\" className=\"btn\">\n            Submit\n          </button>\n        </form>\n        <div>\n          <p>\n            <Link to=\"/\">Main Menu</Link>\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!created) {\n    return (\n      <div className=\"container\">\n        <h4>Name your game:</h4>\n        <form onSubmit={handleCreateGame}>\n          <input\n            autoFocus\n            placeholder={`${myName}'s game`}\n            onChange={(e) => {\n              setGameTitle(e.target.value)\n            }}\n            value={gameTitle}\n          />\n          <button type=\"submit\" className=\"btn\">\n            Create\n          </button>\n        </form>\n      </div>\n    )\n  }\n\n  if (!started) {\n    return <PlayerList isHost={true} players={players} setState={setAndSendState} />\n  }\n\n  return (\n    <Board\n      board={board}\n      deck={deck}\n      selected={selected}\n      declarer={declarer}\n      handleCardClick={handleCardClick}\n      // handleDeclare={this.handleDeclare}\n      handleRedeal={handleRedeal}\n      players={players}\n      setFound={state.setFound}\n      gameOver={state.gameOver}\n      myName={state.myName}\n      gameMode=\"versus\"\n    />\n  )\n}\n\nexport default Host\n","import React from 'react'\n\nconst Modal = ({ children, visible: popupVisible }) => {\n  return (\n    <div className=\"modal popup-message\" style={{ display: popupVisible ? 'block' : 'none' }}>\n      <div className=\"modal-content\">{children}</div>\n    </div>\n  )\n}\n\nexport default Modal\n","import React, { useState, useEffect, useRef } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { isEmpty } from 'lodash'\nimport { Link } from 'react-router-dom'\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\n\nimport { updateNickname } from '../redux-helpers'\nimport { cardToggle, isSet, handleGoogleSignIn, handleGoogleRedirect } from '../utils/helpers'\nimport firestore from '../firestore'\nimport Modal from './Modal'\nimport Signout from './Signout'\nimport Board from './Board'\nimport PlayerList from './PlayerList'\n\nfunction Guest(props) {\n  const userReducer = useSelector((state) => state.user)\n  const { user, loading: userLoading } = userReducer\n  const dispatch = useDispatch()\n\n  const [state, setFullState] = useState({\n    popupVisible: false,\n    setFound: false,\n    displayAnimation: false,\n    animatedSet: [],\n    declarer: '',\n    deck: [],\n    board: [],\n    selected: [],\n    pending: null,\n    started: false,\n  })\n  const [myName, setMyName] = useState('')\n  const [modalDelayMsg, setDelayMsg] = useState()\n\n  const myFire = useRef({})\n  const firebaseRefs = myFire.current\n  // const [firebaseRefs, setFirebaseRefs] = useState({})\n\n  const currentState = useRef(state)\n  currentState.current = state\n\n  const setState = (update) => {\n    setFullState({\n      ...currentState.current,\n      ...update,\n    })\n  }\n\n  const handleCardClick = (card) => {\n    const { declarer, selected } = currentState.current\n    if (declarer) {\n      return\n    }\n    const newSelected = cardToggle(card, selected)\n    const newState = {}\n    if (newSelected.length === 3) {\n      if (isSet(newSelected)) {\n        const action = {\n          type: 'found',\n          payload: { selected: newSelected, name: myName },\n        }\n        sendAction(action)\n        newState.popupVisible = true\n      } else {\n        console.log('Bad set selected!')\n        window.setTimeout(this.resetLocalSelected, 1000)\n      }\n    }\n\n    setState({\n      ...newState,\n      selected: newSelected,\n    })\n  }\n\n  const handleSetName = (e) => {\n    e.preventDefault()\n    const nameInput = user.nickname\n    if (isEmpty(nameInput)) {\n      return\n    }\n    setMyName(nameInput)\n    sendAction({\n      type: 'join',\n      payload: { name: nameInput, uid: user.uid },\n    })\n  }\n\n  const processUpdate = (doc) => {\n    const updatedState = { ...doc.data() }\n    if (isEmpty(updatedState)) {\n      return\n    }\n    console.log('Updating', updatedState)\n    setState({\n      ...updatedState,\n      popupVisible: false,\n    })\n  }\n\n  const sendAction = (action) => {\n    firebaseRefs.actions\n      .add({\n        ...action,\n        created: firebase.firestore.FieldValue.serverTimestamp(),\n      })\n      .then(function(docRef) {\n        if (action.type === 'found') {\n          const docId = docRef.id\n          console.log('Document written with ID: ', docId)\n          setState({\n            pending: docId,\n          })\n          // TODO: Trigger message if action isnt processed in reasonable time\n        }\n      })\n  }\n\n  useEffect(() => {\n    const { gameName } = props.match.params\n    firebaseRefs.game = firestore.collection('games').doc(gameName)\n    const unsubGames = firebaseRefs.game.onSnapshot((doc) => {\n      processUpdate(doc)\n    })\n    firebaseRefs.actions = firebaseRefs.game.collection('actions')\n\n    const unsubActions = firebaseRefs.actions.onSnapshot((snapshot) => {\n      snapshot.docChanges().forEach((change) => {\n        if (change.type === 'removed') {\n          const { pending } = currentState.current\n          if (pending === change.doc.id) {\n            console.log('Pending action removed!')\n            setState({\n              pending: null,\n            })\n          }\n        }\n      })\n    })\n\n    return function cleanup() {\n      if (firebaseRefs.game) {\n        unsubGames()\n      }\n      if (firebaseRefs.actions) {\n        unsubActions()\n      }\n    }\n  }, [])\n\n  const { board, deck, selected, declarer, players, popupVisible, started } = state\n\n  if (userReducer.loading) {\n    return 'Loading profile...'\n  }\n\n  if (isEmpty(user)) {\n    return (\n      <div className=\"container\">\n        <p>To join a game, sign in with your Google account.</p>\n        <p>\n          <button onClick={handleGoogleRedirect} className=\"btn\">\n            Sign in\n          </button>\n        </p>\n        <p>\n          <Link to=\"/lobby\">Back</Link>\n        </p>\n      </div>\n    )\n  }\n  if (!myName) {\n    return (\n      <div className=\"container\">\n        <Signout />\n\n        <h4>Choose nickname</h4>\n        <form onSubmit={handleSetName}>\n          <input\n            autoFocus\n            type=\"text\"\n            placeholder=\"your name\"\n            value={user.nickname}\n            onChange={(e) => {\n              dispatch(updateNickname(e.target.value))\n              window.localStorage.setItem('nickname', e.target.value)\n            }}\n          />\n          <input className=\"btn\" type=\"submit\" value=\"Join\" />\n        </form>\n      </div>\n    )\n  }\n\n  if (!started) {\n    return <PlayerList players={players} isHost={false} />\n  }\n\n  return (\n    <React.Fragment>\n      <Modal visible={state.pending && popupVisible}>\n        <p className=\"flow-text center-align\">SET!</p>\n        <div className=\"progress\">\n          <div className=\"indeterminate\" style={{ width: '30%' }} />\n        </div>\n      </Modal>\n      <Board\n        board={board}\n        deck={deck}\n        selected={selected}\n        declarer={declarer}\n        handleCardClick={handleCardClick}\n        // handleDeclare={this.handleDeclare}\n        players={players}\n        setFound={state.setFound}\n        gameOver={state.gameOver}\n        // syncing={this.state.syncing}\n        myName={myName}\n        gameMode=\"versus\"\n      />\n    </React.Fragment>\n  )\n}\n\nexport default Guest\n","import React, { Component, Fragment } from 'react'\nimport firestore from '../firestore'\nimport { Link } from 'react-router-dom'\n\nconst styles = {}\n\nclass Lobby extends Component {\n  constructor(props) {\n    super(props)\n    const games = []\n\n    this.state = {\n      name: '',\n      newGame: 'baz',\n      init: false,\n      games,\n    }\n  }\n\n  componentDidMount() {\n    this.gamesRef = firestore.collection('games')\n\n    this.unsubscribe = this.gamesRef.onSnapshot((snapshot) => {\n      const newGames = []\n      snapshot.forEach((doc) => {\n        newGames.push({\n          name: doc.id,\n          ...doc.data(),\n        })\n      })\n      this.setState({\n        init: true,\n        games: newGames,\n      })\n    })\n  }\n\n  componentWillUnmount = () => {\n    this.unsubscribe()\n  }\n\n  render() {\n    const { games, init } = this.state\n    if (!init) {\n      return null\n    }\n    const activeGames = games.filter((g) => {\n      const { lastUpdate } = g\n      if (!lastUpdate) {\n        return false\n      }\n      const updated = lastUpdate.toMillis()\n      const now = new Date().getTime()\n      const age = Math.round((now - updated) / 1000)\n      return age < 40\n    })\n    return (\n      <div className=\"container\" style={{ height: '100vh' }}>\n        {activeGames.length === 0 ? (\n          <Fragment>\n            <div className=\"row\">\n              <div className=\"col s8 offset-s2 m6 offset-m3\">\n                <div className=\"card-panel teal\" style={{ marginTop: window.innerHeight * 0.2 }}>\n                  <span className=\"white-text\">There are currently no active games.</span>\n                </div>\n                <p>\n                  Click <Link to=\"/host\">here</Link> to host one\n                </p>\n                <p>\n                  <Link to=\"/\">Back</Link>\n                </p>\n              </div>\n            </div>\n          </Fragment>\n        ) : (\n          <Fragment>\n            <h4 className=\"center-align\">Available games</h4>\n            <div className=\"row center-align\">\n              {activeGames.map((game, i) => {\n                return (\n                  <div className=\"col s6 m4\" key={game.name}>\n                    <Link to={`/guest/${game.name}`}>\n                      <div className=\"card-panel\">{game.name}</div>\n                    </Link>\n                  </div>\n                )\n              })}\n              <p>\n                <Link to=\"/\">Back</Link>\n              </p>\n            </div>\n          </Fragment>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default Lobby\n","import React, { Component, Fragment } from 'react'\nimport { Link } from 'react-router-dom'\nimport Board from './Board'\nimport {\n  makeDeck,\n  cardToggle,\n  reshuffle,\n  removeSelected as removeSelectedCards,\n  isSet,\n  nameThird,\n  handleGoogleRedirect,\n} from '../utils/helpers'\nimport { shuffle, cloneDeep } from 'lodash'\nimport { colors } from '../config'\nimport update from 'immutability-helper'\nimport Slider from 'react-rangeslider'\nimport axios from 'axios'\nimport { connect } from 'react-redux'\nimport Signout from './Signout'\n\nimport { Players, GameState } from '../utils/models'\n\nconst debugging = false\n\nconst config = {\n  turnTime: 4000,\n  colors,\n  playingTo: 6,\n  cpuDelay: 1200,\n}\n\nconst calculateIntervalFromDifficulty = (d: number) => {\n  let diff = Number(d)\n  if (Number.isNaN(diff)) {\n    diff = 1\n  }\n  const interval = 24000 / (5 * diff)\n  return interval\n}\n\nconst createGameState = () => {\n  const initialDeck = makeDeck()\n  const selected: string[] = []\n  return {\n    ...reshuffle({\n      deck: initialDeck.slice(12),\n      board: initialDeck.slice(0, 12),\n    }),\n    selected,\n  }\n}\n\nconst logTime = (msg = '') => {\n  const d = new Date()\n  const s = (d.getTime() % 10 ** 6) / 1000\n  console.log(msg, s.toFixed(1))\n}\n\nconst initialState = {\n  players: {\n    you: {\n      score: 0,\n      color: config.colors[0],\n    },\n    cpu: {\n      score: 0,\n      color: config.colors[1],\n    },\n  },\n  gameStarted: false,\n  myName: 'you',\n  setFound: false,\n  declarer: null,\n  gameOver: false,\n  cpuTurnInterval: 1000,\n  startTime: new Date(),\n}\n\ninterface State extends GameState {\n  players: Players\n  selected: string[]\n  cpuTimer?: number\n  gameStarted: boolean\n  myName: string\n  setFound: boolean\n  declarer: null | string\n  timeDeclared?: number\n  gameOver: boolean\n  cpuTurnInterval: number\n  cpuFound?: string[]\n  startTime: Date\n  undeclareId?: number\n  difficulty?: number\n  cpuAnimation?: number\n}\n\nclass Solo extends Component<any, State> {\n  constructor(props: any) {\n    super(props)\n    this.state = {\n      ...cloneDeep(initialState),\n      ...createGameState(),\n    }\n  }\n\n  handleStartGame = (e: React.FormEvent<HTMLFormElement>): void => {\n    e.preventDefault()\n    this.setState({\n      gameStarted: true,\n      startTime: new Date(),\n    })\n\n    console.log(`Turns every ${this.state.cpuTurnInterval} ms`)\n    setTimeout(() => {\n      const cpuTimer = window.setInterval(this.cpuTurn, this.state.cpuTurnInterval)\n      this.setState({\n        cpuTimer,\n      })\n    }, config.cpuDelay)\n  }\n\n  componentDidMount = () => {\n    const savedDifficulty = window.localStorage.getItem('soloDifficulty')\n    let difficulty = savedDifficulty ? Number(savedDifficulty) : 2\n    const cpuTurnInterval = calculateIntervalFromDifficulty(difficulty)\n    this.setState({\n      difficulty,\n      cpuTurnInterval,\n    })\n  }\n\n  componentWillUnmount = () => {\n    if (this.state.cpuTimer !== null) {\n      window.clearInterval(this.state.cpuTimer)\n    }\n  }\n\n  cpuTurn = () => {\n    const { board, declarer, gameOver } = this.state\n    if (declarer || gameOver) {\n      return\n    }\n    if (debugging) {\n      logTime('Guess')\n    }\n    const [a, b] = shuffle(board).slice(0, 2)\n    const c = nameThird(a, b)\n    if (board.includes(c)) {\n      this.setState({\n        declarer: 'cpu',\n        selected: [a],\n        cpuFound: [b, c],\n        setFound: true,\n      })\n      if (this.state.cpuTimer !== null) {\n        clearInterval(this.state.cpuTimer)\n      }\n      this.setState({\n        cpuAnimation: window.setInterval(this.animateCpuChoice, 900),\n      })\n    }\n  }\n\n  animateCpuChoice = () => {\n    const { selected, cpuFound } = this.state\n    const cpuCopy = [...cpuFound]\n    if (cpuCopy.length === 0) {\n      return\n    }\n    const newSelected = [...selected, cpuCopy.pop() as string]\n    this.setState({\n      cpuFound: cpuCopy,\n      selected: newSelected,\n    })\n    if (newSelected.length === 3) {\n      if (this.state.cpuAnimation !== null) {\n        clearInterval(this.state.cpuAnimation)\n      }\n      this.updateSelected(newSelected, 'cpu')\n    }\n  }\n\n  updatePlayerScore = (myName: string, delta: number): [Players, number] => {\n    const { players } = this.state\n    const newScore = players[myName].score + delta\n    const newPlayers = update(players, {\n      [myName]: {\n        $merge: {\n          score: newScore,\n        },\n      },\n    })\n    return [newPlayers, newScore]\n  }\n\n  expireDeclare = () => {\n    const { declarer, selected } = this.state\n    if (declarer && !isSet(selected)) {\n      const [newPlayers] = this.updatePlayerScore(declarer, -0.5)\n      this.setState({\n        players: newPlayers,\n        declarer: null,\n        timeDeclared: undefined,\n        selected: [],\n      })\n    }\n  }\n\n  markPointForDeclarer = (declarer: string) => {\n    const [newPlayers, newScore] = this.updatePlayerScore(declarer, 1)\n    const { user } = this.props.userReducer\n    const gameOver = !!(newScore >= config.playingTo && declarer)\n    const newState = {\n      players: newPlayers,\n      gameOver,\n    }\n    if (gameOver) {\n      const uid = (user && user.uid) || 'anonymous'\n      const player_won = declarer == 'you' ? 1 : 0\n      const total_time = Math.round((new Date().getTime() - this.state.startTime.getTime()) / 1000)\n      axios\n        .post('/api/game', {\n          uid,\n          total_time,\n          player_won,\n          difficulty_level: this.state.difficulty,\n          winning_score: newScore,\n        })\n        .then(() => {\n          console.log('Game sent')\n        })\n        .catch((err) => {\n          console.log('Error sending game')\n        })\n    }\n    this.setState(newState)\n    return newState\n  }\n\n  performDeclare = (declarer: string) => {\n    if (!this.state.declarer) {\n      const timeNow = new Date().getTime()\n      const update = {\n        declarer,\n        timeDeclared: timeNow,\n      }\n      this.setState(update)\n      this.setState({\n        undeclareId: window.setTimeout(() => {\n          this.expireDeclare()\n        }, config.turnTime),\n      })\n    }\n  }\n\n  updateSelected = (newSelected: Array<string>, declarer: string) => {\n    const newState = {\n      setFound: isSet(newSelected),\n      selected: newSelected,\n      declarer,\n    }\n    if (newState.setFound) {\n      this.state.undeclareId && clearTimeout(this.state.undeclareId)\n      setTimeout(() => {\n        this.removeSet()\n      }, 2000)\n    }\n    this.setState(newState)\n  }\n\n  handleCardClick = (card: string) => {\n    const { setFound, declarer, myName } = this.state\n    if (!setFound && declarer !== 'cpu') {\n      const newSelected = cardToggle(card, this.state.selected)\n      if (!declarer) {\n        this.performDeclare(myName)\n      }\n      this.setState({\n        selected: newSelected,\n      })\n      if (isSet(newSelected)) {\n        this.updateSelected(newSelected, 'you')\n      }\n    }\n  }\n\n  handleRedeal = () => {\n    const newState = reshuffle(this.state)\n    this.setState(newState)\n  }\n\n  removeSet = () => {\n    const { declarer, selected } = this.state\n    if (declarer && isSet(selected)) {\n      console.log('Set found, removing')\n      this.markPointForDeclarer(declarer)\n      const newState = {\n        setFound: false,\n        declarer: null,\n        timeDeclared: undefined,\n        ...removeSelectedCards(this.state),\n      }\n      this.setState(newState)\n    }\n    this.state.cpuTimer && clearInterval(this.state.cpuTimer)\n    setTimeout(() => {\n      const cpuTimer = window.setInterval(this.cpuTurn, this.state.cpuTurnInterval)\n      this.setState({\n        cpuTimer,\n      })\n    }, config.cpuDelay)\n  }\n\n  resetGame = () => {\n    this.state.cpuTimer && window.clearInterval(this.state.cpuTimer)\n    this.setState({\n      ...cloneDeep(initialState),\n      ...createGameState(),\n    })\n  }\n\n  render() {\n    const { board, deck, selected, declarer, players, gameStarted, setFound } = this.state\n    const { userReducer } = this.props\n    const { user } = userReducer\n    if (userReducer.loading) {\n      return 'Loading...'\n    }\n    if (!gameStarted) {\n      return (\n        <div className=\"container\">\n          {user !== null && <Signout />}\n          <h3>Solo Play vs. Computer</h3>\n          <h4 className=\"orange-text text-darken-4\">Choose difficulty level:</h4>\n          <div className=\"row\">\n            <div className=\"col s8 m4\">\n              <form onSubmit={this.handleStartGame}>\n                <Slider\n                  min={1}\n                  max={5}\n                  orientation=\"horizontal\"\n                  tooltip={true}\n                  value={Number(this.state.difficulty)}\n                  onChange={(difficulty) => {\n                    const cpuTurnInterval = calculateIntervalFromDifficulty(difficulty)\n                    window.localStorage.setItem('soloDifficulty', difficulty.toString())\n                    this.setState({\n                      cpuTurnInterval,\n                      difficulty,\n                    })\n                  }}\n                />\n                <input type=\"submit\" value=\"Start\" className=\"btn\" />\n              </form>\n              <p style={{ marginTop: '24px' }}>First to {config.playingTo} points is the winner</p>\n            </div>\n            <div className=\"row\">\n              <div style={{ marginTop: '48px' }} className=\"col s12\">\n                <p>\n                  <Link to=\"/local\">Local Multiplayer</Link>\n                </p>\n                <p style={{ marginTop: '36px' }}>\n                  <Link to=\"/\">Back to Main Menu</Link>\n                </p>\n                {!user && (\n                  <Fragment>\n                    <hr />\n                    <p>To save your stats, sign in with your Google account.</p>\n\n                    <p>\n                      <button onClick={handleGoogleRedirect} className=\"btn\">\n                        Sign in\n                      </button>\n                    </p>\n                  </Fragment>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n    }\n    return (\n      <React.Fragment>\n        <Board\n          board={board}\n          deck={deck}\n          selected={selected}\n          declarer={declarer}\n          handleCardClick={this.handleCardClick}\n          handleDeclare={() => {}}\n          handleRedeal={this.handleRedeal}\n          players={players}\n          setFound={this.state.setFound}\n          gameOver={this.state.gameOver}\n          myName={this.state.myName}\n          resetGame={this.resetGame}\n          solo={true}\n          gameMode=\"versus\"\n        />\n      </React.Fragment>\n    )\n  }\n}\n\nconst mapStateToProps = (state: any) => ({\n  userReducer: state.user,\n})\n\nexport default connect(mapStateToProps)(Solo)\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport Card from './Card'\n\nfunction Main() {\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <h2 className=\"center-align\">Main Menu</h2>\n      </div>\n      <div className=\"row\">\n        <div className=\"col s8 offset-s2 m3 offset-m1\">\n          <Link to=\"/solo\">\n            <div className=\"card\">\n              <Card desc=\"0012\" />\n            </div>\n          </Link>\n          <p className=\"center-align\">Solo/Local</p>\n        </div>\n        <div className=\"col s8 offset-s2 m3\">\n          <Link to=\"/lobby\">\n            <div className=\"card\">\n              <Card desc=\"1121\" />\n            </div>\n          </Link>\n          <p className=\"center-align\">Join Game</p>\n        </div>\n        <div className=\"col s8 offset-s2 m3\">\n          <Link to=\"/host\">\n            <div className=\"card\">\n              <Card desc=\"2200\" />\n            </div>\n          </Link>\n          <p className=\"center-align\">Host Game</p>\n        </div>\n      </div>\n      {/* <div>\n        <hr />\n          <p>\n          <Link to=\"/rules\">Rules</Link>\n\n          </p>\n          <p>\n          <Link to=\"/stats\">Statistics</Link>\n\n          </p>\n\n      </div> */}\n    </div>\n  )\n}\n\nexport default Main\n","import React, { Component } from 'react'\nimport Card from './Card'\n\nfunction Rules() {\n  return (\n    <div className=\"rules container\">\n      <h2>Rules of the Game</h2>\n      <p>\n        The object of the same is to find a sets of three cards that are either the same or\n        different along each of four dimensions.\n      </p>\n      <p>\n        If that makes perfect sense to you, then go ahead and start playing. Otherwise, I will\n        explain a bit more.\n      </p>\n      <p>The game starts by laying out a board with twelve cards. Here are some example cards: </p>\n      <div className=\"row\">\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"0000\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"1210\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"0022\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"2101\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"0120\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"2011\" />\n          </div>\n        </div>\n      </div>\n      <p>\n        You'll notice that every card has four different characteristics:\n        <ul className=\"browser-default\">\n          <li>color</li>\n          <li>number</li>\n          <li>shape</li>\n          <li>fill</li>\n        </ul>\n        and each of those characteristics has three different possibilities.\n      </p>\n      <p>\n        Three cards form a set if, for each of those four characteristics, the three cards are\n        either <em>all the same</em> or <em>all different.</em>\n      </p>\n      <p>It is easier to understand with examples, so here is an example set:</p>\n      <div className=\"row\">\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"0112\" />\n          </div>\n        </div>{' '}\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"1111\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"2110\" />\n          </div>\n        </div>\n      </div>\n      <p>\n        Which you can describe as follows:\n        <ul className=\"browser-default\">\n          <li>color - SAME</li>\n          <li>shape - SAME</li>\n          <li>number - DIFFERENT</li>\n          <li>fill - DIFFERENT</li>\n        </ul>\n        Therefore, the three cards form a set.\n      </p>\n      <p>Here is another set:</p>\n      <div className=\"row\">\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"2022\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"1112\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"0202\" />\n          </div>\n        </div>\n      </div>\n      <p>\n        <ul className=\"browser-default\">\n          <li>color - DIFFERENT</li>\n          <li>shape - DIFFERENT</li>\n          <li>number - DIFFERENT</li>\n          <li>fill - SAME</li>\n        </ul>\n      </p>\n      <p>This is not a set:</p>\n      <div className=\"row\">\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"1220\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"1110\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"2000\" />\n          </div>\n        </div>\n      </div>\n      <p>\n        <ul className=\"browser-default\">\n          <li>fill - SAME</li>\n          <li>color - DIFFERENT</li>\n          <li>shape - DIFFERENT</li>\n          <li>number - NOT THE SAME OR DIFFERENT!</li>\n        </ul>\n        Even though the cards have the same fill, different colors, and different shapes, the\n        numbers are neither <em>all the same</em> nor <em>all different</em>, so it's not a set.\n      </p>\n      <p>\n        It doesn't matter how many of the characteristics are the same, and how many are different,\n        as long as for <em>each</em> characteristic, the cards are all the same or all different.\n        Here's one last example:\n      </p>\n      <div className=\"row\">\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"1122\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"0201\" />\n          </div>\n        </div>\n        <div className=\"col s4\">\n          <div className=\"card\">\n            <Card desc=\"2010\" />\n          </div>\n        </div>\n      </div>\n      <p>\n        <ul className=\"browser-default\">\n          <li>color - DIFFERENT</li>\n          <li>shape - DIFFERENT</li>\n          <li>number - DIFFERENT</li>\n          <li>fill - DIFFERENT</li>\n        </ul>\n        Each characteristic is different for all three cards, so this is a set.\n      </p>\n    </div>\n  )\n}\n\nexport default Rules\n","import React, { useState, useEffect, useRef } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nimport Signout from './Signout'\nimport { handleGoogleRedirect } from '../utils/helpers'\nimport * as firebase from 'firebase/app'\nimport 'firebase/auth'\n\nfunction Login(props) {\n  const user = useSelector((state) => state.user)\n\n  useEffect(() => {\n    firebase\n      .auth()\n      .getRedirectResult()\n      .then(function(result) {\n        if (result.credential) {\n          // This gives you a Google Access Token. You can use it to access the Google API.\n          var token = result.credential.accessToken\n          // ...\n        }\n        // The signed-in user info.\n        var user = result.user\n        console.log(token, user)\n      })\n      .catch(function(error) {\n        // Handle Errors here.\n        var errorCode = error.code\n        var errorMessage = error.message\n        // The email of the user's account used.\n        var email = error.email\n        // The firebase.auth.AuthCredential type that was used.\n        var credential = error.credential\n        // ...\n      })\n  }, [])\n\n  if (!user) {\n    return (\n      <div className=\"container\">\n        <button onClick={handleGoogleRedirect} className=\"btn\">\n          Sign in\n        </button>\n      </div>\n    )\n  }\n  return (\n    <div className=\"container\">\n      <Signout />\n    </div>\n  )\n}\n\nexport default Login\n","import React, { Component } from 'react'\nimport Board from './Board'\nimport {\n  makeDeck,\n  cardToggle,\n  reshuffle,\n  removeSelected as removeSelectedCards,\n  isSet,\n  nameThird,\n} from '../utils/helpers'\nimport { shuffle, cloneDeep } from 'lodash'\nimport { colors } from '../config'\nimport update from 'immutability-helper'\nimport { Link } from 'react-router-dom'\n\nconst debugging = false\n\nconst config = {\n  declareTime: 5000,\n  colors,\n  playingTo: 6,\n  cpuDelay: 1200,\n}\n\nconst createGameState = () => {\n  const initialDeck = makeDeck()\n  return {\n    ...reshuffle({\n      deck: initialDeck.slice(12),\n      board: initialDeck.slice(0, 12),\n    }),\n    selected: [],\n  }\n}\n\nconst createPlayers = (num) => {\n  const players = {}\n  for (let i = 0; i < num; i++) {\n    players[i] = {\n      score: 0,\n      color: config.colors[i],\n    }\n  }\n  return players\n}\n\nconst initialState = {\n  numPlayers: null,\n  players: createPlayers(2),\n  gameStarted: false,\n  name: '1',\n  setFound: false,\n  declarer: null,\n  timeDeclared: null,\n  gameOver: false,\n  difficulty: 2,\n  cpuTurnInterval: 1000,\n  cpuFound: [],\n}\n\nclass SharedDevice extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      ...cloneDeep(initialState),\n      ...createGameState(),\n    }\n  }\n\n  handleStartGame = (numPlayers) => {\n    this.setState({\n      numPlayers,\n      players: createPlayers(numPlayers),\n    })\n    this.setState({\n      gameStarted: true,\n    })\n  }\n\n  updatePlayerScore = (name, delta) => {\n    const { players } = this.state\n    const newScore = players[name].score + delta\n    const newPlayers = update(players, {\n      [name]: {\n        $merge: {\n          score: newScore,\n        },\n      },\n    })\n    return [newPlayers, newScore]\n  }\n\n  expireDeclare = () => {\n    const { declarer, selected } = this.state\n    if (!isSet(selected)) {\n      const [newPlayers] = this.updatePlayerScore(declarer, -0.5)\n      this.setState({\n        players: newPlayers,\n        declarer: null,\n        timeDeclared: null,\n        selected: [],\n      })\n    }\n  }\n\n  markPointForDeclarer = (declarer) => {\n    const [newPlayers, newScore] = this.updatePlayerScore(declarer, 1)\n    const gameOver = newScore >= config.playingTo && declarer\n    const newState = {\n      players: newPlayers,\n      gameOver,\n    }\n    this.setState(newState)\n  }\n\n  performDeclare = (declarer) => {\n    if (!this.state.declarer) {\n      const timeNow = new Date().getTime()\n      const update = {\n        declarer,\n        timeDeclared: timeNow,\n      }\n      this.setState(update)\n\n      this.undeclareID = setTimeout(() => {\n        this.expireDeclare()\n      }, config.declareTime)\n    }\n  }\n\n  updateSelected = (newSelected, declarer) => {\n    const newState = {\n      setFound: isSet(newSelected),\n      selected: newSelected,\n      declarer,\n    }\n    if (newState.setFound) {\n      clearTimeout(this.undeclareID)\n      setTimeout(() => {\n        this.removeSet()\n      }, 2000)\n    }\n    this.setState(newState)\n  }\n\n  handleCardClick = (card) => {\n    const { setFound, declarer } = this.state\n    if (!setFound && declarer !== null) {\n      const newSelected = cardToggle(card, this.state.selected)\n      this.setState({\n        selected: newSelected,\n      })\n      if (isSet(newSelected)) {\n        this.updateSelected(newSelected, declarer)\n      }\n    }\n  }\n\n  handlePlayerClick = (clickerName) => {\n    const { declarer } = this.state\n    if (declarer === null) {\n      this.performDeclare(clickerName)\n    }\n  }\n\n  handleRedeal = () => {\n    const newState = reshuffle(this.state)\n    this.setState(newState)\n  }\n\n  removeSet = () => {\n    const { declarer, selected } = this.state\n    if (isSet(selected)) {\n      console.log('Set found, removing')\n      const newScores = this.markPointForDeclarer(declarer)\n      const newState = {\n        ...newScores,\n        setFound: false,\n        declarer: null,\n        timeDeclared: null,\n        ...removeSelectedCards(this.state),\n      }\n      this.setState(newState)\n    }\n    clearInterval(this.cpuTimer)\n    setTimeout(() => {\n      this.cpuTimer = setInterval(this.cpuTurn, this.state.cpuTurnInterval)\n    }, config.cpuDelay)\n  }\n\n  resetGame = () => {\n    clearInterval(this.cpuTimer)\n    this.setState({\n      ...cloneDeep(initialState),\n      ...createGameState(),\n    })\n  }\n\n  render() {\n    const { board, deck, selected, declarer, players, numPlayers, setFound } = this.state\n    if (!numPlayers) {\n      return (\n        <div className=\"container\">\n          <h4>Choose Number of Players</h4>\n          <div className=\"row\">\n            <div className=\"col s12\">\n              {[...Array(6).keys()].map((i) => {\n                return (\n                  <div key={`players-${i}`} className=\"col s4 player-number\">\n                    <div\n                      onClick={() => {\n                        this.handleStartGame(i + 1)\n                      }}\n                      className=\"btn-large\"\n                    >\n                      {i + 1}\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n            <div>\n              <p>\n                <Link to=\"/solo\">Back</Link>\n              </p>\n            </div>\n          </div>\n        </div>\n      )\n    }\n    return (\n      <React.Fragment>\n        <Board\n          board={board}\n          deck={deck}\n          selected={selected}\n          declarer={declarer}\n          handleCardClick={this.handleCardClick}\n          handlePlayerClick={this.handlePlayerClick}\n          handleDeclare={this.handleDeclare}\n          players={players}\n          setFound={this.state.setFound}\n          gameOver={this.state.gameOver}\n          myName={this.state.name}\n          resetGame={this.resetGame}\n          solo={true}\n          sharedDevice={true}\n          gameMode=\"shared-device\"\n        />\n      </React.Fragment>\n    )\n  }\n}\n\nexport default SharedDevice\n","import React, { useState, useEffect } from 'react'\nimport Routes from './Routes'\nimport { updateUser, updateNickname } from '../redux-helpers'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { Link } from 'react-router-dom'\n\nimport axios from 'axios'\n\nfunction Stats(props) {\n  const userReducer = useSelector((state) => state.user)\n  const { user } = userReducer\n  const [stats, setStats] = useState(null)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    const getStats = async () => {\n      axios.get(`/api/user/stats/${user.uid}`).then((response) => {\n        setStats(response.data)\n      })\n    }\n\n    if (!userReducer.loading && user !== null) {\n      getStats()\n    }\n  }, [userReducer.loading])\n\n  if (userReducer.loading) {\n    return 'Loading...'\n  }\n\n  console.log(stats)\n\n  if (user === null) {\n    return <div>Sign in to view stats</div>\n  }\n\n  return (\n    <div className=\"container\">\n      <h3>Statistics</h3>\n      <table className=\"striped\">\n        <thead>\n          <tr>\n            <th>Difficulty</th>\n            <th>Games Played</th>\n            <th>Winning Percentage</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {stats &&\n            stats.map((row, i) => {\n              return (\n                <tr key={`stats-${i}`}>\n                  <td>{row.difficulty_level}</td>\n                  <td>{row.games_played}</td>\n                  <td>{Math.round(100 * (row.games_won / row.games_played))}%</td>\n                </tr>\n              )\n            })}\n        </tbody>\n      </table>\n      <p>\n        <Link to=\"/\">Main Menu</Link>\n      </p>\n    </div>\n  )\n}\n\nexport default Stats\n","import React, { Component, Fragment } from 'react'\nimport { Link } from 'react-router-dom'\nimport { shuffle, cloneDeep, isEqual } from 'lodash'\nimport { connect } from 'react-redux'\nimport update from 'immutability-helper'\nimport axios from 'axios'\nimport Slider from 'react-rangeslider'\nimport Modal from './Modal'\n\nimport {\n  makeDeck,\n  cardToggle,\n  reshuffle,\n  removeSelected as removeSelectedCards,\n  isSet,\n  nameThird,\n  countSets,\n  handleGoogleRedirect,\n} from '../utils/helpers'\nimport { colors } from '../config'\nimport Board from './Board'\nimport Signout from './Signout'\n\nconst debugging = false\n\nconst config = {\n  turnTime: 4000,\n  colors,\n  playingTo: 6,\n  cpuDelay: 1200,\n}\n\nconst createGameState = (cardsOnBoard) => {\n  const getMinSets = (cardsOnBoard) => {\n    return Math.round((cardsOnBoard - 3) / 3)\n  }\n\n  const minSets = getMinSets(cardsOnBoard)\n  const initialDeck = makeDeck()\n  return {\n    ...reshuffle(\n      {\n        deck: initialDeck,\n      },\n      { boardSize: cardsOnBoard, minimumSets: minSets },\n    ),\n    selected: [],\n  }\n}\n\nconst logTime = (msg = '') => {\n  const d = new Date()\n  const s = (d.getTime() % 10 ** 6) / 1000\n  console.log(msg, s.toFixed(1))\n}\n\nconst initialState = {\n  players: {\n    you: {\n      score: 0,\n      color: config.colors[0],\n    },\n  },\n  gameStarted: false,\n  name: 'you',\n  setFound: false,\n  gameOver: false,\n  startTime: null,\n  elapsedTime: null,\n  setsFound: [],\n  setsOnBoard: null,\n  cardsOnBoard: 12,\n  popupVisible: false,\n  popUpText: 'SET!',\n}\n\nconst sortSet = (set) => {\n  return set.sort()\n}\n\nclass Puzzle extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      ...cloneDeep(initialState),\n    }\n  }\n\n  handleStartGame = (e) => {\n    e.preventDefault()\n    const { cardsOnBoard } = this.state\n    const gameState = createGameState(cardsOnBoard)\n    const startTime = new Date()\n    this.setState({\n      gameStarted: true,\n      startTime,\n      elapsedTime: 0,\n      ...gameState,\n      setsOnBoard: countSets(gameState.board),\n    })\n    window.timeId = setInterval(() => {\n      const elapsedTime = Math.round((new Date().getTime() - startTime.getTime()) / 1000)\n      this.setState({\n        elapsedTime,\n      })\n    }, 1000)\n  }\n\n  componentDidMount = () => {}\n\n  updatePlayerScore = (name, delta) => {\n    const { players } = this.state\n    const newScore = players[name].score + delta\n    const newPlayers = update(players, {\n      [name]: {\n        $merge: {\n          score: newScore,\n        },\n      },\n    })\n    return [newPlayers, newScore]\n  }\n\n  performDeclare = (declarer) => {\n    if (!this.state.declarer) {\n      const timeNow = new Date().getTime()\n      const update = {\n        declarer,\n        timeDeclared: timeNow,\n      }\n      this.setState(update)\n\n      this.undeclareID = setTimeout(() => {\n        this.expireDeclare()\n      }, config.turnTime)\n    }\n  }\n\n  updateSelected = (newSelected, declarer) => {\n    const newState = {\n      setFound: isSet(newSelected),\n      selected: newSelected,\n      declarer,\n    }\n    if (newState.setFound) {\n      clearTimeout(this.undeclareID)\n      setTimeout(() => {\n        this.removeSet()\n      }, 2000)\n    }\n    this.setState(newState)\n  }\n\n  handleDeclare = () => {\n    return\n  }\n\n  resetLocalSelected = (noCheck = false) => {\n    this.setState((currentState) => {\n      if (currentState.selected.length === 3) {\n        if (noCheck || !isSet(currentState.selected)) {\n          return {\n            selected: [],\n          }\n        }\n      }\n    })\n  }\n\n  handleCardClick = (card) => {\n    const newSelected = cardToggle(card, this.state.selected)\n    const newState = {}\n    if (newSelected.length === 3) {\n      if (isSet(newSelected)) {\n        console.log('Set found')\n        this.setState((currentState) => {\n          window.setTimeout(() => {\n            this.setState({\n              popupVisible: false,\n            })\n            this.resetLocalSelected(true)\n          }, 2000)\n          const { setsFound } = currentState\n          const isNewSet = setsFound\n            .map((set) => {\n              const result = isEqual(newSelected.sort(), set)\n              return !result\n            })\n            .every((result) => result)\n          if (!isNewSet) {\n            return {\n              popupVisible: true,\n              popUpText: 'Already found!',\n            }\n          }\n          const newSetsFound = [...setsFound, newSelected.sort()]\n          return {\n            setsFound: newSetsFound,\n            popupVisible: true,\n            popUpText: 'SET!',\n          }\n        })\n      } else {\n        console.log('Bad set selected!')\n        window.setTimeout(this.resetLocalSelected, 1200)\n      }\n    }\n\n    this.setState({\n      ...newState,\n      selected: newSelected,\n    })\n  }\n\n  handleRedeal = () => {\n    return\n    const newState = reshuffle(this.state)\n    this.setState(newState)\n  }\n\n  removeSet = () => {\n    const { declarer, selected } = this.state\n    if (isSet(selected)) {\n      console.log('Set found, removing')\n      const newScores = this.markPointForDeclarer(declarer)\n      const newState = {\n        ...newScores,\n        setFound: false,\n        declarer: null,\n        timeDeclared: null,\n        ...removeSelectedCards(this.state),\n      }\n      this.setState(newState)\n    }\n    clearInterval(this.cpuTimer)\n    setTimeout(() => {\n      this.cpuTimer = setInterval(this.cpuTurn, this.state.cpuTurnInterval)\n    }, config.cpuDelay)\n  }\n\n  resetGame = () => {\n    clearInterval(this.cpuTimer)\n    this.setState({\n      ...cloneDeep(initialState),\n      ...createGameState(),\n    })\n  }\n\n  render() {\n    const {\n      board,\n      deck,\n      selected,\n      declarer,\n      players,\n      gameStarted,\n      setFound,\n      setsFound,\n      popupVisible,\n    } = this.state\n    const { userReducer } = this.props\n    const { user } = userReducer\n    if (userReducer.loading) {\n      return 'Loading...'\n    }\n    if (!gameStarted) {\n      return (\n        <div className=\"container\">\n          {user !== null && <Signout />}\n          <h3>Puzzle Mode</h3>\n          <p>Find as many sets as you can</p>\n          <div className=\"row\">\n            <div className=\"col s8 m4\">\n              <Slider\n                ref={(input) => {\n                  this.difficultyInput = input\n                }}\n                min={2}\n                max={4}\n                orientation=\"horizontal\"\n                tooltip={true}\n                // labels={{ 2: 6, 3: 9, 4: 12 }}\n                format={(v) => 3 * v}\n                value={Number(this.state.cardsOnBoard) / 3}\n                onChange={(cards) => {\n                  this.setState({\n                    cardsOnBoard: cards * 3,\n                  })\n                }}\n              />\n              <form onSubmit={this.handleStartGame}>\n                <input type=\"submit\" value=\"Start\" className=\"btn\" />\n              </form>\n            </div>\n            <div className=\"row\">\n              <div style={{ marginTop: '48px' }} className=\"col s12\">\n                <p style={{ marginTop: '36px' }}>\n                  <Link to=\"/solo\">Back to Solo Menu</Link>\n                </p>\n                {!user && (\n                  <Fragment>\n                    <hr />\n                    <p>To save your stats, sign in with your Google account.</p>\n\n                    <p>\n                      <button onClick={handleGoogleRedirect} className=\"btn\">\n                        Sign in\n                      </button>\n                    </p>\n                  </Fragment>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n    }\n    return (\n      <React.Fragment>\n        <Modal visible={popupVisible}>\n          <p className=\"flow-text center-align\">{this.state.popUpText}</p>\n        </Modal>\n        <Board\n          board={board}\n          deck={deck}\n          selected={selected}\n          declarer={declarer}\n          handleCardClick={this.handleCardClick}\n          handleDeclare={this.handleDeclare}\n          players={players}\n          setFound={this.state.setFound}\n          gameOver={this.state.gameOver}\n          myName={this.state.name}\n          resetGame={this.resetGame}\n          solo={true}\n          gameMode=\"puzzle\"\n          setsFound={setsFound}\n          startTime={this.state.startTime}\n          elapsedTime={this.state.elapsedTime}\n        />\n      </React.Fragment>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  userReducer: state.user,\n})\n\nexport default connect(mapStateToProps)(Puzzle)\n","import React, { Component, Fragment } from 'react'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\n\nimport Host from './Host'\nimport Guest from './Guest'\nimport Lobby from './Lobby'\nimport Solo from './Solo'\nimport Main from './Main'\nimport Rules from './Rules'\nimport Login from './Login'\nimport SharedDevice from './SharedDevice'\nimport Stats from './Stats'\nimport Puzzle from './Puzzle'\n\nclass Routes extends Component {\n  render() {\n    return (\n      <Fragment>\n        <Router>\n          <Switch>\n            <Route exact path=\"/\" component={Main} />\n            <Route path=\"/host\" component={Host} />\n            <Route path=\"/lobby\" component={Lobby} />\n            <Route path=\"/guest/:gameName\" component={Guest} />\n            <Route path=\"/solo\" component={Solo} />\n            <Route path=\"/local\" component={SharedDevice} />\n            <Route path=\"/rules\" component={Rules} />\n            <Route path=\"/login\" component={Login} />\n            <Route path=\"/stats\" component={Stats} />\n            <Route path=\"/puzzle\" component={Puzzle} />\n          </Switch>\n        </Router>\n      </Fragment>\n    )\n  }\n}\n\nexport default Routes\n","import React, { useState, useEffect } from 'react'\nimport Routes from './Routes'\nimport firebase from 'firebase/app'\nimport 'firebase/auth'\n// import 'firebase/firestore'\n// import firestore from '../firestore'\nimport { updateUser, updateNickname } from '../redux-helpers'\nimport { useDispatch } from 'react-redux'\nimport axios from 'axios'\n\nfunction App(props) {\n  const [user, setUser] = useState(null)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        const nickname = window.localStorage.getItem('nickname') || user.displayName.split(' ')[0]\n        const myUser = {\n          displayName: user.displayName,\n          email: user.email,\n          emailVerified: user.emailVerified,\n          photoURL: user.photoURL,\n          isAnonymous: user.isAnonymous,\n          uid: user.uid,\n          providerData: user.providerData,\n          nickname,\n        }\n        dispatch(updateUser({ loading: false, user: myUser }))\n        axios\n          .get(`/api/user/${user.uid}`)\n          .then((result) => {\n            console.log('User is registered')\n          })\n          .catch((err) => {\n            if (err.response && err.response.status === 404) {\n              console.log('User not registered')\n              axios\n                .post('/api/user', {\n                  uid: user.uid,\n                  info: myUser,\n                })\n                .then(() => {\n                  console.log('User registered successfully')\n                })\n                .catch((err) => {\n                  console.log('Error registering user', err)\n                })\n            } else {\n              console.log('An error occurred trying to GET user info')\n            }\n          })\n      } else {\n        console.log('Not signed in')\n        dispatch(updateUser({ loading: false, user: null }))\n      }\n    })\n  }, [])\n\n  return <Routes />\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './styles/index.scss'\nimport App from './components/App'\nimport { Provider } from 'react-redux'\nimport store from './redux-helpers'\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}